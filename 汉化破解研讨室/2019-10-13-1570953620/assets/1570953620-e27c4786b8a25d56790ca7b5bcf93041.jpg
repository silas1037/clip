<!DOCTYPE html>
<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<link rel="icon" href="https://www.cloud.tencent.com/favicon.ico" type="image/x-icon">
	<style>
		.domian-block-box {
			width: 468px;
			margin: 128px auto;
			font-size: 16px;
			color: #222;
			line-height: 24px
		}

		.domian-block-icon {
			background-image: url('img/domian-block-icon.svg');
			width: 70px;
			height: 72px;
			background-size: 70px 72px;
			margin-bottom: 40px
		}

		.domian-block-box h1 {
			font-weight: 400;
			font-size: 24px;
			color: #333;
			margin-bottom: 10px;
			line-height: 36px
		}

		.domian-block-text {
			color: #2B2B2B
		}

		.domian-block-box a {
			color: #3367D6
		}

		.domian-block-dl dt {
			color: #222;
			margin-bottom: 10px
		}

		.domian-block-dl {
			margin-top: 60px
		}

		.domian-block-dl dd {
			margin-bottom: 10px;
			position: relative;
			padding-left: 10px
		}

		.domian-block-dl dd:before {
			content: '';
			width: 5px;
			height: 5px;
			border-radius: 4px;
			background-color: #333;
			position: absolute;
			vertical-align: middle;
			top: 7px;
			left: 0
		}

		.domian-block-service {
			margin-top: 60px
		}

		.domian-block-btn,
		.domian-block-reason-info {
			display: none
		}

		.domian-block-reason-text {
			color: #666
		}

		@media screen and (max-width:768px) {
			body {
				margin: 0 25px
			}
			.domian-block-dl dd:before,
			.domian-block-dl dt,
			.domian-block-dl-span,
			.domian-block-reason,
			.domian-block-service {
				display: none
			}
			.domian-block-reason-info {
				display: block;
				font-size: 16px;
				color: #3367D6;
				line-height: 24px;
				margin-top: 40px
			}
			.domian-block-box {
				width: auto;
				margin: 80px auto;
				max-width: 310px
			}
			.domian-block-hidden {
				display: none !important
			}
			.domian-block-show {
				display: block !important
			}
			.domian-block-dl dd {
				padding-left: 0;
				padding-bottom: 40px
			}
			.domian-block-reason-text {
				margin-top: 10px;
				margin-bottom: 10px
			}
			.domian-block-btn {
				background-color: #1973E8;
				border-radius: 4px;
				width: 310px;
				height: 54px;
				display: block;
				color: #fff !important;
				line-height: 54px;
				text-align: center;
				font-size: 14px;
				margin: 0 auto
			}
			.domian-block-text {
				color: #666
			}
		}
	</style>
	<link rel="stylesheet" href="https://imgcache.qq.com/open_proj/proj_qcloud_v2/gateway/portal/css/global-201811090948.css?max_age=31536000">
</head>

<body>
	<div class="domian-block-box" id="noBeian" style="display:none;">
		<div class="domian-block-hd domian-block-show">
			<div class="domian-block-icon"></div>
			<h1>网站暂时无法访问</h1>
			<div class="domian-block-text">该网站未根据<a href="//www.qcloud.com/document/product/243/10045" target="_blank">工信部相关法律规则</a>进行备案</div>
		</div>
		<div class="domian-block-reason-info domian-block-show">详细信息</div>
		<div class="domian-block-reason domian-block-hidden">
			<dl class="domian-block-dl">
				<dt>可能因为以下原因:</dt>
				<dd>
					<p><span class="domian-block-dl-span">原因一: </span>该网站未根据工信部要求完成备案</p>
					<p><a target="_blank" href="//www.qcloud.com/document/product/243/9622">如何进行网站备案?</a></p>
				</dd>
				<dd>
					<p><span class="domian-block-dl-span">原因二: </span>该网站已取得备案号，但尚未在腾讯云办理接入备案</p>
					<p class="domian-block-reason-text">备案信息需要与接入服务商进行关联，请在腾讯云完成接入备案</p>
					<p><a target="_blank" href="//www.qcloud.com/document/product/243/9623">如何进行接入备案?</a></p>
				</dd>
				<dd>
					<p><span class="domian-block-dl-span">原因三: </span>该网站可能存在不适宜传播的内容</p>
				</dd>
			</dl>
			<div class="domian-block-service">
				更多备案帮助，可<a href="https://console.cloud.tencent.com/smarty?from=beian" target="_blank">咨询客服</a>
			</div>
			<a class="domian-block-btn" href="#">隐藏详细信息</a>
		</div>
	</div>

	<div class="domian-block-box" id="contentViolation" style="display:none;height:380px;top:40%;">
		<div class="domian-block-hd domian-block-show">
			<div class="domian-block-icon"></div>
			<h1>网站暂时无法访问</h1>
			<div style="border-bottom:solid 0px #e4e5e5">
				<p>尊敬的用户，您好：</p>
				<p>由于该网站存在敏感信息或违法内容，造成您暂时无法访问。</p>
				<br />
				<p>请网站管理员登录 <a target="_blank" href="//console.qcloud.com/workorder/category/create?level1_id=1&level2_id=20&level1_name=%E5%85%AC%E5%85%B1%E5%9F%BA%E7%A1%80%E7%B1%BB%E9%97%AE%E9%A2%98&level2_name=%E5%A4%87%E6%A1%88">腾讯云工单系统</a>					或联系客服：4009-100-100
				</p>
				<br>
			</div>
		</div>
	</div>

	<script type="text/JavaScript" src="//imgcache.qq.com/open/qcloud/js/version/201408/jquery.201408191328.js"></script>
	<script type="text/JavaScript" src="//imgcache.qq.com/qcloud/main/scripts/release/common/login/api.js"></script>
	<script>
		window.onload = function () {
			var domain = getTopDomain()
			getDomainBanType(escHTML(domain));
			reporter.collect({
				module: 'domainBan',
				operType: 1,
				operId: 'domain.ban.pv'
			})
		}

		function getTopDomain() {
			var queryObj = paramsToObject(location.search);
			var domain = queryObj.domain || queryObj.d;
			return domain.split('.').slice(-2).join('.');
		}

		function paramsToObject(queryString) {
			var _result = {}, _pairs, _pair, _query, _key, _value;

			if (typeof (queryString) === 'object') { return queryString; }

			_query = queryString || window.location.search;
			_query = _query.replace('?', '');
			_pairs = _query.split('&');

			_pairs.forEach(function (keyVal, i) {
				_pair = keyVal.split('=');
				_key = _pair[0];
				_value = _pair.slice(1).join('=');
				_result[decodeURIComponent(_key)] = decodeURIComponent(_value);
			});

			return _result;
		};

		function getDomainBanType(domain) {
			var startTime = Date.now();
			var csrfCode = window.QCLogin.getCsrfCode();
			var requestUrl = window.location.href.indexOf('cloud.tencent.com') > -1 ? '//wss.cloud.tencent.com/dns/api/common/get_domain_beian_type' : '//wss.qcloud.com/dns/api/common/get_domain_beian_type';
			$.ajax({
				url: requestUrl,
				data: {
					domain: domain,
					csrfCode: csrfCode
				},
				method: "get",
				success: function (response) {
					var code = response && response.status && response.status.code;
					var result = response && response.result || {};

					if (0 !== code) {
						$('#noBeian').show();
					} else {
						if (result.ban_type == 1) {
							$('#noBeian').show();
						} else {
							$('#contentViolation').show();
						}
					}

					reporter.retCode({
						url: requestUrl,
						code: response && response.status && response.status.code || 0,
						time: Date.now() - startTime
					});
				},
				error: function (e) {
					$('#noBeian').show();
					reporter.retCode({
						url: requestUrl,
						code: 8,
						time: Date.now() - startTime
					});
				},
				'xhrFields': {
					'withCredentials': true// 将XHR对象的withCredentials设为true
				},
				'cache': false
			})
		}


		//数据上报代码
		var http_img_sender = function () {
			var img = new Image();
			var sender = function (src) {
				var _send = function () {
					img.onload = img.onerror = img.onabort = function () {
						img.onload = img.onerror = img.onabort = null;
						img = null;
					};
					img.src = src;
				};
				_send();
			};

			return sender;
		};

		var getParam = function (name) {
			var r = new RegExp("(\\?|#|&)" + name + "=([^&]*)(&|$)")
			var m = location.href.match(r)
			if (!m || m == "") m = top.location.href.match(r)
			return (!m ? "" : m[2]);
		}

		var parseUrl = function (url) {
			if (/^(([^:\/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/.test(url)) {
				var host = RegExp.$4.split(':');
				return {
					protocol: RegExp.$1,
					host: RegExp.$4,
					hostname: host[0],
					port: host[1] || '',
					pathname: RegExp.$5,
					search: RegExp.$6,
					hash: RegExp.$8,
					href: url
				};
			} else {
				return null;
			}
		};

		var escHTML = function (str) {
			if (str == 0) {
				return str;
			}
			str = (str || '').toString();
			return str.replace(/&(?!\w+;)/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');
		};

        /**
         * 数据上报
         * @class reporter
         * @static
         */
		var reporter = {
			getCurPageUrl: function () {   //因为目前的控制台有很多的采用的是
				var path = window.location.pathname || "";
				var host = window.location.host || "";

				var arr = path.split("/");
				var finalArr = [];
				finalArr.push(host);
				for (var i = 1; i < Math.min(3, arr.length); i++) {
					finalArr.push(arr[i]);
				}

				return finalArr.join("/");  //最多取前两级
			},

            /**
            *   统一罗盘上报
            *   @param operId string  这个必填的
            */
			collect: function (param) {
				if (!param) { return; }  //如果没有参数,或者没有operId，就忽略
				var curUrl = reporter.getCurPageUrl() || window.location.href;
				var from = getParam("from") || getParam("fromSource") || getParam("fromsource") || "other";

				var paramArr = [];
				var obj = {
					"page": curUrl,
					"operId": param.operId,   //操作id
					"operType": param.operType || 1,  //默认是查看, 1 查看 2点击
					"from_flag": param.from || from, //来源,
					"ext1": param.ext1 || "", //附加字段,可选
					"ext2": param.ext2 || "", //附加字段,可选
					"ext3": param.ext3 || "", //附加字段,可选
					"ext4": param.ext4 || "", //附加字段,可选
					"ext5": param.ext5 || "", //附加字段,可选
					"ext6": param.ext6 || "", //附加字段,可选
					"ext7": param.ext7 || "", //附加字段,可选
					"ext8": param.ext8 || "", //附加字段,可选
					"ext9": param.ext9 || "", //附加字段,可选
					"ext10": param.ext10 || "", //附加字段,可选
					"logtime": Date.now()
				};

				for (var i in obj) {
					paramArr.push(i + "=" + encodeURIComponent(obj[i]));
				}

				var url = "//report.vip.qq.com/cgi-bin/report?r=reportData/doReport&tbName=dc01253&t=" + Math.random() + "&" + paramArr.join("&");
				var sender = http_img_sender();

				sender(url);

			},


            /**
             * 上报 CGI 状况
             *
             * @method cgi
             * @param {object} param 上报的 CGI 信息
             *    - param.url {string} CGI的地址，会对地址进行处理
             *    - param.code   {number} CGI 返回码
             *    - param.time   {number} CGI 耗时
             *	  - param.succMap{object} 可选  code是成功的还是失败的，先查询这个结构里面，如果没有的话，就按照0成功，非0失败的原则处理
                *    - param.opt    {object} 附加参数，这些参数会被统一按照附加的放进去。目前附加的支持
                *		ext2-ext10
                *
                * */
			retCode: function (param) {
				if (!param || typeof (param) != 'object' || !param.url) {
					return;
				}

				param.opt = param.opt || {};
				param.succMap = param.succMap || {};

				var cgi = parseUrl(param.url);
				var pageOBj = parseUrl(window.location.href);

				//对param进行处理
				var data = {
					url: param.url,   //用户的cgi全地址
					domain: cgi.host || window.location.host,
					cgi: cgi.pathname,
					page: reporter.getCurPageUrl(),
					type: param.succMap[param.code] ? 1 : (0 == param.code ? 1 : 2),  //1成功 ，2 失败 ,3逻辑失败
					code: param.code,
					time: param.time
				};


				for (var i in param.opt) {  //将opt中的数据复制过来，统一上报
					data[i] = param.opt[i];
				}

				var paramArr = [];
				for (var i in data) {
					paramArr.push(i + "=" + encodeURIComponent(data[i]));
				}

				var url = "//report.vip.qq.com/cgi-bin/report?r=reportData/doReport&tbName=dc01066&t=" + Math.random() + "&" + paramArr.join("&");


				var sender = http_img_sender();
				sender(url);
			}
		}
	</script>
	<script>
		$(function () {
			function init() {
				$('.domian-block-reason-info').on('click', function () {
					$('.domian-block-reason-info').removeClass('domian-block-show').addClass('domian-block-hidden');
					$('.domian-block-hd').removeClass('domian-block-show').addClass('domian-block-hidden');
					$('.domian-block-reason').removeClass('domian-block-hidden').addClass('domian-block-show');
				});
				$('.domian-block-btn').on('click', function () {
					$('.domian-block-reason-info').removeClass('domian-block-hidden').addClass('domian-block-show');
					$('.domian-block-hd').removeClass('domian-block-hidden').addClass('domian-block-show');
					$('.domian-block-reason').removeClass('domian-block-show').addClass('domian-block-hidden');
				});
			}
			init();
		})
	</script>
</body>

</html>
<!--[if !IE]>|xGv00|8f85bc5ee2a463e0e5c16c474a6dd271<![endif]-->