
  <!DOCTYPE html>
  <html id="" class="">
    <!-- OriginalSrc: https://bbs.sumisora.net/read.php?tid=11051522&fpage=3 -->
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />

      <title>PJADV引擎汉化研究|【汉化破解研讨室】|【游戏汉化交流区】 - 『澄空学园』 GalGame专题网</title>
      

<link rel="stylesheet" type="text/css" href="assets/1570977545-5f21d2d0f0e14c54e3e080ff47c8ec08.css" referrerpolicy="no-referrer">
<link type="text/css" href="assets/1570977545-2f10d407050ab6b2185fb483267feb32.css" rel="stylesheet" referrerpolicy="no-referrer">
<link href="assets/1570977545-6ea61090578ddc8e91dc9b26707cebc8.css" rel="stylesheet" type="text/css" referrerpolicy="no-referrer">
<link rel="stylesheet" type="text/css" href="assets/1570977545-46d427da9cafb653c4ed606490c99b3a.css" referrerpolicy="no-referrer">


<style class="darkreader darkreader--fallback" media="screen"></style>
<style class="darkreader darkreader--text" media="screen"></style>
<style class="darkreader darkreader--invert" media="screen"></style>
<style class="darkreader darkreader--inline" media="screen">[data-darkreader-inline-bgcolor] {
  background-color: var(--darkreader-inline-bgcolor) !important;
}
[data-darkreader-inline-bgimage] {
  background-image: var(--darkreader-inline-bgimage) !important;
}
[data-darkreader-inline-border] {
  border-color: var(--darkreader-inline-border) !important;
}
[data-darkreader-inline-border-bottom] {
  border-bottom-color: var(--darkreader-inline-border-bottom) !important;
}
[data-darkreader-inline-border-left] {
  border-left-color: var(--darkreader-inline-border-left) !important;
}
[data-darkreader-inline-border-right] {
  border-right-color: var(--darkreader-inline-border-right) !important;
}
[data-darkreader-inline-border-top] {
  border-top-color: var(--darkreader-inline-border-top) !important;
}
[data-darkreader-inline-boxshadow] {
  box-shadow: var(--darkreader-inline-boxshadow) !important;
}
[data-darkreader-inline-color] {
  color: var(--darkreader-inline-color) !important;
}
[data-darkreader-inline-fill] {
  fill: var(--darkreader-inline-fill) !important;
}
[data-darkreader-inline-stroke] {
  stroke: var(--darkreader-inline-stroke) !important;
}
[data-darkreader-inline-outline] {
  outline-color: var(--darkreader-inline-outline) !important;
}</style>
<style class="darkreader darkreader--user-agent" media="screen">html {
    background-color: #191a1b !important;
}
html, body, input, textarea, select, button {
    background-color: #191a1b;
}
html, body, input, textarea, select, button {
    border-color: #5a5956;
    color: #f0ebe2;
}
a {
    color: #4791e7;
}
table {
    border-color: #4f4e4c;
}
::placeholder {
    color: #bfb9ac;
}
::selection {
    background-color: #125cb4;
    color: #fffffd;
}
::-moz-selection {
    background-color: #125cb4;
    color: #fffffd;
}
input:-webkit-autofill,
textarea:-webkit-autofill,
select:-webkit-autofill {
    background-color: #565a0f !important;
    color: #f0ebe2 !important;
}
::-webkit-scrollbar {
    background-color: #1d1f1f;
    color: #cbc5b9;
}
::-webkit-scrollbar-thumb {
    background-color: #2c2d2d;
}
::-webkit-scrollbar-thumb:hover {
    background-color: #343636;
}
::-webkit-scrollbar-thumb:active {
    background-color: #404142;
}
::-webkit-scrollbar-corner {
    background-color: #191a1b;
}
* {
    scrollbar-color: #2c2d2d #1d1f1f;
}</style>
<style class="darkreader darkreader--sync" media="screen"></style>
<style class="darkreader darkreader--override" media="screen">.jfk-bubble {
    background-color: #000000 !important;
}
.vimvixen-hint {
    background-color: #765500 !important;
    border-color: #d5b22e !important;
    color: #f9edcc !important;
}</style>
<style class="darkreader darkreader--sync" media="screen"></style>
<style class="darkreader darkreader--sync" media="screen"></style>
<style class="darkreader darkreader--sync" media="screen"></style>
<style type="text/css"> 
.tr3 td,.tr3 th{border-right:1px solid #D5E5E8;}
.y-style{text-align:center;}
.tr1 th{border-right:1px solid #D5E5E8;}
.tr1 td.td1{border-left:0}
 

.signature img { max-height:250px !important; }
</style>
<style class="darkreader darkreader--sync" media="screen"></style>
<style type="text/css">@keyframes fadeInOpacity{0%{opacity:0}to{opacity:1}}:hover>*>.fbvd--wrapper{animation-name:fadeInOpacity;animation-duration:.3s;opacity:1}.fbvd--wrapper{position:absolute;top:10px;left:10px;opacity:0;text-align:center;margin:0;z-index:5}.fbvd--wrapper a{background: url("") no-repeat 3px 4.55px; background-color: #fff; display:inline-block;font:700 14px Helvetica,Arial,sans-serif;color:#4b4f56;text-decoration:none;vertical-align:middle;padding:0px 8px 0px;margin-right:8px;border-radius:2px; line-height: 22px; padding-left:19px; border: 1px solid #e7e7e7; background-size: 13px}.fbvd--wrapper a:last-child{margin-right:0}.fbvd--wrapper a:hover{text-decoration:none}.fbvd--wrapper a:focus{box-shadow:0 0 1px 2px rgba(88,144,255,.75),0 1px 1px rgba(0,0,0,.15);outline:none}.fbvd--wrapper b{font-size:13px;position:relative;top:1px;color:#3b5998;font-weight:400}</style>
<style class="darkreader darkreader--sync" media="screen"></style>

      <style class="mx-wc-style">
        .mx-wc-main img {max-width: 100%;}
        .mx-wc-main{
          box-sizing: content-box;
          background-color: rgb(25, 26, 27) !important;
          margin: 0 auto;
          margin-top: 20px;
          max-width: 1349px;
        }
        @media (min-width: 768px) {
          .mx-wc-main { padding: 15px 15px 80px 15px }
        }
        @media (max-width: 767px) {
          .mx-wc-main { padding: 15px 3px 80px 3px }
        }
  
      </style>
    </head>
    <body style="background-color: #ffffff !important; min-height: 100%; height: auto; position: static !important; overflow: auto !important; padding-bottom: 0px !important;" id="" class="">
      <div class="mx-wc-main">
        <div id="wrapA" class="mx-wc-selected-elem mx-wc-1570977545" style="display: block; float: none !important; position: relative !important; top: 0px !important; left: 0px !important; margin: 0px !important; flex: unset !important; width: 100% !important; max-width: 100% !important; box-sizing: border-box !important;">

<div id="header">
<div class="toptool tar">	<span>
	<a href="https://bbs.sumisora.net/read.php?tid=11051522&amp;fpage=3&amp;skinco=simple" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">手机版</a>

	| <a style="cursor:pointer;" id="td_skin" data-mx-warn="Empty URL">风格切换<img src="assets/1570977545-5c8e409588b73ce4284cf5b9bd619e15.gif"></a>
	| <a href="https://bbs.sumisora.net/read.php?tid=10894912" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">学生手册</a>
	</span>
</div>
<table cellspacing="0" cellpadding="0" align="center" width="100%">
<tbody><tr>
	<td class="banner"><a href="https://bbs.sumisora.net/" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img id="forumlogo" src="assets/1570977545-7ac78a0e1e3ce795251288b0c8bd4b1b.png"></a></td>
	<td class="banner" id="banner" align="right"></td>
</tr>
<tr><td align="center" height="1" colspan="2"></td></tr>
</tbody></table>
<div id="h_guide" class="guide" colspan="2"><span class="s3">»</span>

	<span style="font-weight:bold" class="s3">silasu</span>&nbsp;<a href="https://bbs.sumisora.net/login.php?action=quit&amp;verify=034be2bd" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">退出</a> |
	<a id="td_profile" href="https://bbs.sumisora.net/profile.php" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">控制面板</a>
	| <a id="td_msg" href="https://bbs.sumisora.net/message.php" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">

	短消息</a>

	| <a id="td_sort" href="https://bbs.sumisora.net/sort.php" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">统计排行</a>

	| <a href="https://bbs.sumisora.net/member.php" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">会员</a>

	| <a href="https://bbs.sumisora.net/search.php" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">搜索</a>
	| <a style="cursor:pointer;" id="td_hack" data-mx-warn="Empty URL">社区服务<img src="assets/1570977545-5c8e409588b73ce4284cf5b9bd619e15.gif"></a>

	| <a href="https://bbs.sumisora.net/hack.php?H_name=galgamevote" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">GALGAME角色人气投票活动</a>

 | <a href="https://bbs.sumisora.net/yume/polls/" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">近期关注</a><!--[if lte IE 6]>
 | <a href="read.php?tid=10955539" style="color:red">本站已停止支持IE6，请升级或更换浏览器</a>
<![endif]-->
</div>



</div>
<div id="main">




<div class="t3" style="margin-top:8px"><table width="100%" cellspacing="0" cellpadding="0" align="center">
	<tbody><tr><td class="b"><img src="assets/1570977545-ca4a91079181c2a5cb3514b2e5b5f035.gif" align="absmiddle"> <a href="https://bbs.sumisora.net/index.php" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">『澄空学园』</a> » <a href="https://bbs.sumisora.net/thread.php?fid=77" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">【游戏汉化交流区】</a> » <a href="https://bbs.sumisora.net/thread.php?fid=78&amp;page=3" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">【汉化破解研讨室】</a> » <a href="https://bbs.sumisora.net/read.php?tid=11051522" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">PJADV引擎汉化研究</a> <a href="https://bbs.sumisora.net/rss.php?tid=11051522" target="_blank" title="Rss订阅本帖最新内容" referrerpolicy="no-referrer" rel="noopener noreferrer"><img align="absmiddle" src="assets/1570977545-b4369735f1bfb33ab69477230a8ba635.png"></a></td></tr>
</tbody></table></div>

<!--ads begin-->

<!--ads end-->
<div class="t3"><table width="100%" align="center" cellspacing="0" cellpadding="0">
	<tbody><tr><td align="left"><div class="fl"></div></td><td align="right" style="padding-bottom:.2em"><a href="https://bbs.sumisora.net/post.php?action=reply&amp;fid=78&amp;tid=11051522" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img src="assets/1570977545-132cb83b134d7ecd9b390389d489bc43.png"></a>

<a href="https://bbs.sumisora.net/post.php?fid=78" style="margin-left:.5em" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img src="assets/1570977545-8cab7ee31ae503cf78e5410d40cec291.png" id="td_post"></a>

</td></tr>
</tbody></table></div>



<form name="delatc" method="post">


<div class="t" style="margin-bottom: 0px; border-bottom: 0px; --darkreader-inline-border-bottom: initial;" data-darkreader-inline-border-bottom=""><table cellspacing="0" cellpadding="0" width="100%">
	<tbody><tr><th class="h"><strong class="fl w"><b>本页主题:</b> PJADV引擎汉化研究</strong>
	<span class="fr w"><a data-mx-warn="Empty URL">&nbsp;</a><a href="https://bbs.sumisora.net/job.php?action=previous&amp;fid=78&amp;tid=11051522&amp;fpage=3&amp;goto=previous" class="fn" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">上一主题</a> | <a href="https://bbs.sumisora.net/job.php?action=previous&amp;fid=78&amp;tid=11051522&amp;fpage=3&amp;goto=next" class="fn" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">下一主题</a> | <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span> </th>
	</tr>
	<tr><td></td></tr>
	<tr class="tr2"><td colspan="2" class="tar">

		<a id="usetool" style="cursor:pointer" onclick="sendmsg('pw_ajax.php?action=usetool','',this.id)" data-mx-warn="Empty URL">[使用道具]</a>

		<br></td>
	</tr>
	<tr><td></td></tr>
</tbody></table></div>

<a name="tpc" data-mx-warn="Empty URL"></a>
<div class="t t2" style="border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top=""><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570977545-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>bingkan</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=735425" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570977545-fe8ef3331f97b66ca7156370f35bcf33.jpg" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_0"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">澄空一年生上学期</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570977545-f43195cd588caa26c296fcc61910b3e6.gif"><br>

<span class="user-info2" id="showface_0">
<span class="user-infoWrap2">


精华:

		<span class="s4">0</span>
<br>
发帖: <span class="s1 f9">53</span><br>
学分: <span class="s2 f9">0 点</span><br>
澄空币: <span class="s3 f9">599 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2012-02-02<br>
		最后登录:2014-06-29 <br><br> 
		</span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_tpc" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=11051522&amp;pid=tpc&amp;article=0" onclick="return sendurl(this,4,event)" id="quote_tpc" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=11051522&amp;pid=tpc&amp;article=0" id="modify_tpc" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=735425" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=11051522&amp;pid=tpc" onclick="return sendurl(this,8)" id="report_tpc" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=11051522&amp;uid=735425" title="只看楼主的所有帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('tpc')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_tpc" class="fl">&nbsp;PJADV引擎汉化研究</h1>
			

			<div id="p_tpc" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_tpc">&nbsp;&nbsp;&nbsp;&nbsp;网上使用PJADV的游戏本来就不多，汉化的根本没有？所以很难找到有关的资料……朋友想开一游戏的坑，结果就是这烂引擎……自己研究了半天，关键的问题没解决。不过也算有些进展，这里写下来。<br><br>首先说脚本部分<br><br>&nbsp;&nbsp;&nbsp;&nbsp;观察下游戏目录，根据文件名和文件大小，只有Archive.dat最可疑，打开之后：<br><span class="highslide"><img src="assets/1570977545-87f6d703e5afebc47acacf6ddec5b748.jpg" border="0" style="max-width: 100%;max-height: 800px;"></span><br><br>果然，这个textdata.bin和scenario.dat应该就是和脚本有关了。前者完全是乱码，猜测加密了，后者看起来像是索引。封包结构倒是很简单，解不解包都可以……<br>首先解决加密的问题，OD加载程序，还好没加壳。下断直到游戏读取Archive.dat，然后在内存里找到刚刚的加密文件，下内存写入断点，断在这：<br><span class="highslide"><img src="assets/1570977545-70834c2ef8d9e73f865ecdb68d608c10.jpg" border="0" style="max-width: 100%;max-height: 800px;"></span><br><br>解密代码很简单，key=CL=5C，异或加密，解密=加密倒是方便了不少，写个简单的py搞定：<br><span class="highslide"><img src="assets/1570977545-8a861d3fed417e2d181cb0d78872adad.jpg" border="0" style="max-width: 100%;max-height: 800px;"></span><br>看起来每句话以00 00结尾，刚开始以为只要以00 00结尾句子长度就无限制，不过果然天真了……改变句子长度后运行游戏会造成句子丢失、错位等现象，看来果然<br>scenario.dat不是吃软饭的<br><br>这个索引着实让我蛋疼了好一会……程序会根据scenario.dat里的控制字节switch到相应的地方，貌似有上百个case……Orz<br><br>大致上有用的结构只有下面两种：<br><br>07 03 00 80&nbsp;&nbsp;&nbsp;&nbsp;E7 00 00 00&nbsp;&nbsp; 30 36 00 00&nbsp;&nbsp; 36 36 00 00<br>1B 01 00 00&nbsp;&nbsp; 00 00 03 00&nbsp;&nbsp;&nbsp;&nbsp;01 00 00 00<br><h6 class="quote"><a href="javascript:" onclick="CopyCode(document.getElementById('code1'));" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Copy code</a></h6><pre class="prettyprint" id="code1" style="border-radius:5px;font-family:monaco,consolas,monospace;font-size:12px;overflow-x:auto;line-height:1.4em"><span class="kwd">struct</span><span class="pln"> script
</span><span class="pun">{</span><span class="pln">
</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="com">//控制字节</span><span class="pln">
</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> unknown </span><span class="com">//猜测和立绘有关）</span><span class="pln">
</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> nameoffset </span><span class="com">//textdat中人名的绝对地址，如果此项为0则不显示人名</span><span class="pln">
</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> scriptoffset </span><span class="com">//textdat中剧本的绝对地址</span><span class="pln">
</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="com">//unknown</span><span class="pln">
</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="com">//unknown</span><span class="pln">
</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="com">//unknown</span><span class="pln">
</span><span class="pun">…………</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="com">//后面可能还有许多控制字节，猜测和CG调用有关</span><span class="pln">
</span><span class="pun">}</span></pre><br><br><br>01 01 01 01&nbsp;&nbsp;03 02 01 01&nbsp;&nbsp;3A 2A 01 00&nbsp;&nbsp;F8 6B 01 00&nbsp;&nbsp;<br><br><h6 class="quote"><a href="javascript:" onclick="CopyCode(document.getElementById('code2'));" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Copy code</a></h6><pre class="prettyprint" id="code2" style="border-radius:5px;font-family:monaco,consolas,monospace;font-size:12px;overflow-x:auto;line-height:1.4em"><span class="kwd">struct</span><span class="pln"> choose
</span><span class="pun">{</span><span class="pln">
</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="com">//控制字节</span><span class="pln">
</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="com">//控制字节</span><span class="pln">
</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> scriptoffset </span><span class="com">//textdat中显示在选择框上的文字的绝对地址</span><span class="pln">
</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> nextoffset </span><span class="com">//游戏中选择选项后在scenario中下一个script struct的绝对地址</span><span class="pln">
</span><span class="pun">}</span></pre><br><br>解包脚本的大致思路就是在scenario.dat中搜索07 03 00 80和 03 02 01 01然后分别按上面的结构保存相关地址，再到解密后的textdata.bin中导出。<br>py脚本如下：<br><h6 class="quote"><a href="javascript:" onclick="CopyCode(document.getElementById('code3'));" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Copy code</a></h6><pre class="prettyprint" id="code3" style="border-radius:5px;font-family:monaco,consolas,monospace;font-size:12px;overflow-x:auto;line-height:1.4em"><span class="com"># -*- coding:utf-8 -*-</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> </span><span class="kwd">struct</span><span class="pln">


</span><span class="com">#将4字节byte转换成整数</span><span class="pln">
</span><span class="kwd">def</span><span class="pln"> byte2int</span><span class="pun">(</span><span class="kwd">byte</span><span class="pun">):</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;long_tuple</span><span class="pun">=</span><span class="kwd">struct</span><span class="pun">.</span><span class="pln">unpack</span><span class="pun">(</span><span class="str">'L'</span><span class="pun">,</span><span class="kwd">byte</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">long</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> long_tuple</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">long</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> dumpstring</span><span class="pun">(</span><span class="pln">file</span><span class="pun">,</span><span class="pln">offset</span><span class="pun">):</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;file</span><span class="pun">.</span><span class="pln">seek</span><span class="pun">(</span><span class="pln">offset</span><span class="pun">)</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">string</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">''</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;bytestream </span><span class="pun">=</span><span class="pln"> b</span><span class="str">''</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xffffffff</span><span class="pun">):</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">byte</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">read</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char_tuple </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">struct</span><span class="pun">.</span><span class="pln">unpack</span><span class="pun">(</span><span class="str">'B'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">byte</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">char</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> char_tuple</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">:</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">byte</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">read</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char_tuple </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">struct</span><span class="pun">.</span><span class="pln">unpack</span><span class="pun">(</span><span class="str">'B'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">byte</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char2 </span><span class="pun">=</span><span class="pln"> char_tuple</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln"> char2 </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">:</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">string</span><span class="pln"> </span><span class="pun">+=</span><span class="pln"> str</span><span class="pun">(</span><span class="pln">bytestream</span><span class="pun">,</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">'sjis'</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">string</span><span class="pln"> </span><span class="pun">+=</span><span class="pln"> str</span><span class="pun">(</span><span class="pln">b</span><span class="str">'\x81\x9a'</span><span class="pun">,</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">'sjis'</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">break</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">else</span><span class="pun">:</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bytestream </span><span class="pun">+=</span><span class="pln"> </span><span class="kwd">struct</span><span class="pun">.</span><span class="pln">pack</span><span class="pun">(</span><span class="str">'B'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bytestream </span><span class="pun">+=</span><span class="pln"> </span><span class="kwd">struct</span><span class="pun">.</span><span class="pln">pack</span><span class="pun">(</span><span class="str">'B'</span><span class="pun">,</span><span class="pln"> char2</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">else</span><span class="pun">:</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bytestream </span><span class="pun">+=</span><span class="pln"> </span><span class="kwd">struct</span><span class="pun">.</span><span class="pln">pack</span><span class="pun">(</span><span class="str">'B'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">)</span><span class="pln">&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">string</span><span class="pln">


</span><span class="kwd">def</span><span class="pln"> scriptout</span><span class="pun">(</span><span class="pln">file</span><span class="pun">,</span><span class="pln">indexoffset</span><span class="pun">,</span><span class="pln">nameoffset</span><span class="pun">,</span><span class="pln">scriptoffset</span><span class="pun">,</span><span class="pln">count</span><span class="pun">):</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;res </span><span class="pun">=</span><span class="pln"> </span><span class="str">"●%08x●\n"</span><span class="pun">%(</span><span class="pln">indexoffset</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln"> nameoffset </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">:</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name</span><span class="pun">=</span><span class="pln">dumpstring</span><span class="pun">(</span><span class="pln">file</span><span class="pun">,</span><span class="pln">nameoffset</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res </span><span class="pun">+=</span><span class="pln"> </span><span class="str">"◎%08d◎%s\n"</span><span class="pun">%(</span><span class="pln">count</span><span class="pun">,</span><span class="pln"> name</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">else</span><span class="pun">:</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name</span><span class="pun">=</span><span class="str">''</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res </span><span class="pun">+=</span><span class="pln"> </span><span class="str">"◎%08d◎%s\n"</span><span class="pun">%(</span><span class="pln">count</span><span class="pun">,</span><span class="pln"> name</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">string</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> dumpstring</span><span class="pun">(</span><span class="pln">file</span><span class="pun">,</span><span class="pln">scriptoffset</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;res </span><span class="pun">+=</span><span class="pln"> </span><span class="str">"◆%08d◆%s\n\n"</span><span class="pun">%(</span><span class="pln">count</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">return</span><span class="pln"> res
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;


startoffset</span><span class="pun">=[</span><span class="lit">0x469c</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x6c400</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xaed98</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xe7178</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x113964</span><span class="pun">]</span><span class="pln">
endoffset </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">0x6c3c0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xaebdc</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0xe7118</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x113900</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0x147060</span><span class="pun">]</span><span class="pln">

index </span><span class="pun">=</span><span class="pln"> open</span><span class="pun">(</span><span class="str">'scenario.dat'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'rb'</span><span class="pun">)</span><span class="pln">
src </span><span class="pun">=</span><span class="pln"> open</span><span class="pun">(</span><span class="str">'script.bin'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'rb'</span><span class="pun">)</span><span class="pln">&nbsp;&nbsp;

indexoffsetlist</span><span class="pun">=[]</span><span class="pln">
scriptoffsetlist</span><span class="pun">=[]</span><span class="pln">
nameoffsetlist</span><span class="pun">=[]</span><span class="pln">


</span><span class="com">#获取各地址存入相应列表</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="lit">5</span><span class="pun">):</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;index</span><span class="pun">.</span><span class="pln">seek</span><span class="pun">(</span><span class="pln">startoffset</span><span class="pun">[</span><span class="pln">i</span><span class="pun">])</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln"> j </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0xffffffff</span><span class="pun">):</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;long_byte </span><span class="pun">=</span><span class="pln"> index</span><span class="pun">.</span><span class="pln">read</span><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">long</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> byte2int</span><span class="pun">(</span><span class="pln">long_byte</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x80000307</span><span class="pun">:</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;indexoffsetlist</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">index</span><span class="pun">.</span><span class="pln">tell</span><span class="pun">()-</span><span class="lit">4</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;index</span><span class="pun">.</span><span class="pln">seek</span><span class="pun">(</span><span class="pln">index</span><span class="pun">.</span><span class="pln">tell</span><span class="pun">()+</span><span class="lit">4</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nameoffset_byte</span><span class="pun">=</span><span class="pln">index</span><span class="pun">.</span><span class="pln">read</span><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nameoffset</span><span class="pun">=</span><span class="pln">byte2int</span><span class="pun">(</span><span class="pln">nameoffset_byte</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nameoffsetlist</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">nameoffset</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scriptoffset_byte</span><span class="pun">=</span><span class="pln">index</span><span class="pun">.</span><span class="pln">read</span><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scriptoffset</span><span class="pun">=</span><span class="pln">byte2int</span><span class="pun">(</span><span class="pln">scriptoffset_byte</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scriptoffsetlist</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">scriptoffset</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">elif</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0x01010203</span><span class="pun">:</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;indexoffsetlist</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">index</span><span class="pun">.</span><span class="pln">tell</span><span class="pun">()-</span><span class="lit">4</span><span class="pun">)</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nameoffsetlist</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="lit">0</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scriptoffset_byte</span><span class="pun">=</span><span class="pln">index</span><span class="pun">.</span><span class="pln">read</span><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scriptoffset</span><span class="pun">=</span><span class="pln">byte2int</span><span class="pun">(</span><span class="pln">scriptoffset_byte</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scriptoffsetlist</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">scriptoffset</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">else</span><span class="pun">:</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">pass</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln"> index</span><span class="pun">.</span><span class="pln">tell</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> endoffset</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]:</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">break</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class="com">#导出文本</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;size </span><span class="pun">=</span><span class="pln"> len</span><span class="pun">(</span><span class="pln">indexoffsetlist</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;fullname </span><span class="pun">=</span><span class="pln"> </span><span class="str">'script'</span><span class="pun">+</span><span class="pln">str</span><span class="pun">(</span><span class="pln">i</span><span class="pun">)+</span><span class="str">'.txt'</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;dst </span><span class="pun">=</span><span class="pln"> open</span><span class="pun">(</span><span class="pln">fullname</span><span class="pun">,</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">'utf16'</span><span class="pun">,</span><span class="pln"> mode</span><span class="pun">=</span><span class="str">'w'</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln"> k </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln">size</span><span class="pun">):</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">string</span><span class="pun">=</span><span class="pln">scriptout</span><span class="pun">(</span><span class="pln">src</span><span class="pun">,</span><span class="pln">indexoffsetlist</span><span class="pun">[</span><span class="pln">k</span><span class="pun">],</span><span class="pln">nameoffsetlist</span><span class="pun">[</span><span class="pln">k</span><span class="pun">],</span><span class="pln">scriptoffsetlist</span><span class="pun">[</span><span class="pln">k</span><span class="pun">],</span><span class="pln">k</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dst</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="kwd">string</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;dst</span><span class="pun">.</span><span class="pln">close</span><span class="pun">()</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">del</span><span class="pln"> indexoffsetlist</span><span class="pun">[:]</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">del</span><span class="pln"> scriptoffsetlist</span><span class="pun">[:]</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">del</span><span class="pln"> nameoffsetlist</span><span class="pun">[:]</span><span class="pln">

index</span><span class="pun">.</span><span class="pln">close</span><span class="pun">()</span><span class="pln">
src</span><span class="pun">.</span><span class="pln">close</span><span class="pun">()</span><span class="pln"> </span></pre><br>代码根本没追求效率，参考就好…………<br>这样就能克服脚本文件中相同的句子只有一个的毛病了。<br><br>接下来就是重中之重，也是我没能搞定的地方了，那就是如何让游戏显示中文。先在脚本中用GB2312编码改几个字加密后封回去。<br><br>Ctrl+N发现有CreateFontIndirectA函数，还有一处边界检测，兴冲冲的改好之后发现只有选项框里的文本能正常显示中文：<br><span class="highslide"><img src="assets/1570977545-4c708e6c5f672d30fb1f4ec0e1b69cf2.jpg" border="0" style="max-width: 100%;max-height: 800px;"></span><br>其他的地方就没法正常显示（那堆0我之后解释）<br><br>对GetGlypyOutLIneA下断，发现只有游戏要显示选项框的时候才断下，其他的时候根本没用到这API。<br>之后又是一顿跟踪，发现程序显示选项框文字和正式文字用的是两套不同的过程。和能正常显示日文的程序对比，发现这里的跳转不一样：<br><span class="highslide"><img src="assets/1570977545-33a10be141c141ad2a96896e1a60a6c6.jpg" border="0" style="max-width: 100%;max-height: 800px;"></span><br><br>此时内存窗口中的数据看起来是个映射表，按每4个字节依次是&nbsp;&nbsp;编码 地址 编码 地址 。那个循环里把从textdata里读到的编码依次和0x877个日文编码比较<br>遇到相等的就跳到MOV EAX, DWORD PTR[EDX+4]<br>也就是内存窗口对应编码后面的四字节存入eax，GB2312编码肯定没一个相等，所以跳到较上面的xor eax，eax清零，结果就是文字框什么都不显示。<br>上面那堆0000000是我把JE修改成JMP的结果，每次它只记录824f（sjis里是0）后的指针，所以全是0……跟到指针所指的位置发现是一个文件<br>在游戏目录graphic.dat里，名为fontdata.23，其实graphic.dat里有好几个类似的文件：<br><span class="highslide"><img src="assets/1570977545-73396ac3a0b465308d3050fc19a6720d.jpg" border="0" style="max-width: 100%;max-height: 800px;"></span><br>所以到了这里就不明白了，GetGlyphOutlineA没断下说明什么呢？这是游戏调用自带的字库吗？这个↓看起来像是字库吗？要怎么修改才能让它调用系统字库呢？新人对这方面还不是很了解的说……<br>还望各前辈指点一二……如果能解决我会继续更新此贴<br><br>想到一种方法，就是把剧本文字的显示过程修改成和选项文本一样的。因为选项文本是调用系统字库通过GetGlyphOutline来完成一系列显示，原理比较简单。<br>可是苦于找不到接口……啊啊，要跪的节奏……看了一楼菊苣通过d3d9 draw text的方法，甚是佩服，不过渣新估计很难做到……<br><br>哪位前辈能告诉在下游戏GetGlyphOutline之后是通过什么途径或者什么API读取字体信息最终显示到屏幕上的呢？<br><br><br>哦卧了个槽，有些思路了：<br><span class="highslide"><img src="assets/1570977545-f31b3b5700d603e12559d041cf00f294.jpg" border="0" style="max-width: 100%;max-height: 800px;"></span><br>不知各位能否看出这是一堆“跳”字呢？（把头左偏45度）（WC澄空就不能附件插图么……）<br>其实这游戏并不是用自己的字库，fontdata.23里存放的是GetGlyphOutline的输出缓冲（或者稍作修改），实际上还是从系统ttf字库里取字模。<br><br>选项文本直接调用GetGlyphOutline得到字体信息<br>剧情文本直接读取已经保存成文件的GetGlyphOutline输出信息<br><br>然后分别做不同的处理，最终调用相同的d3d9函数得到输出。<br><br>目前渣渣正在研究这个过程，希望最终能修改成功……<br><br><br>图片部分还没着手研究，不过有汉公Crass里的相关源码，分析起来应该会省力多了。<br><br>附件里是文中提到的解密脚本和<span style="text-decoration: line-through;">疑似字库的fontdata.23</span><br> <a href="https://bbs.sumisora.net/job.php?action=download&amp;pid=tpc&amp;tid=11051522&amp;aid=21267" target="_blank" title="文件大小:387 K
下载次数:24" referrerpolicy="no-referrer" rel="noopener noreferrer">fxck.rar</a><div id="alert_tpc" style="color: gray; margin-top: 30px; --darkreader-inline-color:#bfb9ac;" data-darkreader-inline-color="">[ 此帖被bingkan在2013-08-07 17:16重新编辑 ]</div></div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_tpc" class="c"></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2013-08-06 02:15 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 楼主(bingkan) 的帖子');" data-mx-warn="Empty URL">[楼 主]</a></span>

		</div></th>
	</tr></tbody></table>
</div>

<a name="5765580" data-mx-warn="Empty URL"></a>
<div class="t t2"><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570977545-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>201724</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=822973" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570977545-c39d29f7268c7401c6f2efae70cc5e9b.jpeg" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_1"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">澄空新生</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570977545-be59bc9a4edb96b6b54ba67c9267b93f.gif"><br>

<span class="user-info2" id="showface_1">
<span class="user-infoWrap2">


精华:

		<span class="s4">0</span>
<br>
发帖: <span class="s1 f9">31</span><br>
学分: <span class="s2 f9">0 点</span><br>
澄空币: <span class="s3 f9">646 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2012-08-26<br>
		最后登录:2017-06-02 <br><br> 
		</span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_5765580" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=11051522&amp;pid=5765580&amp;article=1" onclick="return sendurl(this,4,event)" id="quote_5765580" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=11051522&amp;pid=5765580&amp;article=1" id="modify_5765580" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=822973" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=11051522&amp;pid=5765580" onclick="return sendurl(this,8)" id="report_5765580" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=11051522&amp;uid=822973" title="只看该作者的所有回复" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('5765580')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_5765580" class="fl">&nbsp;</h1>
			

			<div id="p_5765580" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_5765580">那个好像以前搞过 恩恩。。。<br><br><br>看这个游戏的汉化代码:<br>夏の終わりのニルヴァーナ<br><br><br>我比较懒<br><br>提取文本代码<br><h6 class="quote"><a href="javascript:" onclick="CopyCode(document.getElementById('code4'));" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Copy code</a></h6><pre class="prettyprint" id="code4" style="border-radius:5px;font-family:monaco,consolas,monospace;font-size:12px;overflow-x:auto;line-height:1.4em"><span class="kwd">bool</span><span class="pln"> </span><span class="typ">CDataStream</span><span class="pun">::</span><span class="typ">AnalyaisData</span><span class="pun">(</span><span class="pln">PBYTE </span><span class="typ">IndexData</span><span class="pun">,</span><span class="pln">DWORD </span><span class="typ">IndexSize</span><span class="pun">,</span><span class="pln">PBYTE </span><span class="typ">StringData</span><span class="pun">,</span><span class="pln">DWORD </span><span class="typ">StringSize</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">bool</span><span class="pln"> retstatus </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//PDWORD IndexListStart = (PDWORD)IndexData;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//DWORD IndexCount = IndexSize / 4; //4字节对齐</span><span class="pln">


&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">try</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pun">(</span><span class="pln">DWORD i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&lt;</span><span class="typ">IndexSize</span><span class="pun">;</span><span class="pln">i</span><span class="pun">++)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DWORD </span><span class="typ">CodeData</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*(</span><span class="pln">DWORD</span><span class="pun">*)&amp;</span><span class="typ">IndexData</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PDWORD </span><span class="typ">IndexListStart</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">PDWORD</span><span class="pun">)&amp;</span><span class="typ">IndexData</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//analysis opcode index</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">switch</span><span class="pun">(</span><span class="typ">CodeData</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">case</span><span class="pln"> </span><span class="lit">0x06010104</span><span class="pun">:</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//i++; //pass unknown value</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pun">(</span><span class="typ">IndexListStart</span><span class="pun">[</span><span class="lit">1</span><span class="pun">])</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">InsertAndConvTitle</span><span class="pun">(</span><span class="typ">StringData</span><span class="pun">,</span><span class="typ">IndexData</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="pln">DWORD</span><span class="pun">)&amp;</span><span class="typ">IndexListStart</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="pln">DWORD</span><span class="pun">)</span><span class="typ">IndexData</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//i++; //pass unknown value</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//i++; //pass unknown value</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pun">(</span><span class="typ">IndexListStart</span><span class="pun">[</span><span class="lit">3</span><span class="pun">])</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">InsertAndConvData</span><span class="pun">(</span><span class="typ">StringData</span><span class="pun">,</span><span class="typ">IndexData</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="pln">DWORD</span><span class="pun">)&amp;</span><span class="typ">IndexListStart</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="pln">DWORD</span><span class="pun">)</span><span class="typ">IndexData</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">break</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">case</span><span class="pln"> </span><span class="lit">0x80000307</span><span class="pun">:</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//i++; //pass unknown value</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//i++; //redirect to text names</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//解析说话人的名字</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pun">(</span><span class="typ">IndexListStart</span><span class="pun">[</span><span class="lit">2</span><span class="pun">])</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">InsertAndConvTitle</span><span class="pun">(</span><span class="typ">StringData</span><span class="pun">,</span><span class="typ">IndexData</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="pln">DWORD</span><span class="pun">)&amp;</span><span class="typ">IndexListStart</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="pln">DWORD</span><span class="pun">)</span><span class="typ">IndexData</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//解析文本内容</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//i++;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pun">(</span><span class="typ">IndexListStart</span><span class="pun">[</span><span class="lit">3</span><span class="pun">])</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">InsertAndConvData</span><span class="pun">(</span><span class="typ">StringData</span><span class="pun">,</span><span class="typ">IndexData</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="pln">DWORD</span><span class="pun">)&amp;</span><span class="typ">IndexListStart</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="pln">DWORD</span><span class="pun">)</span><span class="typ">IndexData</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">break</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">case</span><span class="pln"> </span><span class="lit">0x80000406</span><span class="pun">:</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//i += 3;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//解析文本内容</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pun">(</span><span class="typ">IndexListStart</span><span class="pun">[</span><span class="lit">3</span><span class="pun">])</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">InsertAndConvData</span><span class="pun">(</span><span class="typ">StringData</span><span class="pun">,</span><span class="typ">IndexData</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="pln">DWORD</span><span class="pun">)&amp;</span><span class="typ">IndexListStart</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="pln">DWORD</span><span class="pun">)</span><span class="typ">IndexData</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">break</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">case</span><span class="pln"> </span><span class="lit">0x01002803</span><span class="pun">:</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">case</span><span class="pln"> </span><span class="lit">0x03000303</span><span class="pun">:</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//i += 2; //定位到string</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pun">(</span><span class="typ">IndexListStart</span><span class="pun">[</span><span class="lit">2</span><span class="pun">])</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">InsertAndConvData</span><span class="pun">(</span><span class="typ">StringData</span><span class="pun">,</span><span class="typ">IndexData</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="pln">DWORD</span><span class="pun">)&amp;</span><span class="typ">IndexListStart</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="pln">DWORD</span><span class="pun">)</span><span class="typ">IndexData</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">break</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="kwd">catch</span><span class="pun">(...){};</span><span class="pln">


&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">FormatToEditList</span><span class="pun">();</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">return</span><span class="pln"> retstatus</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">bool</span><span class="pln"> </span><span class="typ">CDataStream</span><span class="pun">::</span><span class="typ">ReadStreamForData</span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> pszFileName</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="typ">IndexFileSign</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"PJADV_SF0001"</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//static char* IndexFileSign = "PJADV_SF0001";</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;HANDLE hFile</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD nReadSize</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> szTextDataFilePath</span><span class="pun">[</span><span class="pln">MAX_PATH</span><span class="pun">];</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">int</span><span class="pln"> nPathLen</span><span class="pun">;</span><span class="pln">


&nbsp;&nbsp;&nbsp;&nbsp;PBYTE pIndexData</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;PBYTE pTextData</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD nIndexSize</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD nTextDataSize</span><span class="pun">;</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">bool</span><span class="pln"> retstatus </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;hFile </span><span class="pun">=</span><span class="pln"> </span><span class="typ">CreateFileA</span><span class="pun">(</span><span class="pln">pszFileName</span><span class="pun">,</span><span class="pln">GENERIC_READ</span><span class="pun">,</span><span class="pln">FILE_SHARE_READ</span><span class="pun">|</span><span class="pln">FILE_SHARE_WRITE</span><span class="pun">,</span><span class="pln">NULL</span><span class="pun">,</span><span class="pln">OPEN_EXISTING</span><span class="pun">,</span><span class="pln">FILE_ATTRIBUTE_NORMAL</span><span class="pun">,</span><span class="pln">NULL</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">hFile </span><span class="pun">!=</span><span class="pln"> INVALID_HANDLE_VALUE</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nIndexSize </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetFileSize</span><span class="pun">(</span><span class="pln">hFile</span><span class="pun">,&amp;</span><span class="pln">nIndexSize</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pIndexData </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> BYTE</span><span class="pun">[</span><span class="pln">nIndexSize</span><span class="pun">];</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pun">(</span><span class="typ">ReadFile</span><span class="pun">(</span><span class="pln">hFile</span><span class="pun">,(</span><span class="pln">LPVOID</span><span class="pun">)</span><span class="pln">pIndexData</span><span class="pun">,</span><span class="pln">nIndexSize</span><span class="pun">,&amp;</span><span class="pln">nReadSize</span><span class="pun">,</span><span class="pln">NULL</span><span class="pun">))</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">CloseHandle</span><span class="pun">(</span><span class="pln">hFile</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">memcmp</span><span class="pun">(</span><span class="pln">pIndexData</span><span class="pun">,</span><span class="typ">IndexFileSign</span><span class="pun">,</span><span class="pln">strlen</span><span class="pun">(</span><span class="typ">IndexFileSign</span><span class="pun">))!=</span><span class="lit">0</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">delete</span><span class="pln"> pIndexData</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strcpy</span><span class="pun">(</span><span class="pln">szTextDataFilePath</span><span class="pun">,</span><span class="pln">pszFileName</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nPathLen </span><span class="pun">=</span><span class="pln"> strlen</span><span class="pun">(</span><span class="pln">szTextDataFilePath</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="pln">nPathLen</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&gt;=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">i</span><span class="pun">--)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">szTextDataFilePath</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'\\'</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;szTextDataFilePath</span><span class="pun">[</span><span class="pln">i</span><span class="pun">+</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">break</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strcat</span><span class="pun">(</span><span class="pln">szTextDataFilePath</span><span class="pun">,</span><span class="str">"textdata.bin"</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hFile </span><span class="pun">=</span><span class="pln"> </span><span class="typ">CreateFileA</span><span class="pun">(</span><span class="pln">szTextDataFilePath</span><span class="pun">,</span><span class="pln">GENERIC_READ</span><span class="pun">,</span><span class="pln">FILE_SHARE_READ</span><span class="pun">|</span><span class="pln">FILE_SHARE_WRITE</span><span class="pun">,</span><span class="pln">NULL</span><span class="pun">,</span><span class="pln">OPEN_EXISTING</span><span class="pun">,</span><span class="pln">FILE_ATTRIBUTE_NORMAL</span><span class="pun">,</span><span class="pln">NULL</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">hFile </span><span class="pun">!=</span><span class="pln"> INVALID_HANDLE_VALUE</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nTextDataSize </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetFileSize</span><span class="pun">(</span><span class="pln">hFile</span><span class="pun">,&amp;</span><span class="pln">nTextDataSize</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pTextData </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> BYTE</span><span class="pun">[</span><span class="pln">nTextDataSize</span><span class="pun">];</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pun">(</span><span class="typ">ReadFile</span><span class="pun">(</span><span class="pln">hFile</span><span class="pun">,(</span><span class="pln">LPVOID</span><span class="pun">)</span><span class="pln">pTextData</span><span class="pun">,</span><span class="pln">nTextDataSize</span><span class="pun">,&amp;</span><span class="pln">nReadSize</span><span class="pun">,</span><span class="pln">NULL</span><span class="pun">))</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">CloseHandle</span><span class="pun">(</span><span class="pln">hFile</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retstatus </span><span class="pun">=</span><span class="pln"> </span><span class="typ">AnalyaisData</span><span class="pun">(</span><span class="pln">pIndexData</span><span class="pun">,</span><span class="pln">nIndexSize</span><span class="pun">,</span><span class="pln">pTextData</span><span class="pun">,</span><span class="pln">nTextDataSize</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">else</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">CloseHandle</span><span class="pun">(</span><span class="pln">hFile</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">else</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">delete</span><span class="pln"> pIndexData</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">else</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">CloseHandle</span><span class="pun">(</span><span class="pln">hFile</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">delete</span><span class="pln"> pIndexData</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">return</span><span class="pln"> retstatus</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span></pre><br><b><font size="5">汉化代码</font></b><br><br><h6 class="quote"><a href="javascript:" onclick="CopyCode(document.getElementById('code5'));" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Copy code</a></h6><pre class="prettyprint" id="code5" style="border-radius:5px;font-family:monaco,consolas,monospace;font-size:12px;overflow-x:auto;line-height:1.4em"><span class="com">#include</span><span class="pln"> </span><span class="str">"stdafx.h"</span><span class="pln">
</span><span class="com">#include</span><span class="pln"> </span><span class="str">"detours.h"</span><span class="pln">
</span><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;d3d9.h&gt;</span><span class="pln">
</span><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;d3dx9core.h&gt;</span><span class="pln">
</span><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;vector&gt;</span><span class="pln">
</span><span class="com">#include</span><span class="pln"> </span><span class="str">"FileStream.h"</span><span class="pln">
</span><span class="kwd">using</span><span class="pln"> </span><span class="kwd">namespace</span><span class="pln"> std</span><span class="pun">;</span><span class="pln">
LPD3DXFONT g_pFont</span><span class="pun">;</span><span class="pln">
</span><span class="typ">CFileStream</span><span class="pln"> fileStream</span><span class="pun">;</span><span class="pln">
LPDIRECT3DDEVICE9 pDevice</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">typedef</span><span class="pln"> </span><span class="kwd">struct</span><span class="pln"> draw_str_s
</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD unk</span><span class="pun">;</span><span class="pln">&nbsp;&nbsp;</span><span class="com">//0</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD unk2</span><span class="pun">;</span><span class="pln"> </span><span class="com">//4</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD unk3</span><span class="pun">;</span><span class="pln"> </span><span class="com">//8</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD unk4</span><span class="pun">;</span><span class="pln"> </span><span class="com">//c</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD unk5</span><span class="pun">;</span><span class="pln"> </span><span class="com">//10</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD unk6</span><span class="pun">;</span><span class="pln"> </span><span class="com">//14</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD unk7</span><span class="pun">;</span><span class="pln"> </span><span class="com">//18</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD unk8</span><span class="pun">;</span><span class="pln"> </span><span class="com">//1C</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD unk9</span><span class="pun">;</span><span class="pln"> </span><span class="com">//20</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD solid_rgba</span><span class="pun">[</span><span class="lit">4</span><span class="pun">];</span><span class="pln"> </span><span class="com">//24 28 2C</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD rgba</span><span class="pun">[</span><span class="lit">4</span><span class="pun">];</span><span class="pln"> </span><span class="com">//34 38 3c 40</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD pstring</span><span class="pun">;</span><span class="pln"> </span><span class="com">//44</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD unk11</span><span class="pun">;</span><span class="pln"> </span><span class="com">//48</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">float</span><span class="pln"> width</span><span class="pun">;</span><span class="com">//4C 文字间隔</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//可能是坐标</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD height</span><span class="pun">;</span><span class="pln"> </span><span class="com">//50Height partition</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD x</span><span class="pun">;</span><span class="pln"> </span><span class="com">//54</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD y</span><span class="pun">;</span><span class="pln"> </span><span class="com">//58</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD unk15</span><span class="pun">;</span><span class="pln"> </span><span class="com">//5C</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD unk16</span><span class="pun">;</span><span class="pln"> </span><span class="com">//60</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD fontsize</span><span class="pun">;</span><span class="pln"> </span><span class="com">//64</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD unk18</span><span class="pun">;</span><span class="pln"> </span><span class="com">//68</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD unk19</span><span class="pun">;</span><span class="pln"> </span><span class="com">//6C</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD unk20</span><span class="pun">;</span><span class="pln"> </span><span class="com">//70</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD unk24</span><span class="pun">;</span><span class="pln"> </span><span class="com">//74</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD unk25</span><span class="pun">;</span><span class="pln"> </span><span class="com">//78</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD unk26</span><span class="pun">;</span><span class="pln"> </span><span class="com">//7C - pointer</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD unk27</span><span class="pun">;</span><span class="pln"> </span><span class="com">//80 - pointer</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD unk28</span><span class="pun">;</span><span class="pln"> </span><span class="com">//84</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD unk29</span><span class="pun">;</span><span class="pln"> </span><span class="com">//88</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD unk30</span><span class="pun">;</span><span class="pln"> </span><span class="com">//8c</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD unk31</span><span class="pun">;</span><span class="pln"> </span><span class="com">//90 - pointer</span><span class="pln">
</span><span class="pun">}</span><span class="typ">draw_str_t</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> </span><span class="typ">SetNopCode</span><span class="pun">(</span><span class="pln">BYTE</span><span class="pun">*</span><span class="pln"> pnop</span><span class="pun">,</span><span class="typ">size_t</span><span class="pln"> size</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD oldProtect</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">VirtualProtect</span><span class="pun">((</span><span class="pln">PVOID</span><span class="pun">)</span><span class="pln">pnop</span><span class="pun">,</span><span class="pln">size</span><span class="pun">,</span><span class="pln">PAGE_EXECUTE_READWRITE</span><span class="pun">,&amp;</span><span class="pln">oldProtect</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pun">(</span><span class="typ">size_t</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&lt;</span><span class="pln">size</span><span class="pun">;</span><span class="pln">i</span><span class="pun">++)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pnop</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0x90</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">bool</span><span class="pln"> </span><span class="typ">CovtShiftJISToGB</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="typ">JISStr</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="typ">GBBuf</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> nSize</span><span class="pun">)</span><span class="pln"> 
</span><span class="pun">{</span><span class="pln"> 
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">static</span><span class="pln"> </span><span class="typ">wchar_t</span><span class="pln"> wbuf</span><span class="pun">[</span><span class="lit">2048</span><span class="pun">];</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">int</span><span class="pln"> nLen</span><span class="pun">;</span><span class="pln"> 

&nbsp;&nbsp;&nbsp;&nbsp;nLen </span><span class="pun">=</span><span class="pln"> strlen</span><span class="pun">(</span><span class="typ">JISStr</span><span class="pun">)+</span><span class="lit">1</span><span class="pun">;</span><span class="pln"> 
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//if (wbuf==NULL) return false; </span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;nLen </span><span class="pun">=</span><span class="pln"> </span><span class="typ">MultiByteToWideChar</span><span class="pun">(</span><span class="lit">932</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="typ">JISStr</span><span class="pun">,</span><span class="pln"> 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nLen</span><span class="pun">,</span><span class="pln"> wbuf</span><span class="pun">,</span><span class="pln"> nLen</span><span class="pun">);</span><span class="pln"> 
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">nLen </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nLen </span><span class="pun">=</span><span class="pln"> </span><span class="typ">WideCharToMultiByte</span><span class="pun">(</span><span class="lit">936</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> wbuf</span><span class="pun">,</span><span class="pln"> 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nLen</span><span class="pun">,</span><span class="pln"> </span><span class="typ">GBBuf</span><span class="pun">,</span><span class="pln"> nSize</span><span class="pun">,</span><span class="pln"> NULL</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="pln"> 
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">return</span><span class="pln"> nLen</span><span class="pun">!=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> 
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> </span><span class="typ">CovtGBTOJIS</span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="typ">GBBuf</span><span class="pln"> </span><span class="pun">,</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="typ">JISStr</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> nSize</span><span class="pun">)</span><span class="pln"> 
</span><span class="pun">{</span><span class="pln"> 
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">static</span><span class="pln"> </span><span class="typ">wchar_t</span><span class="pln"> wbuf</span><span class="pun">[</span><span class="lit">2048</span><span class="pun">];</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">int</span><span class="pln"> nLen</span><span class="pun">;</span><span class="pln"> 

&nbsp;&nbsp;&nbsp;&nbsp;nLen </span><span class="pun">=</span><span class="pln"> strlen</span><span class="pun">(</span><span class="typ">GBBuf</span><span class="pun">)+</span><span class="lit">1</span><span class="pun">;</span><span class="pln"> 
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">wbuf</span><span class="pun">==</span><span class="pln">NULL</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln"> 
&nbsp;&nbsp;&nbsp;&nbsp;nLen </span><span class="pun">=</span><span class="pln"> </span><span class="typ">MultiByteToWideChar</span><span class="pun">(</span><span class="lit">936</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="typ">GBBuf</span><span class="pun">,</span><span class="pln"> 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nLen</span><span class="pun">,</span><span class="pln"> wbuf</span><span class="pun">,</span><span class="pln"> nLen</span><span class="pun">);</span><span class="pln"> 
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">nLen </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nLen </span><span class="pun">=</span><span class="pln"> </span><span class="typ">WideCharToMultiByte</span><span class="pun">(</span><span class="lit">932</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> wbuf</span><span class="pun">,</span><span class="pln"> 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nLen</span><span class="pun">,</span><span class="pln"> </span><span class="typ">JISStr</span><span class="pun">,</span><span class="pln"> nSize</span><span class="pun">,</span><span class="pln"> NULL</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="pln"> 
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">return</span><span class="pln"> nLen</span><span class="pun">;</span><span class="pln"> 
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">typedef</span><span class="pln"> HRESULT </span><span class="pun">(</span><span class="pln">WINAPI </span><span class="pun">*</span><span class="pln"> fnCreateDevice</span><span class="pun">)(</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;LPDIRECT3D9 pDx9</span><span class="pun">,</span><span class="pln">UINT </span><span class="typ">Adapter</span><span class="pun">,</span><span class="pln">D3DDEVTYPE </span><span class="typ">DeviceType</span><span class="pun">,</span><span class="pln">HWND hFocusWindow</span><span class="pun">,</span><span class="pln">DWORD </span><span class="typ">BehaviorFlags</span><span class="pun">,</span><span class="pln">D3DPRESENT_PARAMETERS</span><span class="pun">*</span><span class="pln"> pPresentationParameters</span><span class="pun">,</span><span class="typ">IDirect3DDevice9</span><span class="pun">**</span><span class="pln"> ppReturnedDeviceInterface
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">);</span><span class="pln">
fnCreateDevice pCreateDevice</span><span class="pun">;</span><span class="pln">
ID3DXSprite</span><span class="pun">*</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g_pTextSprite </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span><span class="pln">&nbsp;&nbsp; </span><span class="com">// Sprite for batching draw text calls</span><span class="pln">
HRESULT WINAPI newCreateDevice</span><span class="pun">(</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;LPDIRECT3D9 pDx9</span><span class="pun">,</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;UINT </span><span class="typ">Adapter</span><span class="pun">,</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;D3DDEVTYPE </span><span class="typ">DeviceType</span><span class="pun">,</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;HWND hFocusWindow</span><span class="pun">,</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD </span><span class="typ">BehaviorFlags</span><span class="pun">,</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;D3DPRESENT_PARAMETERS</span><span class="pun">*</span><span class="pln"> pPresentationParameters</span><span class="pun">,</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">IDirect3DDevice9</span><span class="pun">**</span><span class="pln"> ppReturnedDeviceInterface
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="com">//D3D_OK</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;HRESULT status </span><span class="pun">=</span><span class="pln">&nbsp;&nbsp;pCreateDevice</span><span class="pun">(</span><span class="pln">pDx9</span><span class="pun">,</span><span class="typ">Adapter</span><span class="pun">,</span><span class="typ">DeviceType</span><span class="pun">,</span><span class="pln">hFocusWindow</span><span class="pun">,</span><span class="typ">BehaviorFlags</span><span class="pun">,</span><span class="pln">pPresentationParameters</span><span class="pun">,</span><span class="pln">ppReturnedDeviceInterface</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">status</span><span class="pun">==</span><span class="pln">D3D_OK</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pDevice</span><span class="pun">=*</span><span class="pln">ppReturnedDeviceInterface</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3DXCreateFont</span><span class="pun">(</span><span class="pln"> pDevice</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">28</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> FW_BOLD</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> FALSE</span><span class="pun">,</span><span class="pln"> DEFAULT_CHARSET</span><span class="pun">,</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OUT_DEFAULT_PRECIS</span><span class="pun">,</span><span class="pln"> DEFAULT_QUALITY</span><span class="pun">,</span><span class="pln"> DEFAULT_PITCH </span><span class="pun">|</span><span class="pln"> FF_DONTCARE</span><span class="pun">,</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;L</span><span class="str">"宋体"</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">g_pFont </span><span class="pun">);</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D3DXCreateSprite</span><span class="pun">(</span><span class="pln"> pDevice</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">g_pTextSprite </span><span class="pun">);</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">return</span><span class="pln"> status</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">void</span><span class="pun">*</span><span class="pln"> pDrawHistoryHook1 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">void</span><span class="pun">*)</span><span class="lit">0x0046A030</span><span class="pun">;</span><span class="pln">
__declspec</span><span class="pun">(</span><span class="pln">naked</span><span class="pun">)</span><span class="kwd">void</span><span class="pln"> </span><span class="typ">_DrawHistoryHook1</span><span class="pun">()</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;__asm
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov&nbsp;&nbsp;&nbsp;&nbsp; eax</span><span class="pun">,</span><span class="pln"> dword ptr </span><span class="pun">[</span><span class="pln">esp</span><span class="pun">+</span><span class="lit">0x14</span><span class="pun">]</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov&nbsp;&nbsp;&nbsp;&nbsp; dl</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">byte</span><span class="pln"> ptr </span><span class="pun">[</span><span class="pln">eax</span><span class="pun">+</span><span class="lit">1</span><span class="pun">]</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test&nbsp;&nbsp;&nbsp;&nbsp;dl</span><span class="pun">,</span><span class="pln"> dl
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jmp pDrawHistoryHook1
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">void</span><span class="pun">*</span><span class="pln"> pDrawHistoryHook2 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">void</span><span class="pun">*)</span><span class="lit">0x0046A3E0</span><span class="pun">;</span><span class="pln">
__declspec</span><span class="pun">(</span><span class="pln">naked</span><span class="pun">)</span><span class="kwd">void</span><span class="pln"> </span><span class="typ">_DrawHistoryHook2</span><span class="pun">()</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;__asm
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov&nbsp;&nbsp;&nbsp;&nbsp; eax</span><span class="pun">,</span><span class="pln"> dword ptr </span><span class="pun">[</span><span class="pln">esp</span><span class="pun">+</span><span class="lit">0x14</span><span class="pun">]</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov&nbsp;&nbsp;&nbsp;&nbsp; dl</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">byte</span><span class="pln"> ptr </span><span class="pun">[</span><span class="pln">eax</span><span class="pun">+</span><span class="lit">1</span><span class="pun">]</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test&nbsp;&nbsp;&nbsp;&nbsp;dl</span><span class="pun">,</span><span class="pln"> dl
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jmp pDrawHistoryHook2
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> memcopy</span><span class="pun">(</span><span class="kwd">void</span><span class="pun">*</span><span class="pln"> dest</span><span class="pun">,</span><span class="kwd">void</span><span class="pun">*</span><span class="pln">src</span><span class="pun">,</span><span class="typ">size_t</span><span class="pln"> size</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD oldProtect</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">VirtualProtect</span><span class="pun">(</span><span class="pln">dest</span><span class="pun">,</span><span class="pln">size</span><span class="pun">,</span><span class="pln">PAGE_EXECUTE_READWRITE</span><span class="pun">,&amp;</span><span class="pln">oldProtect</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;memcpy</span><span class="pun">(</span><span class="pln">dest</span><span class="pun">,</span><span class="pln">src</span><span class="pun">,</span><span class="pln">size</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> </span><span class="typ">InstallPatch</span><span class="pun">()</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD oldProtect</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">VirtualProtect</span><span class="pun">((</span><span class="pln">PVOID</span><span class="pun">)</span><span class="lit">0x00469530</span><span class="pun">,</span><span class="lit">0x2000</span><span class="pun">,</span><span class="pln">PAGE_EXECUTE_READWRITE</span><span class="pun">,&amp;</span><span class="pln">oldProtect</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;BYTE nPatch1</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xEB</span><span class="pun">,</span><span class="lit">0x24</span><span class="pun">};</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;BYTE nPatch2</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xE9</span><span class="pun">,</span><span class="lit">0x0B</span><span class="pun">,</span><span class="lit">0x02</span><span class="pun">,</span><span class="lit">0x00</span><span class="pun">,</span><span class="lit">0x00</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x66</span><span class="pun">,</span><span class="lit">0x8B</span><span class="pun">,</span><span class="lit">0x1E</span><span class="pun">,</span><span class="lit">0x66</span><span class="pun">,</span><span class="lit">0x85</span><span class="pun">,</span><span class="lit">0xDB</span><span class="pun">,</span><span class="lit">0xEB</span><span class="pun">,</span><span class="lit">0x73</span><span class="pun">,</span><span class="lit">0x66</span><span class="pun">,</span><span class="lit">0x8B</span><span class="pun">,</span><span class="lit">0x1E</span><span class="pun">,</span><span class="lit">0x66</span><span class="pun">,</span><span class="lit">0x85</span><span class="pun">,</span><span class="lit">0xDB</span><span class="pun">,</span><span class="lit">0xEB</span><span class="pun">,</span><span class="lit">0xD6</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">};</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;BYTE nPatch3</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xEB</span><span class="pun">,</span><span class="lit">0x87</span><span class="pun">};</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;BYTE nPatch4</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">};</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;BYTE nPatch5</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0xB8</span><span class="pun">,</span><span class="lit">0x01</span><span class="pun">,</span><span class="lit">0x00</span><span class="pun">,</span><span class="lit">0x00</span><span class="pun">,</span><span class="lit">0x00</span><span class="pun">,</span><span class="lit">0x90</span><span class="pun">};</span><span class="pln">


&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;memcopy</span><span class="pun">((</span><span class="kwd">void</span><span class="pun">*)</span><span class="lit">0x0046957E</span><span class="pun">,</span><span class="pln">nPatch1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">);</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;memcopy</span><span class="pun">((</span><span class="kwd">void</span><span class="pun">*)</span><span class="lit">0x00469593</span><span class="pun">,</span><span class="pln">nPatch2</span><span class="pun">,</span><span class="kwd">sizeof</span><span class="pun">(</span><span class="pln">nPatch2</span><span class="pun">));</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;memcopy</span><span class="pun">((</span><span class="kwd">void</span><span class="pun">*)</span><span class="lit">0x00469613</span><span class="pun">,</span><span class="pln">nPatch3</span><span class="pun">,</span><span class="kwd">sizeof</span><span class="pun">(</span><span class="pln">nPatch3</span><span class="pun">));</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;memcopy</span><span class="pun">((</span><span class="kwd">void</span><span class="pun">*)</span><span class="lit">0x004697A3</span><span class="pun">,</span><span class="pln">nPatch4</span><span class="pun">,</span><span class="kwd">sizeof</span><span class="pun">(</span><span class="pln">nPatch4</span><span class="pun">));</span><span class="pln">


&nbsp;&nbsp;&nbsp;&nbsp;memcopy</span><span class="pun">((</span><span class="kwd">void</span><span class="pun">*)</span><span class="lit">0x0046A403</span><span class="pun">,</span><span class="pln">nPatch5</span><span class="pun">,</span><span class="kwd">sizeof</span><span class="pun">(</span><span class="pln">nPatch5</span><span class="pun">));</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;memcopy</span><span class="pun">((</span><span class="kwd">void</span><span class="pun">*)</span><span class="lit">0x0046A042</span><span class="pun">,</span><span class="pln">nPatch5</span><span class="pun">,</span><span class="lit">5</span><span class="pun">);</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">SetNopCode</span><span class="pun">((</span><span class="pln">PBYTE</span><span class="pun">)</span><span class="pln">pDrawHistoryHook1</span><span class="pun">,</span><span class="lit">8</span><span class="pun">);</span><span class="pln">


&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//SetNopCode((PBYTE)0x0046A041,6);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//SetNopCode((PBYTE)0x0046A054,6);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//SetNopCode((PBYTE)0x0046A04A,3);</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">SetNopCode</span><span class="pun">((</span><span class="pln">PBYTE</span><span class="pun">)</span><span class="pln">pDrawHistoryHook2</span><span class="pun">,</span><span class="lit">8</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//SetNopCode((PBYTE)0x0046A3F1,1);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//SetNopCode((PBYTE)0x0046A3F9,8);</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//SetNopCode((PBYTE)0x0046A403,6);</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">////</span><span class="pln">


&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DetourTransactionBegin</span><span class="pun">();</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DetourUpdateThread</span><span class="pun">(</span><span class="typ">GetCurrentThread</span><span class="pun">());</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DetourAttach</span><span class="pun">((</span><span class="kwd">void</span><span class="pun">**)&amp;</span><span class="pln">pDrawHistoryHook1</span><span class="pun">,</span><span class="typ">_DrawHistoryHook1</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DetourTransactionCommit</span><span class="pun">();</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DetourTransactionBegin</span><span class="pun">();</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DetourUpdateThread</span><span class="pun">(</span><span class="typ">GetCurrentThread</span><span class="pun">());</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DetourAttach</span><span class="pun">((</span><span class="kwd">void</span><span class="pun">**)&amp;</span><span class="pln">pDrawHistoryHook2</span><span class="pun">,</span><span class="typ">_DrawHistoryHook2</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DetourTransactionCommit</span><span class="pun">();</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//0046A041</span><span class="pln">


</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> WINAPI </span><span class="typ">DrawChar</span><span class="pun">(</span><span class="typ">wchar_t</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">,</span><span class="pln">BYTE</span><span class="pun">*</span><span class="pln">color</span><span class="pun">,</span><span class="pln">RECT inrect</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;RECT rct</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">SetRect</span><span class="pun">(&amp;</span><span class="pln">rct</span><span class="pun">,</span><span class="pln"> inrect</span><span class="pun">.</span><span class="pln">left</span><span class="pun">,</span><span class="pln">inrect</span><span class="pun">.</span><span class="pln">top</span><span class="pun">,</span><span class="pln"> inrect</span><span class="pun">.</span><span class="pln">right</span><span class="pun">,</span><span class="pln"> inrect</span><span class="pun">.</span><span class="pln">bottom</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;g_pFont</span><span class="pun">-&gt;</span><span class="typ">DrawTextW</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">,</span><span class="kwd">string</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">rct</span><span class="pun">,</span><span class="pln"> DT_LEFT </span><span class="pun">|</span><span class="pln"> DT_NOCLIP</span><span class="pun">,</span><span class="pln"> D3DCOLOR_ARGB</span><span class="pun">(</span><span class="pln">color</span><span class="pun">[</span><span class="lit">4</span><span class="pun">],</span><span class="pln"> color</span><span class="pun">[</span><span class="lit">3</span><span class="pun">],</span><span class="pln"> color</span><span class="pun">[</span><span class="lit">2</span><span class="pun">],</span><span class="pln"> color</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]));</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">typedef</span><span class="pln"> DWORD </span><span class="pun">(*</span><span class="pln">fnFormatString</span><span class="pun">)</span><span class="pln"> </span><span class="pun">(</span><span class="typ">draw_str_t</span><span class="pun">*</span><span class="pln"> drawinfo</span><span class="pun">,</span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">);</span><span class="pln">
fnFormatString pFormatString</span><span class="pun">=(</span><span class="pln">fnFormatString</span><span class="pun">)</span><span class="lit">0x00469530</span><span class="pun">;</span><span class="pln">
</span><span class="com">/*
不显示字符问题:
\这个字符是国际编码,第二个是\0 被跳过
判断修改:
movzx bx,xxxx
test bx,bx
jmp x
*/</span><span class="pln">
DWORD newFormatString</span><span class="pun">(</span><span class="typ">draw_str_t</span><span class="pun">*</span><span class="pln"> drawinfo</span><span class="pun">,</span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> format_str</span><span class="pun">[</span><span class="lit">1024</span><span class="pun">];</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">static</span><span class="pln"> </span><span class="typ">wchar_t</span><span class="pln"> newstring</span><span class="pun">[</span><span class="lit">1024</span><span class="pun">];</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">wchar_t</span><span class="pln"> gowchar</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">drawinfo </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strcpy</span><span class="pun">(</span><span class="pln">format_str</span><span class="pun">,</span><span class="kwd">string</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">int</span><span class="pln"> len </span><span class="pun">=</span><span class="pln"> strlen</span><span class="pun">(</span><span class="pln">format_str</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&lt;</span><span class="pln">len</span><span class="pun">;</span><span class="pln">i</span><span class="pun">++)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">format_str</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'\\'</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;format_str</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="str">' '</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">char</span><span class="pln"> c </span><span class="pun">=</span><span class="pln"> format_str</span><span class="pun">[</span><span class="pln">i</span><span class="pun">+</span><span class="lit">1</span><span class="pun">];</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">switch</span><span class="pun">(</span><span class="pln">c</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">case</span><span class="pln"> </span><span class="str">'n'</span><span class="pun">:</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c </span><span class="pun">=</span><span class="pln"> </span><span class="str">'\n'</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">break</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">case</span><span class="pln"> </span><span class="str">'r'</span><span class="pun">:</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c </span><span class="pun">=</span><span class="pln"> </span><span class="str">'\r'</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">break</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;format_str</span><span class="pun">[</span><span class="pln">i</span><span class="pun">+</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> c</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">int</span><span class="pln"> nLen</span><span class="pun">;</span><span class="pln"> 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nLen </span><span class="pun">=</span><span class="pln"> strlen</span><span class="pun">(</span><span class="pln">format_str</span><span class="pun">)+</span><span class="lit">1</span><span class="pun">;</span><span class="pln"> 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nLen </span><span class="pun">=</span><span class="pln"> </span><span class="typ">MultiByteToWideChar</span><span class="pun">(</span><span class="pln">CP_ACP</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> format_str</span><span class="pun">,</span><span class="pln"> 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nLen</span><span class="pun">,</span><span class="pln"> newstring</span><span class="pun">,</span><span class="pln"> nLen</span><span class="pun">);</span><span class="pln"> 
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">return</span><span class="pln"> pFormatString</span><span class="pun">(</span><span class="pln">drawinfo</span><span class="pun">,(</span><span class="kwd">char</span><span class="pun">*)&amp;</span><span class="pln">newstring</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">void</span><span class="pun">*</span><span class="pln"> pdraw_first</span><span class="pun">=(</span><span class="kwd">void</span><span class="pun">*)</span><span class="lit">0x0046B92C</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">void</span><span class="pun">*</span><span class="pln"> pdraw_next</span><span class="pun">=(</span><span class="kwd">void</span><span class="pun">*)</span><span class="lit">0x0046BCF4</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">typedef</span><span class="pln"> </span><span class="kwd">struct</span><span class="pln"> draw_info_s
</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD unk1</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD unk2</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD unk3</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD color</span><span class="pun">[</span><span class="lit">4</span><span class="pun">];</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD color2</span><span class="pun">[</span><span class="lit">4</span><span class="pun">];</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">wchar_t</span><span class="pln"> str</span><span class="pun">[</span><span class="lit">2</span><span class="pun">];</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;RECT rect</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="typ">draw_info_t</span><span class="pun">;</span><span class="pln">
</span><span class="com">//白色</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> WINAPI draw_first</span><span class="pun">(</span><span class="typ">draw_info_t</span><span class="pun">*</span><span class="pln"> data</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;RECT rect</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;BYTE color</span><span class="pun">[</span><span class="lit">4</span><span class="pun">];</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;color</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">255</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;color</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">255</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;color</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">255</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;color</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">255</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;memcpy</span><span class="pun">(&amp;</span><span class="pln">rect</span><span class="pun">,&amp;</span><span class="pln">data</span><span class="pun">-&gt;</span><span class="pln">rect</span><span class="pun">,</span><span class="kwd">sizeof</span><span class="pun">(</span><span class="pln">data</span><span class="pun">-&gt;</span><span class="pln">rect</span><span class="pun">));</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;RECT rct</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">SetRect</span><span class="pun">(&amp;</span><span class="pln">rct</span><span class="pun">,</span><span class="pln"> rect</span><span class="pun">.</span><span class="pln">left</span><span class="pun">,</span><span class="pln">rect</span><span class="pun">.</span><span class="pln">top</span><span class="pun">,</span><span class="pln"> rect</span><span class="pun">.</span><span class="pln">right</span><span class="pun">,</span><span class="pln"> rect</span><span class="pun">.</span><span class="pln">bottom</span><span class="pun">);</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;g_pTextSprite</span><span class="pun">-&gt;</span><span class="typ">Begin</span><span class="pun">(</span><span class="pln"> D3DXSPRITE_ALPHABLEND </span><span class="pun">|</span><span class="pln"> D3DXSPRITE_SORT_TEXTURE </span><span class="pun">);</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//rct.left -= 1;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//rct.top +=1;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;g_pFont</span><span class="pun">-&gt;</span><span class="typ">DrawTextW</span><span class="pun">(</span><span class="pln">g_pTextSprite</span><span class="pun">,</span><span class="pln">data</span><span class="pun">-&gt;</span><span class="pln">str</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">rct</span><span class="pun">,</span><span class="pln"> DT_LEFT </span><span class="pun">|</span><span class="pln"> DT_NOCLIP</span><span class="pun">,</span><span class="pln"> D3DCOLOR_ARGB</span><span class="pun">(</span><span class="lit">255</span><span class="pun">,</span><span class="pln"> </span><span class="lit">255</span><span class="pun">,</span><span class="pln"> </span><span class="lit">255</span><span class="pun">,</span><span class="pln"> </span><span class="lit">255</span><span class="pun">));</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//rct.left += 4;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//rct.top += 4;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//g_pFont-&gt;DrawTextW(g_pTextSprite,data-&gt;str, -1, &amp;rct, DT_LEFT | DT_NOCLIP, D3DCOLOR_ARGB(255, 255, 255, 255));</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;g_pTextSprite</span><span class="pun">-&gt;</span><span class="typ">End</span><span class="pun">();</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> WINAPI draw_next</span><span class="pun">(</span><span class="typ">draw_info_t</span><span class="pun">*</span><span class="pln"> data</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;RECT rect</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;BYTE color</span><span class="pun">[</span><span class="lit">4</span><span class="pun">];</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;color</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;color</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;color</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;color</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">255</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;memcpy</span><span class="pun">(&amp;</span><span class="pln">rect</span><span class="pun">,&amp;</span><span class="pln">data</span><span class="pun">-&gt;</span><span class="pln">rect</span><span class="pun">,</span><span class="kwd">sizeof</span><span class="pun">(</span><span class="pln">data</span><span class="pun">-&gt;</span><span class="pln">rect</span><span class="pun">));</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;RECT rct</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">SetRect</span><span class="pun">(&amp;</span><span class="pln">rct</span><span class="pun">,</span><span class="pln"> rect</span><span class="pun">.</span><span class="pln">left</span><span class="pun">,</span><span class="pln">rect</span><span class="pun">.</span><span class="pln">top</span><span class="pun">,</span><span class="pln"> rect</span><span class="pun">.</span><span class="pln">right</span><span class="pun">,</span><span class="pln"> rect</span><span class="pun">.</span><span class="pln">bottom</span><span class="pun">);</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;g_pTextSprite</span><span class="pun">-&gt;</span><span class="typ">Begin</span><span class="pun">(</span><span class="pln"> D3DXSPRITE_ALPHABLEND </span><span class="pun">|</span><span class="pln"> D3DXSPRITE_SORT_TEXTURE </span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;g_pFont</span><span class="pun">-&gt;</span><span class="typ">DrawTextW</span><span class="pun">(</span><span class="pln">g_pTextSprite</span><span class="pun">,</span><span class="pln">data</span><span class="pun">-&gt;</span><span class="pln">str</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">rct</span><span class="pun">,</span><span class="pln"> DT_LEFT </span><span class="pun">|</span><span class="pln"> DT_NOCLIP</span><span class="pun">,</span><span class="pln"> D3DCOLOR_ARGB</span><span class="pun">(</span><span class="lit">255</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">));</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;g_pTextSprite</span><span class="pun">-&gt;</span><span class="typ">End</span><span class="pun">();</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

__declspec</span><span class="pun">(</span><span class="pln">naked</span><span class="pun">)</span><span class="kwd">void</span><span class="pln"> _draw_first</span><span class="pun">()</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;__asm
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pushad
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push esi
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;call draw_first
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;popad
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jmp pdraw_first
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
__declspec</span><span class="pun">(</span><span class="pln">naked</span><span class="pun">)</span><span class="kwd">void</span><span class="pln"> _draw_next</span><span class="pun">()</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;__asm
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pushad
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push esi
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;call draw_next
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;popad
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jmp pdraw_next
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

__declspec</span><span class="pun">(</span><span class="pln">dllexport</span><span class="pun">)</span><span class="kwd">void</span><span class="pln"> WINAPI </span><span class="typ">Init</span><span class="pun">()</span><span class="pln">
</span><span class="pun">{</span><span class="pln">

</span><span class="pun">}</span><span class="pln">

</span><span class="typ">IDirect3D9</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> funcAPI</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">typedef</span><span class="pln"> </span><span class="typ">IDirect3D9</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="pun">(</span><span class="pln">WINAPI</span><span class="pun">*</span><span class="pln"> fnDirect3DCreate9</span><span class="pun">)(</span><span class="pln">UINT </span><span class="typ">SDKVersion</span><span class="pun">);</span><span class="pln">
fnDirect3DCreate9 pDirect3DCreate9</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">bool</span><span class="pln"> </span><span class="kwd">done</span><span class="pun">=</span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
</span><span class="typ">IDirect3D9</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> WINAPI newDirect3DCreate9</span><span class="pun">(</span><span class="pln">UINT </span><span class="typ">SDKVersion</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;funcAPI </span><span class="pun">=</span><span class="pln">&nbsp;&nbsp;pDirect3DCreate9</span><span class="pun">(</span><span class="typ">SDKVersion</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">funcAPI </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">!</span><span class="kwd">done</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">done</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pCreateDevice </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">fnCreateDevice</span><span class="pun">)*(</span><span class="pln">DWORD</span><span class="pun">*)(*(</span><span class="pln">DWORD</span><span class="pun">*)</span><span class="pln">funcAPI</span><span class="pun">+</span><span class="lit">0x40</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DetourTransactionBegin</span><span class="pun">();</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DetourUpdateThread</span><span class="pun">(</span><span class="typ">GetCurrentThread</span><span class="pun">());</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DetourAttach</span><span class="pun">((</span><span class="kwd">void</span><span class="pun">**)&amp;</span><span class="pln">pCreateDevice</span><span class="pun">,</span><span class="pln">newCreateDevice</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DetourTransactionCommit</span><span class="pun">();</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DetourTransactionBegin</span><span class="pun">();</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DetourUpdateThread</span><span class="pun">(</span><span class="typ">GetCurrentThread</span><span class="pun">());</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DetourAttach</span><span class="pun">((</span><span class="kwd">void</span><span class="pun">**)&amp;</span><span class="pln">pFormatString</span><span class="pun">,</span><span class="pln">newFormatString</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DetourTransactionCommit</span><span class="pun">();</span><span class="pln">


&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">SetNopCode</span><span class="pun">((</span><span class="pln">PBYTE</span><span class="pun">)</span><span class="pln">pdraw_first</span><span class="pun">,</span><span class="lit">14</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">SetNopCode</span><span class="pun">((</span><span class="pln">PBYTE</span><span class="pun">)</span><span class="lit">0x0046B952</span><span class="pun">,</span><span class="lit">2</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">SetNopCode</span><span class="pun">((</span><span class="pln">PBYTE</span><span class="pun">)</span><span class="lit">0x0046BA8F</span><span class="pun">,</span><span class="lit">12</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">SetNopCode</span><span class="pun">((</span><span class="pln">PBYTE</span><span class="pun">)</span><span class="lit">0x0046BCF4</span><span class="pun">,</span><span class="lit">14</span><span class="pun">);</span><span class="pln">


&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DetourTransactionBegin</span><span class="pun">();</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DetourUpdateThread</span><span class="pun">(</span><span class="typ">GetCurrentThread</span><span class="pun">());</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DetourAttach</span><span class="pun">((</span><span class="kwd">void</span><span class="pun">**)&amp;</span><span class="pln">pdraw_first</span><span class="pun">,</span><span class="pln">_draw_first</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DetourTransactionCommit</span><span class="pun">();</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DetourTransactionBegin</span><span class="pun">();</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DetourUpdateThread</span><span class="pun">(</span><span class="typ">GetCurrentThread</span><span class="pun">());</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DetourAttach</span><span class="pun">((</span><span class="kwd">void</span><span class="pun">**)&amp;</span><span class="pln">pdraw_next</span><span class="pun">,</span><span class="pln">_draw_next</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DetourTransactionCommit</span><span class="pun">();</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">InstallPatch</span><span class="pun">();</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">return</span><span class="pln"> funcAPI</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> </span><span class="typ">RouteAPI</span><span class="pun">()</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//HFONT font = CreateFont(22, 0,0, 0, FW_NORMAL, FALSE, FALSE, FALSE, DEFAULT_CHARSET, OUT_DEFAULT_PRECIS,CLIP_DEFAULT_PRECIS, PROOF_QUALITY, DEFAULT_PITCH|FF_DONTCARE, L"Arial");</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//D3DXCreateFont(m_pD3DDevice, font, &amp;m_pFont);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//D3DXCreateFont</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;HMODULE lib </span><span class="pun">=</span><span class="pln"> </span><span class="typ">LoadLibrary</span><span class="pun">(</span><span class="pln">L</span><span class="str">"d3d9.dll"</span><span class="pun">);</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;pDirect3DCreate9 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">fnDirect3DCreate9</span><span class="pun">)</span><span class="typ">GetProcAddress</span><span class="pun">(</span><span class="pln">lib</span><span class="pun">,</span><span class="str">"Direct3DCreate9"</span><span class="pun">);</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DetourTransactionBegin</span><span class="pun">();</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DetourUpdateThread</span><span class="pun">(</span><span class="typ">GetCurrentThread</span><span class="pun">());</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DetourAttach</span><span class="pun">((</span><span class="kwd">void</span><span class="pun">**)&amp;</span><span class="pln">pDirect3DCreate9</span><span class="pun">,</span><span class="pln">newDirect3DCreate9</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DetourTransactionCommit</span><span class="pun">();</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
COLORREF rgb</span><span class="pun">;</span><span class="pln">
HWND ghWnd</span><span class="pun">;</span><span class="pln">
HBITMAP hBitmap</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> bitheight</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> bitwidth</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> CALLBACK </span><span class="typ">TimerProc</span><span class="pun">()</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> wndAlp </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> flag </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">flag</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">flag </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">Sleep</span><span class="pun">(</span><span class="lit">1000</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flag </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wndAlp</span><span class="pun">-=</span><span class="lit">3</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">wndAlp</span><span class="pun">==</span><span class="lit">0</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DestroyWindow</span><span class="pun">(</span><span class="pln">ghWnd</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">SetLayeredWindowAttributes</span><span class="pun">(</span><span class="pln">ghWnd</span><span class="pun">,-</span><span class="lit">1</span><span class="pun">,</span><span class="pln">wndAlp</span><span class="pun">,</span><span class="pln">LWA_ALPHA</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">else</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wndAlp</span><span class="pun">+=</span><span class="lit">5</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">wndAlp</span><span class="pun">==</span><span class="lit">255</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flag </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">SetLayeredWindowAttributes</span><span class="pun">(</span><span class="pln">ghWnd</span><span class="pun">,-</span><span class="lit">1</span><span class="pun">,</span><span class="pln">wndAlp</span><span class="pun">,</span><span class="pln">LWA_ALPHA</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> </span><span class="typ">DrawBmp</span><span class="pun">(</span><span class="pln">HDC hDC</span><span class="pun">,</span><span class="pln"> HBITMAP bitmap</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> nWidth</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> nHeight</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;BITMAP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bm</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;HDC hdcImage</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;HDC hdcMEM</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;hdcMEM </span><span class="pun">=</span><span class="pln"> </span><span class="typ">CreateCompatibleDC</span><span class="pun">(</span><span class="pln">hDC</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;hdcImage </span><span class="pun">=</span><span class="pln"> </span><span class="typ">CreateCompatibleDC</span><span class="pun">(</span><span class="pln">hDC</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;HBITMAP bmp </span><span class="pun">=</span><span class="pln"> </span><span class="pun">::</span><span class="typ">CreateCompatibleBitmap</span><span class="pun">(</span><span class="pln">hDC</span><span class="pun">,</span><span class="pln"> nWidth</span><span class="pun">,</span><span class="pln"> nHeight</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">GetObject</span><span class="pun">(</span><span class="pln">bitmap</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">sizeof</span><span class="pun">(</span><span class="pln">bm</span><span class="pun">),(</span><span class="pln">LPSTR</span><span class="pun">)&amp;</span><span class="pln">bm</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">SelectObject</span><span class="pun">(</span><span class="pln">hdcMEM</span><span class="pun">,</span><span class="pln"> bmp</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">SelectObject</span><span class="pun">(</span><span class="pln">hdcImage</span><span class="pun">,</span><span class="pln"> bitmap</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">StretchBlt</span><span class="pun">(</span><span class="pln">hdcMEM</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> nWidth</span><span class="pun">,</span><span class="pln"> nHeight</span><span class="pun">,</span><span class="pln"> hdcImage</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> bm</span><span class="pun">.</span><span class="pln">bmWidth</span><span class="pun">,</span><span class="pln"> bm</span><span class="pun">.</span><span class="pln">bmHeight</span><span class="pun">,</span><span class="pln"> SRCCOPY</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">StretchBlt</span><span class="pun">(</span><span class="pln">hDC</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> nWidth</span><span class="pun">,</span><span class="pln"> nHeight</span><span class="pun">,</span><span class="pln"> hdcMEM</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> nWidth</span><span class="pun">,</span><span class="pln"> nHeight</span><span class="pun">,</span><span class="pln"> SRCCOPY</span><span class="pun">);</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DeleteObject</span><span class="pun">(</span><span class="pln">hdcImage</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DeleteDC</span><span class="pun">(</span><span class="pln">hdcImage</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DeleteDC</span><span class="pun">(</span><span class="pln">hdcMEM</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
LRESULT CALLBACK </span><span class="typ">WindowProc</span><span class="pun">(</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;HWND hwnd</span><span class="pun">,</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;UINT uMsg</span><span class="pun">,</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;WPARAM wParam</span><span class="pun">,</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;LPARAM lParam</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">static</span><span class="pln"> HDC compDC</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">static</span><span class="pln"> RECT rect</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">uMsg </span><span class="pun">==</span><span class="pln"> WM_CREATE</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ghWnd </span><span class="pun">=</span><span class="pln"> hwnd</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">SetLayeredWindowAttributes</span><span class="pun">(</span><span class="pln">hwnd</span><span class="pun">,-</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="pln">LWA_ALPHA</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">SetTimer</span><span class="pun">(</span><span class="pln">hwnd</span><span class="pun">,</span><span class="lit">1003</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,(</span><span class="pln">TIMERPROC</span><span class="pun">)</span><span class="typ">TimerProc</span><span class="pun">);</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">int</span><span class="pln"> scrWidth</span><span class="pun">,</span><span class="pln">scrHeight</span><span class="pun">;</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scrWidth </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetSystemMetrics</span><span class="pun">(</span><span class="pln">SM_CXSCREEN</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scrHeight </span><span class="pun">=</span><span class="pln"> </span><span class="typ">GetSystemMetrics</span><span class="pun">(</span><span class="pln">SM_CYSCREEN</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">GetWindowRect</span><span class="pun">(</span><span class="pln">hwnd</span><span class="pun">,&amp;</span><span class="pln">rect</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rect</span><span class="pun">.</span><span class="pln">left </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">scrWidth</span><span class="pun">-</span><span class="pln">rect</span><span class="pun">.</span><span class="pln">right</span><span class="pun">)/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rect</span><span class="pun">.</span><span class="pln">top </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">scrHeight</span><span class="pun">-</span><span class="pln">rect</span><span class="pun">.</span><span class="pln">bottom</span><span class="pun">)/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">SetWindowPos</span><span class="pun">(</span><span class="pln">hwnd</span><span class="pun">,</span><span class="pln">HWND_TOP</span><span class="pun">,</span><span class="pln">rect</span><span class="pun">.</span><span class="pln">left</span><span class="pun">,</span><span class="pln">rect</span><span class="pun">.</span><span class="pln">top</span><span class="pun">,</span><span class="pln">rect</span><span class="pun">.</span><span class="pln">right</span><span class="pun">,</span><span class="pln">rect</span><span class="pun">.</span><span class="pln">bottom</span><span class="pun">,</span><span class="pln">SWP_SHOWWINDOW</span><span class="pun">);</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DrawBmp</span><span class="pun">(</span><span class="typ">GetDC</span><span class="pun">(</span><span class="pln">hwnd</span><span class="pun">),</span><span class="pln">hBitmap</span><span class="pun">,</span><span class="lit">454</span><span class="pun">,</span><span class="lit">297</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">uMsg </span><span class="pun">==</span><span class="pln"> WM_PAINT</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RECT rect</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">GetWindowRect</span><span class="pun">(</span><span class="pln">hwnd</span><span class="pun">,&amp;</span><span class="pln">rect</span><span class="pun">);</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">uMsg</span><span class="pun">==</span><span class="pln">WM_CLOSE</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DestroyWindow</span><span class="pun">(</span><span class="pln">hwnd</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">uMsg </span><span class="pun">==</span><span class="pln"> WM_DESTROY</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">PostQuitMessage</span><span class="pun">(</span><span class="lit">0</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">return</span><span class="pln"> </span><span class="typ">DefWindowProc</span><span class="pun">(</span><span class="pln">hwnd</span><span class="pun">,</span><span class="pln">uMsg</span><span class="pun">,</span><span class="pln">wParam</span><span class="pun">,</span><span class="pln">lParam</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
HINSTANCE hInst</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">void</span><span class="pln"> __stdcall </span><span class="typ">InitHook</span><span class="pun">()</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">char</span><span class="pln"> szFilePath</span><span class="pun">[</span><span class="pln">MAX_PATH</span><span class="pun">];</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD routeAddr</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD oldProtect</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">GetCurrentDirectoryA</span><span class="pun">(</span><span class="kwd">sizeof</span><span class="pun">(</span><span class="pln">szFilePath</span><span class="pun">),</span><span class="pln">szFilePath</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;strcat</span><span class="pun">(</span><span class="pln">szFilePath</span><span class="pun">,</span><span class="str">"\\fm.dat"</span><span class="pun">);</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">fileStream</span><span class="pun">.</span><span class="typ">Open</span><span class="pun">(</span><span class="pln">szFilePath</span><span class="pun">))</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fileStream</span><span class="pun">.</span><span class="typ">LoadFromStream</span><span class="pun">();</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">memory_tree_t</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> tree </span><span class="pun">=</span><span class="pln"> fileStream</span><span class="pun">.</span><span class="typ">GetFile</span><span class="pun">(</span><span class="str">"/readme.bmp"</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">tree</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">char</span><span class="pln"> szTempPath</span><span class="pun">[</span><span class="pln">MAX_PATH</span><span class="pun">];</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">char</span><span class="pln"> szTempFile</span><span class="pun">[</span><span class="pln">MAX_PATH</span><span class="pun">];</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">GetTempPathA</span><span class="pun">(</span><span class="pln">MAX_PATH</span><span class="pun">,</span><span class="pln"> szTempPath</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">GetTempFileNameA</span><span class="pun">(</span><span class="pln">szTempPath</span><span class="pun">,</span><span class="pln"> </span><span class="str">"~fm"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> szTempFile</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FILE </span><span class="pun">*</span><span class="pln">pfile</span><span class="pun">;</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pun">(!(</span><span class="pln">pfile </span><span class="pun">=</span><span class="pln"> fopen</span><span class="pun">(</span><span class="pln">szTempFile</span><span class="pun">,</span><span class="pln"> </span><span class="str">"wb+"</span><span class="pun">)))</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">return</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fwrite</span><span class="pun">(</span><span class="pln">tree</span><span class="pun">-&gt;</span><span class="pln">dataOffset</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> tree</span><span class="pun">-&gt;</span><span class="pln">dataSize</span><span class="pun">,</span><span class="pln"> pfile</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fclose</span><span class="pun">(</span><span class="pln">pfile</span><span class="pun">);</span><span class="pln">


&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hBitmap </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">HBITMAP</span><span class="pun">)</span><span class="typ">LoadImageA</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">,</span><span class="pln">szTempFile</span><span class="pun">,</span><span class="pln">IMAGE_BITMAP</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="pln">LR_CREATEDIBSECTION</span><span class="pun">|</span><span class="pln">LR_DEFAULTSIZE</span><span class="pun">|</span><span class="pln">LR_LOADFROMFILE</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WNDCLASSEXA wcex</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memset</span><span class="pun">(&amp;</span><span class="pln">wcex</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="kwd">sizeof</span><span class="pun">(</span><span class="pln">wcex</span><span class="pun">));</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wcex</span><span class="pun">.</span><span class="pln">cbSize </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">sizeof</span><span class="pun">(</span><span class="pln">wcex</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wcex</span><span class="pun">.</span><span class="pln">style </span><span class="pun">=</span><span class="pln"> CS_HREDRAW </span><span class="pun">|</span><span class="pln"> CS_VREDRAW</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wcex</span><span class="pun">.</span><span class="pln">lpfnWndProc </span><span class="pun">=</span><span class="pln"> </span><span class="typ">WindowProc</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wcex</span><span class="pun">.</span><span class="pln">hInstance </span><span class="pun">=</span><span class="pln"> hInst</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wcex</span><span class="pun">.</span><span class="pln">hbrBackground&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">HBRUSH</span><span class="pun">)(</span><span class="pln">COLOR_BTNFACE</span><span class="pun">+</span><span class="lit">1</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wcex</span><span class="pun">.</span><span class="pln">lpszClassName&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">=</span><span class="pln"> </span><span class="str">"fmLogo"</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wcex</span><span class="pun">.</span><span class="pln">hCursor </span><span class="pun">=</span><span class="pln"> </span><span class="typ">LoadCursor</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">,</span><span class="pln"> IDC_ARROW</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wcex</span><span class="pun">.</span><span class="pln">cbWndExtra </span><span class="pun">=</span><span class="pln"> DLGWINDOWEXTRA</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rgb </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0xFFFFFFFF</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">RegisterClassExA</span><span class="pun">(&amp;</span><span class="pln">wcex</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HWND hWnd </span><span class="pun">=</span><span class="pln"> </span><span class="typ">CreateWindowExA</span><span class="pun">(</span><span class="pln">WS_EX_LAYERED</span><span class="pun">|</span><span class="pln">WS_EX_TOPMOST</span><span class="pun">,</span><span class="str">"fmLogo"</span><span class="pun">,</span><span class="str">"fmLogo"</span><span class="pun">,</span><span class="pln">WS_POPUP </span><span class="pun">|</span><span class="pln"> WS_SYSMENU </span><span class="pun">|</span><span class="pln"> WS_SIZEBOX </span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">454</span><span class="pun">,</span><span class="pln"> </span><span class="lit">297</span><span class="pun">,</span><span class="pln"> NULL</span><span class="pun">,</span><span class="pln"> NULL</span><span class="pun">,</span><span class="pln"> hInst</span><span class="pun">,</span><span class="pln"> NULL</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">ShowWindow</span><span class="pun">(</span><span class="pln">hWnd</span><span class="pun">,</span><span class="pln">SW_SHOW</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">UpdateWindow</span><span class="pun">(</span><span class="pln">hWnd</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MSG msg</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="typ">GetMessage</span><span class="pun">(&amp;</span><span class="pln">msg</span><span class="pun">,</span><span class="pln"> NULL</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">))</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">TranslateMessage</span><span class="pun">(&amp;</span><span class="pln">msg</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DispatchMessage</span><span class="pun">(&amp;</span><span class="pln">msg</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">RouteAPI</span><span class="pun">();</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">


</span><span class="pun">}</span><span class="pln">

BOOL APIENTRY </span><span class="typ">DllMain</span><span class="pun">(</span><span class="pln"> HMODULE hModule</span><span class="pun">,</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;DWORD&nbsp;&nbsp;ul_reason_for_call</span><span class="pun">,</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;LPVOID lpReserved
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">switch</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ul_reason_for_call</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">case</span><span class="pln"> DLL_PROCESS_ATTACH</span><span class="pun">:</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hInst </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">HINSTANCE</span><span class="pun">)</span><span class="pln">hModule</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">InitHook</span><span class="pun">();</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">break</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">case</span><span class="pln"> DLL_THREAD_ATTACH</span><span class="pun">:</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">case</span><span class="pln"> DLL_THREAD_DETACH</span><span class="pun">:</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">case</span><span class="pln"> DLL_PROCESS_DETACH</span><span class="pun">:</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">break</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">return</span><span class="pln"> TRUE</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span></pre></div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_5765580" class="c"></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2013-08-06 09:39 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 1楼(201724) 的帖子');" data-mx-warn="Empty URL">1 楼</a></span>

		</div></th>
	</tr></tbody></table>
</div>

<a name="5765613" data-mx-warn="Empty URL"></a>
<div class="t t2"><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570977545-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>201724</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=822973" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570977545-c39d29f7268c7401c6f2efae70cc5e9b.jpeg" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_2"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">澄空新生</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570977545-be59bc9a4edb96b6b54ba67c9267b93f.gif"><br>

<span class="user-info2" id="showface_2">
<span class="user-infoWrap2">


精华:

		<span class="s4">0</span>
<br>
发帖: <span class="s1 f9">31</span><br>
学分: <span class="s2 f9">0 点</span><br>
澄空币: <span class="s3 f9">646 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2012-08-26<br>
		最后登录:2017-06-02 <br><br> 
		</span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_5765613" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=11051522&amp;pid=5765613&amp;article=2" onclick="return sendurl(this,4,event)" id="quote_5765613" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=11051522&amp;pid=5765613&amp;article=2" id="modify_5765613" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=822973" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=11051522&amp;pid=5765613" onclick="return sendurl(this,8)" id="report_5765613" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=11051522&amp;uid=822973" title="只看该作者的所有回复" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('5765613')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_5765613" class="fl">&nbsp;</h1>
			

			<div id="p_5765613" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_5765613">这个游戏是自带字库的 所以 自己画吧 我反正偷懒<br><br><br>前两天看到...TextOutA, TextOutW等猎奇函数输出的文本 顿时整个人MLGB...<br><br><br>上面代码很早搞的 处理的不好对于这种东西 还是hook读文本的地方 然后自己读取 和 draw比较好吧<div id="alert_5765613" style="color: gray; margin-top: 30px; --darkreader-inline-color:#bfb9ac;" data-darkreader-inline-color="">[ 此帖被201724在2013-08-06 12:53重新编辑 ]</div></div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_5765613" class="c"></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2013-08-06 09:48 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 2楼(201724) 的帖子');" data-mx-warn="Empty URL">2 楼</a></span>

		</div></th>
	</tr></tbody></table>
</div>

<a name="5765702" data-mx-warn="Empty URL"></a>
<div class="t t2"><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570977545-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>amaranthf</b>
<div style="margin:.3em 0 .4em .2em">はい、変態です。</div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=247562" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570977545-1355eb712976ba923dc6d00960493aea.jpg" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_3"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">澄空三年生上学期</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570977545-5fc5bacf4fd91c54a5fe72c4ceff18fa.gif"><br>

<span class="user-info2" id="showface_3">
<span class="user-infoWrap2">


精华:

		<a href="https://bbs.sumisora.net/search.php?authorid=247562&amp;digest=1" target="_blank" class="s4 f9" referrerpolicy="no-referrer" rel="noopener noreferrer">1</a>
<br>
发帖: <span class="s1 f9">302</span><br>
学分: <span class="s2 f9">159 点</span><br>
澄空币: <span class="s3 f9">914 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2008-11-23<br>
		最后登录:2019-08-30 <br><br> 
		<img src="assets/1570977545-bd1b51324558fe7f970dc337a22ab44d.gif" title="杏子御津爱护同好会勋章"> <img src="assets/1570977545-f464946ff600e13a1efb7655381816b9.gif" title="きっと、澄みわたる朝色よりも汉化纪念勋章"> <img src="assets/1570977545-e4c06c69f2782e34fc77312ea6e838be.gif" title="Gift汉化纪念勋章"> <img src="assets/1570977545-15e89d0b08be5c8eefbdfacf3bb9dffd.gif" title="天神乱漫汉化纪念勋章"> <img src="assets/1570977545-b0c0c9209b189d3c6e4a2f1ce27e06da.gif" title="纯白交响曲汉化纪念勋章"> <img src="assets/1570977545-fc10b14705a44f23e82b183dd9d03d74.gif" title="muv-luv alternative汉化纪念勋章"> <br></span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_5765702" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=11051522&amp;pid=5765702&amp;article=3" onclick="return sendurl(this,4,event)" id="quote_5765702" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=11051522&amp;pid=5765702&amp;article=3" id="modify_5765702" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=247562" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=11051522&amp;pid=5765702" onclick="return sendurl(this,8)" id="report_5765702" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=11051522&amp;uid=247562" title="只看该作者的所有回复" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('5765702')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_5765702" class="fl">&nbsp;</h1>
			

			<div id="p_5765702" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_5765702">撇到一眼fxck，顿生知己之感</div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_5765702" class="c"></div>

		<div><img src="assets/1570977545-ee75bbe39bae3a2e6fc29b9593dde416.png" align="absbottom"></div>
		<div class="card" style="overflow:hidden;">
			<table width="100%">
				<tbody><tr>
					<td id="ck_card_container_5765702">
					<img src="assets/1570977545-3e2b863b5e623887b192ec599f8824b1.png" width="224" border="0"> <img src="assets/1570977545-b9097c442aecbdab3af0001b460f5744.png" width="224" border="0"> <img src="assets/1570977545-681af903addce100446352ebfb1ea230.png" width="224" border="0"> </td><td>
				</td></tr>
				
			</tbody></table>
		</div>


		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2013-08-06 10:04 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 3楼(amaranthf) 的帖子');" data-mx-warn="Empty URL">3 楼</a></span>

		</div></th>
	</tr></tbody></table>
</div>

<a name="5766613" data-mx-warn="Empty URL"></a>
<div class="t t2"><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570977545-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>bingkan</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=735425" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570977545-fe8ef3331f97b66ca7156370f35bcf33.jpg" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_4"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">澄空一年生上学期</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570977545-f43195cd588caa26c296fcc61910b3e6.gif"><br>

<span class="user-info2" id="showface_4">
<span class="user-infoWrap2">


精华:

		<span class="s4">0</span>
<br>
发帖: <span class="s1 f9">53</span><br>
学分: <span class="s2 f9">0 点</span><br>
澄空币: <span class="s3 f9">599 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2012-02-02<br>
		最后登录:2014-06-29 <br><br> 
		</span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_5766613" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=11051522&amp;pid=5766613&amp;article=4" onclick="return sendurl(this,4,event)" id="quote_5766613" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=11051522&amp;pid=5766613&amp;article=4" id="modify_5766613" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=735425" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=11051522&amp;pid=5766613" onclick="return sendurl(this,8)" id="report_5766613" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=11051522&amp;uid=735425" title="只看该作者的所有回复" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('5766613')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_5766613" class="fl">&nbsp;</h1>
			

			<div id="p_5766613" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_5766613"><h6 class="quote">Quote:</h6><blockquote class="blockquote">引用第2楼201724于2013-08-06 09:48发表的&nbsp;&nbsp;:<br>这个游戏是自带字库的 所以 自己画吧 我反正偷懒<br><br><br>前两天看到...TextOutA, TextOutW等猎奇函数输出的文本 顿时整个人MLGB...<br><br>.......</blockquote><br><br><br>我去，这引擎如此复杂么………要跪的节奏……<br>分支选择框里的文本显示是调用系统字库，原理比较简单，不能修改剧情文本的显示过程，让它和选择框里文本使用同一种方法吗？<br><br>看前辈的代码，自己draw text实在太麻烦了……根本不了解的说…………<div id="alert_5766613" style="color: gray; margin-top: 30px; --darkreader-inline-color:#bfb9ac;" data-darkreader-inline-color="">[ 此帖被bingkan在2013-08-06 16:05重新编辑 ]</div></div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_5766613" class="c"></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2013-08-06 15:30 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 4楼(bingkan) 的帖子');" data-mx-warn="Empty URL">4 楼</a></span>

		</div></th>
	</tr></tbody></table>
</div>

<a name="5766690" data-mx-warn="Empty URL"></a>
<div class="t t2"><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570977545-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>bingkan</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=735425" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570977545-fe8ef3331f97b66ca7156370f35bcf33.jpg" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_5"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">澄空一年生上学期</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570977545-f43195cd588caa26c296fcc61910b3e6.gif"><br>

<span class="user-info2" id="showface_5">
<span class="user-infoWrap2">


精华:

		<span class="s4">0</span>
<br>
发帖: <span class="s1 f9">53</span><br>
学分: <span class="s2 f9">0 点</span><br>
澄空币: <span class="s3 f9">599 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2012-02-02<br>
		最后登录:2014-06-29 <br><br> 
		</span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_5766690" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=11051522&amp;pid=5766690&amp;article=5" onclick="return sendurl(this,4,event)" id="quote_5766690" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=11051522&amp;pid=5766690&amp;article=5" id="modify_5766690" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=735425" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=11051522&amp;pid=5766690" onclick="return sendurl(this,8)" id="report_5766690" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=11051522&amp;uid=735425" title="只看该作者的所有回复" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('5766690')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_5766690" class="fl">&nbsp;</h1>
			

			<div id="p_5766690" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_5766690"><h6 class="quote">Quote:</h6><blockquote class="blockquote">引用第3楼amaranthf于2013-08-06 10:04发表的&nbsp;&nbsp;:<br>撇到一眼fxck，顿生知己之感</blockquote><br><br>常用语……<img src="assets/1570977545-a32f10156415b7ffaf41b808023d9e34.gif"><br><br>现在有种思路就是修改剧情文本的显示过程，让它和选项文本用同一个处理方法，因为选项文本是调用系统字库，原理比较简单。<br><br>不知行不行…………</div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_5766690" class="c"></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2013-08-06 16:08 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 5楼(bingkan) 的帖子');" data-mx-warn="Empty URL">5 楼</a></span>

		</div></th>
	</tr></tbody></table>
</div>

<a name="5766753" data-mx-warn="Empty URL"></a>
<div class="t t2"><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570977545-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>201724</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=822973" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570977545-c39d29f7268c7401c6f2efae70cc5e9b.jpeg" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_6"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">澄空新生</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570977545-be59bc9a4edb96b6b54ba67c9267b93f.gif"><br>

<span class="user-info2" id="showface_6">
<span class="user-infoWrap2">


精华:

		<span class="s4">0</span>
<br>
发帖: <span class="s1 f9">31</span><br>
学分: <span class="s2 f9">0 点</span><br>
澄空币: <span class="s3 f9">646 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2012-08-26<br>
		最后登录:2017-06-02 <br><br> 
		</span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_5766753" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=11051522&amp;pid=5766753&amp;article=6" onclick="return sendurl(this,4,event)" id="quote_5766753" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=11051522&amp;pid=5766753&amp;article=6" id="modify_5766753" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=822973" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=11051522&amp;pid=5766753" onclick="return sendurl(this,8)" id="report_5766753" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=11051522&amp;uid=822973" title="只看该作者的所有回复" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('5766753')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_5766753" class="fl">&nbsp;</h1>
			

			<div id="p_5766753" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_5766753"><h6 class="quote">Quote:</h6><blockquote class="blockquote">引用第5楼bingkan于2013-08-06 16:08发表的&nbsp;&nbsp;:<br><br><br>常用语……<img src="assets/1570977545-a32f10156415b7ffaf41b808023d9e34.gif"><br><br>现在有种思路就是修改剧情文本的显示过程，让它和选项文本用同一个处理方法，因为选项文本是调用系统字库，原理比较简单。<br>.......</blockquote><br><br>没试过 大概是可以的。。</div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_5766753" class="c"></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2013-08-06 16:37 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 6楼(201724) 的帖子');" data-mx-warn="Empty URL">6 楼</a></span>

		</div></th>
	</tr></tbody></table>
</div>

<a name="5767234" data-mx-warn="Empty URL"></a>
<div class="t t2"><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570977545-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>bingkan</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=735425" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570977545-fe8ef3331f97b66ca7156370f35bcf33.jpg" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_7"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">澄空一年生上学期</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570977545-f43195cd588caa26c296fcc61910b3e6.gif"><br>

<span class="user-info2" id="showface_7">
<span class="user-infoWrap2">


精华:

		<span class="s4">0</span>
<br>
发帖: <span class="s1 f9">53</span><br>
学分: <span class="s2 f9">0 点</span><br>
澄空币: <span class="s3 f9">599 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2012-02-02<br>
		最后登录:2014-06-29 <br><br> 
		</span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_5767234" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=11051522&amp;pid=5767234&amp;article=7" onclick="return sendurl(this,4,event)" id="quote_5767234" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=11051522&amp;pid=5767234&amp;article=7" id="modify_5767234" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=735425" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=11051522&amp;pid=5767234" onclick="return sendurl(this,8)" id="report_5767234" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=11051522&amp;uid=735425" title="只看该作者的所有回复" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('5767234')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_5767234" class="fl">&nbsp;</h1>
			

			<div id="p_5767234" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_5767234"><h6 class="quote">Quote:</h6><blockquote class="blockquote">引用第6楼201724于2013-08-06 16:37发表的&nbsp;&nbsp;:<br><br><br>没试过 大概是可以的。。</blockquote><br><br><br>这样的话就是接口不太好找……对windows游戏字模调用和显示的过程不是很了解啊……<br><br>前辈的程序里draw text之后是怎么找到传回游戏的接口的呢？</div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_5767234" class="c"></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2013-08-06 21:02 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 7楼(bingkan) 的帖子');" data-mx-warn="Empty URL">7 楼</a></span>

		</div></th>
	</tr></tbody></table>
</div>

<a name="5768185" data-mx-warn="Empty URL"></a>
<div class="t t2"><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570977545-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>201724</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=822973" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570977545-c39d29f7268c7401c6f2efae70cc5e9b.jpeg" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_8"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">澄空新生</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570977545-be59bc9a4edb96b6b54ba67c9267b93f.gif"><br>

<span class="user-info2" id="showface_8">
<span class="user-infoWrap2">


精华:

		<span class="s4">0</span>
<br>
发帖: <span class="s1 f9">31</span><br>
学分: <span class="s2 f9">0 点</span><br>
澄空币: <span class="s3 f9">646 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2012-08-26<br>
		最后登录:2017-06-02 <br><br> 
		</span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_5768185" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=11051522&amp;pid=5768185&amp;article=8" onclick="return sendurl(this,4,event)" id="quote_5768185" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=11051522&amp;pid=5768185&amp;article=8" id="modify_5768185" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=822973" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=11051522&amp;pid=5768185" onclick="return sendurl(this,8)" id="report_5768185" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=11051522&amp;uid=822973" title="只看该作者的所有回复" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('5768185')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_5768185" class="fl">&nbsp;</h1>
			

			<div id="p_5768185" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_5768185"><h6 class="quote">Quote:</h6><blockquote class="blockquote">引用第7楼bingkan于2013-08-06 21:02发表的&nbsp;&nbsp;:<br><br><br><br>这样的话就是接口不太好找……对windows游戏字模调用和显示的过程不是很了解啊……<br><br>.......</blockquote><br>&nbsp;&nbsp;游戏本身是用顶点缓冲区的&nbsp;&nbsp;我在他屏幕刷新函数hook过来 然后dawtext</div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_5768185" class="c"></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2013-08-07 10:22 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 8楼(201724) 的帖子');" data-mx-warn="Empty URL">8 楼</a></span>

		</div></th>
	</tr></tbody></table>
</div>

<a name="5768186" data-mx-warn="Empty URL"></a>
<div class="t t2"><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570977545-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>201724</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=822973" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570977545-c39d29f7268c7401c6f2efae70cc5e9b.jpeg" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_9"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">澄空新生</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570977545-be59bc9a4edb96b6b54ba67c9267b93f.gif"><br>

<span class="user-info2" id="showface_9">
<span class="user-infoWrap2">


精华:

		<span class="s4">0</span>
<br>
发帖: <span class="s1 f9">31</span><br>
学分: <span class="s2 f9">0 点</span><br>
澄空币: <span class="s3 f9">646 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2012-08-26<br>
		最后登录:2017-06-02 <br><br> 
		</span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_5768186" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=11051522&amp;pid=5768186&amp;article=9" onclick="return sendurl(this,4,event)" id="quote_5768186" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=11051522&amp;pid=5768186&amp;article=9" id="modify_5768186" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=822973" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=11051522&amp;pid=5768186" onclick="return sendurl(this,8)" id="report_5768186" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=11051522&amp;uid=822973" title="只看该作者的所有回复" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('5768186')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_5768186" class="fl">&nbsp;</h1>
			

			<div id="p_5768186" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_5768186">取8位灰度字模 然后自己混合下rgba就可以了</div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_5768186" class="c"></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2013-08-07 10:23 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 9楼(201724) 的帖子');" data-mx-warn="Empty URL">9 楼</a></span>

		</div></th>
	</tr></tbody></table>
</div>

<a name="5769086" data-mx-warn="Empty URL"></a>
<div class="t t2"><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570977545-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>bingkan</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=735425" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570977545-fe8ef3331f97b66ca7156370f35bcf33.jpg" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_10"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">澄空一年生上学期</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570977545-f43195cd588caa26c296fcc61910b3e6.gif"><br>

<span class="user-info2" id="showface_10">
<span class="user-infoWrap2">


精华:

		<span class="s4">0</span>
<br>
发帖: <span class="s1 f9">53</span><br>
学分: <span class="s2 f9">0 点</span><br>
澄空币: <span class="s3 f9">599 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2012-02-02<br>
		最后登录:2014-06-29 <br><br> 
		</span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_5769086" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=11051522&amp;pid=5769086&amp;article=10" onclick="return sendurl(this,4,event)" id="quote_5769086" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=11051522&amp;pid=5769086&amp;article=10" id="modify_5769086" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=735425" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=11051522&amp;pid=5769086" onclick="return sendurl(this,8)" id="report_5769086" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=11051522&amp;uid=735425" title="只看该作者的所有回复" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('5769086')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_5769086" class="fl">&nbsp;</h1>
			

			<div id="p_5769086" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_5769086"><h6 class="quote">Quote:</h6><blockquote class="blockquote">引用第9楼201724于2013-08-07 10:23发表的&nbsp;&nbsp;:<br>取8位灰度字模 然后自己混合下rgba就可以了</blockquote><br><br><br>其实这游戏实际上并不是使用自己的字库，fontdata里存放的是GetGlyphOutline的输出缓冲，实际上还是从系统ttf字库里取字模。</div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_5769086" class="c"></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2013-08-07 17:13 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 10楼(bingkan) 的帖子');" data-mx-warn="Empty URL">10 楼</a></span>

		</div></th>
	</tr></tbody></table>
</div>

<a name="5769774" data-mx-warn="Empty URL"></a>
<div class="t t2"><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570977545-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>201724</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=822973" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570977545-c39d29f7268c7401c6f2efae70cc5e9b.jpeg" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_11"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">澄空新生</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570977545-be59bc9a4edb96b6b54ba67c9267b93f.gif"><br>

<span class="user-info2" id="showface_11">
<span class="user-infoWrap2">


精华:

		<span class="s4">0</span>
<br>
发帖: <span class="s1 f9">31</span><br>
学分: <span class="s2 f9">0 点</span><br>
澄空币: <span class="s3 f9">646 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2012-08-26<br>
		最后登录:2017-06-02 <br><br> 
		</span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_5769774" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=11051522&amp;pid=5769774&amp;article=11" onclick="return sendurl(this,4,event)" id="quote_5769774" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=11051522&amp;pid=5769774&amp;article=11" id="modify_5769774" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=822973" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=11051522&amp;pid=5769774" onclick="return sendurl(this,8)" id="report_5769774" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=11051522&amp;uid=822973" title="只看该作者的所有回复" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('5769774')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_5769774" class="fl">&nbsp;</h1>
			

			<div id="p_5769774" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_5769774"><h6 class="quote">Quote:</h6><blockquote class="blockquote">引用第10楼bingkan于2013-08-07 17:13发表的&nbsp;&nbsp;:<br><br><br><br>其实这游戏实际上并不是使用自己的字库，fontdata里存放的是GetGlyphOutline的输出缓冲，实际上还是从系统ttf字库里取字模。</blockquote><br>&nbsp;&nbsp;那里面是保存预先取好的东西吧</div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_5769774" class="c"></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2013-08-07 22:32 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 11楼(201724) 的帖子');" data-mx-warn="Empty URL">11 楼</a></span>

		</div></th>
	</tr></tbody></table>
</div>

<a name="5771839" data-mx-warn="Empty URL"></a>
<div class="t t2"><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570977545-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>bingkan</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=735425" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570977545-fe8ef3331f97b66ca7156370f35bcf33.jpg" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_12"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">澄空一年生上学期</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570977545-f43195cd588caa26c296fcc61910b3e6.gif"><br>

<span class="user-info2" id="showface_12">
<span class="user-infoWrap2">


精华:

		<span class="s4">0</span>
<br>
发帖: <span class="s1 f9">53</span><br>
学分: <span class="s2 f9">0 点</span><br>
澄空币: <span class="s3 f9">599 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2012-02-02<br>
		最后登录:2014-06-29 <br><br> 
		</span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_5771839" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=11051522&amp;pid=5771839&amp;article=12" onclick="return sendurl(this,4,event)" id="quote_5771839" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=11051522&amp;pid=5771839&amp;article=12" id="modify_5771839" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=735425" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=11051522&amp;pid=5771839" onclick="return sendurl(this,8)" id="report_5771839" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=11051522&amp;uid=735425" title="只看该作者的所有回复" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('5771839')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_5771839" class="fl">&nbsp;</h1>
			

			<div id="p_5771839" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_5771839"><h6 class="quote">Quote:</h6><blockquote class="blockquote">引用第11楼201724于2013-08-07 22:32发表的&nbsp;&nbsp;:<br><br>&nbsp;&nbsp;那里面是保存预先取好的东西吧</blockquote><br><br><br>确实如此，晕了……话说夏终，前辈是带壳调试么……我的OD都跑不起来这游戏……anti太丧心病狂了……</div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_5771839" class="c"></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2013-08-08 20:07 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 12楼(bingkan) 的帖子');" data-mx-warn="Empty URL">12 楼</a></span>

		</div></th>
	</tr></tbody></table>
</div>

<a name="5771978" data-mx-warn="Empty URL"></a>
<div class="t t2"><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570977545-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>bingkan</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=735425" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570977545-fe8ef3331f97b66ca7156370f35bcf33.jpg" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_13"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">澄空一年生上学期</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570977545-f43195cd588caa26c296fcc61910b3e6.gif"><br>

<span class="user-info2" id="showface_13">
<span class="user-infoWrap2">


精华:

		<span class="s4">0</span>
<br>
发帖: <span class="s1 f9">53</span><br>
学分: <span class="s2 f9">0 点</span><br>
澄空币: <span class="s3 f9">599 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2012-02-02<br>
		最后登录:2014-06-29 <br><br> 
		</span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_5771978" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=11051522&amp;pid=5771978&amp;article=13" onclick="return sendurl(this,4,event)" id="quote_5771978" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=11051522&amp;pid=5771978&amp;article=13" id="modify_5771978" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=735425" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=11051522&amp;pid=5771978" onclick="return sendurl(this,8)" id="report_5771978" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=11051522&amp;uid=735425" title="只看该作者的所有回复" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('5771978')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_5771978" class="fl">&nbsp;</h1>
			

			<div id="p_5771978" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_5771978"><span class="highslide"><img src="assets/1570977545-85a7013622683b19c2973d9804cdc500.jpg" border="0" style="max-width: 100%;max-height: 800px;"></span><br>汗…………</div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_5771978" class="c"></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2013-08-08 21:05 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 13楼(bingkan) 的帖子');" data-mx-warn="Empty URL">13 楼</a></span>

		</div></th>
	</tr></tbody></table>
</div>

<a name="5772599" data-mx-warn="Empty URL"></a>
<div class="t t2"><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570977545-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>201724</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=822973" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570977545-c39d29f7268c7401c6f2efae70cc5e9b.jpeg" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_14"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">澄空新生</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570977545-be59bc9a4edb96b6b54ba67c9267b93f.gif"><br>

<span class="user-info2" id="showface_14">
<span class="user-infoWrap2">


精华:

		<span class="s4">0</span>
<br>
发帖: <span class="s1 f9">31</span><br>
学分: <span class="s2 f9">0 点</span><br>
澄空币: <span class="s3 f9">646 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2012-08-26<br>
		最后登录:2017-06-02 <br><br> 
		</span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_5772599" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=11051522&amp;pid=5772599&amp;article=14" onclick="return sendurl(this,4,event)" id="quote_5772599" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=11051522&amp;pid=5772599&amp;article=14" id="modify_5772599" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=822973" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=11051522&amp;pid=5772599" onclick="return sendurl(this,8)" id="report_5772599" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=11051522&amp;uid=822973" title="只看该作者的所有回复" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('5772599')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_5772599" class="fl">&nbsp;</h1>
			

			<div id="p_5772599" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_5772599"><h6 class="quote">Quote:</h6><blockquote class="blockquote">引用第13楼bingkan于2013-08-08 21:05发表的&nbsp;&nbsp;:<br><span class="highslide"><img src="assets/1570977545-85a7013622683b19c2973d9804cdc500.jpg" border="0" style="max-width: 100%;max-height: 800px;"></span><br>汗…………</blockquote><br><br>我是带壳调试的啊 咋了 不会脱Themida</div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_5772599" class="c"></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2013-08-09 13:22 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 14楼(201724) 的帖子');" data-mx-warn="Empty URL">14 楼</a></span>

		</div></th>
	</tr></tbody></table>
</div>

<a name="5772604" data-mx-warn="Empty URL"></a>
<div class="t t2"><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570977545-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>201724</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=822973" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570977545-c39d29f7268c7401c6f2efae70cc5e9b.jpeg" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_15"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">澄空新生</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570977545-be59bc9a4edb96b6b54ba67c9267b93f.gif"><br>

<span class="user-info2" id="showface_15">
<span class="user-infoWrap2">


精华:

		<span class="s4">0</span>
<br>
发帖: <span class="s1 f9">31</span><br>
学分: <span class="s2 f9">0 点</span><br>
澄空币: <span class="s3 f9">646 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2012-08-26<br>
		最后登录:2017-06-02 <br><br> 
		</span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_5772604" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=11051522&amp;pid=5772604&amp;article=15" onclick="return sendurl(this,4,event)" id="quote_5772604" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=11051522&amp;pid=5772604&amp;article=15" id="modify_5772604" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=822973" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=11051522&amp;pid=5772604" onclick="return sendurl(this,8)" id="report_5772604" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=11051522&amp;uid=822973" title="只看该作者的所有回复" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('5772604')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_5772604" class="fl">&nbsp;</h1>
			

			<div id="p_5772604" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_5772604"><h6 class="quote">Quote:</h6><blockquote class="blockquote">引用第13楼bingkan于2013-08-08 21:05发表的&nbsp;&nbsp;:<br><span class="highslide"><img src="assets/1570977545-85a7013622683b19c2973d9804cdc500.jpg" border="0" style="max-width: 100%;max-height: 800px;"></span><br>汗…………</blockquote><br>输出的字模需要自己转换成32位的rgba</div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_5772604" class="c"></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2013-08-09 13:40 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 15楼(201724) 的帖子');" data-mx-warn="Empty URL">15 楼</a></span>

		</div></th>
	</tr></tbody></table>
</div>

<a name="5772644" data-mx-warn="Empty URL"></a>
<div class="t t2"><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570977545-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>bingkan</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=735425" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570977545-fe8ef3331f97b66ca7156370f35bcf33.jpg" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_16"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">澄空一年生上学期</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570977545-f43195cd588caa26c296fcc61910b3e6.gif"><br>

<span class="user-info2" id="showface_16">
<span class="user-infoWrap2">


精华:

		<span class="s4">0</span>
<br>
发帖: <span class="s1 f9">53</span><br>
学分: <span class="s2 f9">0 点</span><br>
澄空币: <span class="s3 f9">599 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2012-02-02<br>
		最后登录:2014-06-29 <br><br> 
		</span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_5772644" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=11051522&amp;pid=5772644&amp;article=16" onclick="return sendurl(this,4,event)" id="quote_5772644" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=11051522&amp;pid=5772644&amp;article=16" id="modify_5772644" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=735425" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=11051522&amp;pid=5772644" onclick="return sendurl(this,8)" id="report_5772644" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=11051522&amp;uid=735425" title="只看该作者的所有回复" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('5772644')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_5772644" class="fl">&nbsp;</h1>
			

			<div id="p_5772644" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_5772644"><h6 class="quote">Quote:</h6><blockquote class="blockquote">引用第15楼201724于2013-08-09 13:40发表的&nbsp;&nbsp;:<br><br>输出的字模需要自己转换成32位的rgba</blockquote><br><br>试了好几个OD都跑步起来带壳的程序，根本无从分析你的代码啊……<br><br>前辈是怎么过TMD的anti-od的？<br><br>另外想问下前辈，apppatch.dll 为什么一定得放到plugin文件夹下才能加载？好奇怪的说<div id="alert_5772644" style="color: gray; margin-top: 30px; --darkreader-inline-color:#bfb9ac;" data-darkreader-inline-color="">[ 此帖被bingkan在2013-08-09 16:47重新编辑 ]</div></div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_5772644" class="c"></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2013-08-09 16:31 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 16楼(bingkan) 的帖子');" data-mx-warn="Empty URL">16 楼</a></span>

		</div></th>
	</tr></tbody></table>
</div>

<a name="5774975" data-mx-warn="Empty URL"></a>
<div class="t t2"><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570977545-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>201724</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=822973" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570977545-c39d29f7268c7401c6f2efae70cc5e9b.jpeg" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_17"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">澄空新生</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570977545-be59bc9a4edb96b6b54ba67c9267b93f.gif"><br>

<span class="user-info2" id="showface_17">
<span class="user-infoWrap2">


精华:

		<span class="s4">0</span>
<br>
发帖: <span class="s1 f9">31</span><br>
学分: <span class="s2 f9">0 点</span><br>
澄空币: <span class="s3 f9">646 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2012-08-26<br>
		最后登录:2017-06-02 <br><br> 
		</span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_5774975" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=11051522&amp;pid=5774975&amp;article=17" onclick="return sendurl(this,4,event)" id="quote_5774975" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=11051522&amp;pid=5774975&amp;article=17" id="modify_5774975" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=822973" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=11051522&amp;pid=5774975" onclick="return sendurl(this,8)" id="report_5774975" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=11051522&amp;uid=822973" title="只看该作者的所有回复" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('5774975')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_5774975" class="fl">&nbsp;</h1>
			

			<div id="p_5774975" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_5774975"><h6 class="quote">Quote:</h6><blockquote class="blockquote">引用第16楼bingkan于2013-08-09 16:31发表的&nbsp;&nbsp;:<br><br><br>试了好几个OD都跑步起来带壳的程序，根本无从分析你的代码啊……<br><br>前辈是怎么过TMD的anti-od的？<br>.......</blockquote><br>加我Q527806988 问题随意。。</div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_5774975" class="c"></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2013-08-11 14:22 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 17楼(201724) 的帖子');" data-mx-warn="Empty URL">17 楼</a></span>

		</div></th>
	</tr></tbody></table>
</div>

<a name="a" data-mx-warn="Empty URL"></a><a name="5774980" data-mx-warn="Empty URL"></a>
<div class="t t2"><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570977545-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>201724</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=822973" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570977545-c39d29f7268c7401c6f2efae70cc5e9b.jpeg" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_18"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">澄空新生</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570977545-be59bc9a4edb96b6b54ba67c9267b93f.gif"><br>

<span class="user-info2" id="showface_18">
<span class="user-infoWrap2">


精华:

		<span class="s4">0</span>
<br>
发帖: <span class="s1 f9">31</span><br>
学分: <span class="s2 f9">0 点</span><br>
澄空币: <span class="s3 f9">646 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2012-08-26<br>
		最后登录:2017-06-02 <br><br> 
		</span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_5774980" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=11051522&amp;pid=5774980&amp;article=18" onclick="return sendurl(this,4,event)" id="quote_5774980" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=11051522&amp;pid=5774980&amp;article=18" id="modify_5774980" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=822973" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=11051522&amp;pid=5774980" onclick="return sendurl(this,8)" id="report_5774980" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=11051522&amp;uid=822973" title="只看该作者的所有回复" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('5774980')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_5774980" class="fl">&nbsp;</h1>
			

			<div id="p_5774980" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_5774980"><h6 class="quote">Quote:</h6><blockquote class="blockquote">引用第16楼bingkan于2013-08-09 16:31发表的&nbsp;&nbsp;:<br><br><br>试了好几个OD都跑步起来带壳的程序，根本无从分析你的代码啊……<br><br>前辈是怎么过TMD的anti-od的？<br>.......</blockquote><br>azure的补丁 - -</div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_5774980" class="c"></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2013-08-11 14:23 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 18楼(201724) 的帖子');" data-mx-warn="Empty URL">18 楼</a></span>

		</div></th>
	</tr></tbody></table>
</div>

</form>
<div class="t3" style="margin:initial"><table cellspacing="0" cellpadding="0" width="100%" align="center">
	<tbody><tr><td align="left"></td>
		<td valign="center" align="right">
		<a class="abtn f_two" id="readlog" onclick="sendmsg('pw_ajax.php?action=readlog','',this.id);" data-mx-warn="Empty URL">帖子浏览记录<img src="assets/1570977545-5c8e409588b73ce4284cf5b9bd619e15.gif"></a>
		<select onchange="Fjump(this.options[this.selectedIndex].value)"><option value="" selected="">快速跳至</option>
<option value="1">&gt;&gt; 『澄空学园 办公楼区』</option>
<option value="2"> &nbsp;|- 【校园公告栏】</option>
<option value="5"> &nbsp;|- 【论坛意见箱】</option>
<option value="113">&gt;&gt; 『澄空学园 资讯社』</option>
<option value="47"> &nbsp;|- 【新鲜速报】</option>
<option value="103"> &nbsp;|- 【新作介绍】</option>
<option value="8"> &nbsp; &nbsp;|-  【电子杂志下载区】</option>
<option value="104"> &nbsp;|- 【杂志专题】</option>
<option value="7">&gt;&gt; 『澄空学园 教学楼区』</option>
<option value="62"> &nbsp;|- 【AGE主题学部】</option>
<option value="39"> &nbsp;|- 【Akabeesoft2主题学部】</option>
<option value="100"> &nbsp;|- 【AUGUST主题学部】</option>
<option value="42"> &nbsp;|- 【CIRCUS主题学部】</option>
<option value="40"> &nbsp;|- 【Cotton-Nekoneko主题学部】</option>
<option value="64"> &nbsp;|- 【GIGA主题学部】</option>
<option value="38"> &nbsp;|- 【Key主题学部】</option>
<option value="10"> &nbsp;|- 【KID主题学部】</option>
<option value="37"> &nbsp;|- 【Leaf主题学部】</option>
<option value="70"> &nbsp;|- 【minori主题学部】</option>
<option value="12"> &nbsp;|- 【Navel主题学部】</option>
<option value="65"> &nbsp;|- 【Nitro+主题学部】</option>
<option value="14"> &nbsp;|- 【Type-Moon应援会】</option>
<option value="17"> &nbsp; &nbsp;|-  【TM精华区】</option>
<option value="98"> &nbsp;|- 【Will主题学部】</option>
<option value="116"> &nbsp;|- 【FAVORITE主题学部】</option>
<option value="108"> &nbsp;|- 【ALcot主题学部】</option>
<option value="55"> &nbsp;|- 【GALGAME综合作品讨论室】</option>
<option value="97"> &nbsp; &nbsp;|-  【Light主题学部】</option>
<option value="117"> &nbsp; &nbsp;|-  【CUFFS主题学部】</option>
<option value="15"> &nbsp; &nbsp;|-  【Liar Soft主题学部】</option>
<option value="57"> &nbsp; &nbsp;|-  【Purple 主题学部】</option>
<option value="13"> &nbsp; &nbsp;|-  【工画堂主题学部】</option>
<option value="35"> &nbsp;|- 【GALGAME综合杂谈室】</option>
<option value="99"> &nbsp;|- 【ぱれっと主题学部】</option>
<option value="122"> &nbsp;|- 【SAGA PLANETS研讨室】</option>
<option value="123"> &nbsp;|- 【Lump of Sugar 研讨室】</option>
<option value="86">&gt;&gt; 『澄空学园 图书馆』</option>
<option value="80"> &nbsp;|- 【游戏鉴赏室】</option>
<option value="56"> &nbsp;|- 【GALGAME攻略馆】</option>
<option value="115"> &nbsp;|- 【作品出处问询室】</option>
<option value="63"> &nbsp;|- 【Galgame疑问求助室】</option>
<option value="18">&gt;&gt; 『澄空学园 教辅楼区』</option>
<option value="73"> &nbsp;|- 【同人游戏区】</option>
<option value="60"> &nbsp;|- 【二次元轻小说社】</option>
<option value="20"> &nbsp;|- 【日语自学教室】</option>
<option value="61"> &nbsp; &nbsp;|-  【日语学习资料区】</option>
<option value="118"> &nbsp; &nbsp;|-  【日语参考文章区】</option>
<option value="21"> &nbsp;|- 【一般游戏社团】</option>
<option value="24"> &nbsp;|- 【多媒体课堂】</option>
<option value="88">&gt;&gt; 『澄空学园 原创综合区』</option>
<option value="79"> &nbsp;|- 【原创游戏部】</option>
<option value="36"> &nbsp; &nbsp;|-  【ss-square】</option>
<option value="89"> &nbsp;|- 【MAD研究室】</option>
<option value="91"> &nbsp;|- 【莉可屋 REC ROOM】</option>
<option value="119"> &nbsp; &nbsp;|-  【澄空百合社翻唱作品】</option>
<option value="19"> &nbsp;|- 【澄空文学部】</option>
<option value="120"> &nbsp; &nbsp;|-  【落日余晖】</option>
<option value="23"> &nbsp;|- 【绘画工房】</option>
<option value="69"> &nbsp;|- 【活动投票区】</option>
<option value="74"> &nbsp;|- 【友谊赛投票区】</option>
<option value="58"> &nbsp;|- 【澄空部活室】</option>
<option value="41"> &nbsp;|- 【暑假原创作品活动专区】</option>
<option value="59"> &nbsp;|- 【实物周边交流区】</option>
<option value="85"> &nbsp; &nbsp;|-  【ComicMarket相关资料】</option>
<option value="82"> &nbsp; &nbsp;|-  【新品介绍】</option>
<option value="84"> &nbsp; &nbsp;|-  【综合交流】</option>
<option value="83"> &nbsp; &nbsp;|-  【好物收集】</option>
<option value="81"> &nbsp; &nbsp;|-  【交易求购】</option>
<option value="95"> &nbsp;|- 【澄空放送部】</option>
<option value="111"> &nbsp; &nbsp;|-  【放送策划室】</option>
<option value="27"> &nbsp;|- 【水下乐园LeMU】</option>
<option value="46"> &nbsp; &nbsp;|-  【美工作品收藏室】</option>
<option value="26"> &nbsp; &nbsp;|-  【COS自爆馆】</option>
<option value="90"> &nbsp; &nbsp;|-  【澄空期刊室】</option>
<option value="71"> &nbsp;|- 【澄空演剧部】</option>
<option value="9"> &nbsp; &nbsp;|-  演剧部排练室</option>
<option value="52"> &nbsp;|- 【废帖回收站】</option>
<option value="29">&gt;&gt; 『澄空学园 好物交流站』</option>
<option value="50"> &nbsp;|- 【澄空学园字幕作品】</option>
<option value="51"> &nbsp;|- 【澄空学园漫画作品】</option>
<option value="77"> &nbsp;|- 【游戏汉化交流区】</option>
<option value="28"> &nbsp; &nbsp;|-  【CK-GAL中文化小组】</option>
<option value="106"> &nbsp; &nbsp;|-  【PRO2】</option>
<option value="49"> &nbsp; &nbsp;|-      【桜】</option>
<option value="30"> &nbsp;|- 【资源求助区】</option>
<option value="32"> &nbsp;|- 【澄空音乐厅】</option>
<option value="33"> &nbsp;|- 【澄空美术馆】</option>
<option value="34"> &nbsp;|- 【动漫租售屋】</option>
<option value="44">&gt;&gt; 『澄空学园 课余工作区』</option>
<option value="45"> &nbsp;|- 【澄空漫画汉化组】</option>
<option value="48"> &nbsp;|-  【澄空学园字幕组】</option>
<option value="101"> &nbsp; &nbsp;|-  字幕组资料区</option>
<option value="72"> &nbsp;|- 【澄空学园分流组】</option>
<option value="87"> &nbsp;|- 【澄空学园新闻组】</option>
<option value="96"> &nbsp;|- 【澄空学园文学社】</option>
<option value="75"> &nbsp;|- 【澄空学园百合社】</option>
<option value="112"> &nbsp;|- 【澄空学园编辑部】</option>
<option value="114"> &nbsp;|- 【澄空学园美工部】</option>
<option value="121"> &nbsp;|-  【澄空祭运行委员会】</option>
</select></td>
		
	</tr>
	<tr><td style="padding-top: 12px;text-align: left;"><img src="assets/1570977545-ca4a91079181c2a5cb3514b2e5b5f035.gif" align="absbottom"> <b><a href="https://bbs.sumisora.net/index.php" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">『澄空学园』</a> » <a href="https://bbs.sumisora.net/thread.php?fid=78&amp;page=3" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">【汉化破解研讨室】</a></b> </td>
	<td style="padding-top: 12px;text-align: right;"><a href="https://bbs.sumisora.net/post.php?action=reply&amp;fid=78&amp;tid=11051522" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img src="assets/1570977545-132cb83b134d7ecd9b390389d489bc43.png"></a>

<a href="https://bbs.sumisora.net/post.php?fid=78" style="margin-left:.5em" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img src="assets/1570977545-8cab7ee31ae503cf78e5410d40cec291.png" id="td_post1"></a>
</td>
	</tr>
</tbody></table></div>




<form name="FORM" method="post" action="post.php?" enctype="multipart/form-data" onsubmit="return checkpost(document.FORM);">
<div class="t" style="margin-top:8px"><table cellspacing="0" cellpadding="0" align="center" width="100%">
	<tbody><tr>
		<td class="h" colspan="3"><b>快速发帖</b></td>
	</tr>
	<tr></tr>
	<tr class="tr2"><td colspan="100" style="border-bottom: 0px; --darkreader-inline-border-bottom: initial;" data-darkreader-inline-border-bottom=""></td></tr>
	<tr>
		<td valign="top" width="20%" class="f_one" style="padding:7px">
		<fieldset id="smiliebox" style="border: 1px solid rgb(213, 229, 232); --darkreader-inline-border-top:#354e51; --darkreader-inline-border-right:#354e51; --darkreader-inline-border-bottom:#354e51; --darkreader-inline-border-left:#354e51;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
		<legend>内容</legend>
		<br>
		<input type="checkbox" name="atc_usesign" value="1" checked="">使用签名<br>
		<input type="checkbox" name="atc_convert" value="1" checked="">Wind Code自动转换 <br>
	 	<input type="checkbox" id="atc_autoimg" name="atc_autoimg" value="1" onchange="onAutoImgchange()" checked="" title="此设置会记在浏览器中"><label for="atc_autoimg" title="此设置会记在浏览器中">自动分析img</label><br><br>
	 	
		<input type="checkbox" name="atc_requiresell" value="1" disabled="">出售此帖
		<input class="input" type="text" maxlength="3" size="3" name="atc_money" value="0">
		<br>
		<input type="checkbox" name="atc_requirervrc" value="1">加密此帖
		<input class="input" type="text" maxlength="6" size="3" name="atc_rvrc" value="0">
		<br>
		<br><br><a href="https://bbs.sumisora.net/read.php?tid=10925672" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">如何在帖子中贴图？</a>
		<br><a href="https://bbs.sumisora.net/read.php?tid=10942243" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Wind Code使用教程</a>
		<br><a href="https://bbs.sumisora.net/yume/recover/" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">恢复帖子内容</a>
		</fieldset>
		</td>
		<td width="60%" class="f_one" style="padding:7px">
		<div>


<blockquote style="width: 96%;" class="blockquote">澄空娘：『发帖前不看版规什么的，最讨厌了！
』</blockquote>

		<input type="text" class="input" name="atc_title" value="Re:PJADV引擎汉化研究" size="65">
		

		 认证码: <input class="input" type="text" name="gdcode" size="5" tabindex="6" onfocus="try{opencode('menu_gd',this)}catch(e){}"><br>
		

		</div><div style="padding:.3em 0">
		</div>
		<textarea onkeydown="quickpost(event)" id="atc_content" name="atc_content" rows="8" style="width:96%"></textarea>
		
		
		
		
		
		<div style="margin:5px 0">
		<div style="padding: 4px 10px 0px 0px; float: left; color: rgb(136, 136, 136); --darkreader-inline-color:#bfb9ac;" data-darkreader-inline-color="">按 Ctrl+Enter 直接提交</div>
		<input class="btn" type="submit" name="Submit" value=" 提 交 "></div>
		</td>
		<td width="20%" class="f_one">
		<div style="padding:3px; text-align:center; width:200px;">
		<fieldset id="smiliebox" style="border: 1px solid rgb(213, 229, 232); --darkreader-inline-border-top:#354e51; --darkreader-inline-border-right:#354e51; --darkreader-inline-border-bottom:#354e51; --darkreader-inline-border-left:#354e51;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<legend>表情</legend>
			<div id="menu_show"></div>
<span style="float:right; margin:3px 10px 5px;"><a id="td_face" style="cursor:pointer;" onclick="showDefault();" align="absmiddle" unselectable="on" data-mx-warn="Empty URL">[更多]</a></span>
<span style="float:left; margin:3px 10px 5px;"><a id="td_generalface" style="cursor:pointer;" onclick="showfaces();$('#td_generalface').fadeOut();" align="absmiddle" data-mx-warn="Empty URL">[显示表情]</a></span>
		</fieldset></div>
		
		
		</td>
	</tr>
</tbody></table></div></form>







</div>
<div id="bottom"></div><br>
<center class="gray">
<small><span id="windspend">Total 0.047029(s) query 6, Time is now 10-13 22:31, 
Load is low.
</span> <br>
Powered by <a href="http://www.phpwind.net/" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><b>PHPWind</b></a> <a href="http://www.phpwind.net/" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><b style="color: rgb(255, 153, 0); --darkreader-inline-color:#f7b24b;" data-darkreader-inline-color="">v6.3.2</b></a> Code © 2003-08 <a href="http://www.phpwind.com/" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><b>PHPWind.com</b></a> Corporation</small>
</center><br>
<div id="footer">
	<span class="f12 fl"></span><a href="https://bbs.sumisora.net/sendmail.php" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Contact us</a>

</div>
</div>
        
      </div>
    </body>
  </html>