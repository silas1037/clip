
  <!DOCTYPE html>
  <html id="" class="">
    <!-- OriginalSrc: https://bbs.sumisora.net/read.php?tid=10917250&fpage=10 -->
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />

      <title>会解压，不会压缩了|【汉化破解研讨室】|【游戏汉化交流区】 - 『澄空学园』 GalGame专题网</title>
      

<link rel="stylesheet" type="text/css" href="assets/1570946278-5f21d2d0f0e14c54e3e080ff47c8ec08.css" referrerpolicy="no-referrer">
<link type="text/css" href="assets/1570946278-2f10d407050ab6b2185fb483267feb32.css" rel="stylesheet" referrerpolicy="no-referrer">
<link href="assets/1570946278-6ea61090578ddc8e91dc9b26707cebc8.css" rel="stylesheet" type="text/css" referrerpolicy="no-referrer">
<link rel="stylesheet" type="text/css" href="assets/1570946278-46d427da9cafb653c4ed606490c99b3a.css" referrerpolicy="no-referrer">


<style class="darkreader darkreader--fallback" media="screen"></style>
<style class="darkreader darkreader--text" media="screen"></style>
<style class="darkreader darkreader--invert" media="screen"></style>
<style class="darkreader darkreader--inline" media="screen">[data-darkreader-inline-bgcolor] {
  background-color: var(--darkreader-inline-bgcolor) !important;
}
[data-darkreader-inline-bgimage] {
  background-image: var(--darkreader-inline-bgimage) !important;
}
[data-darkreader-inline-border] {
  border-color: var(--darkreader-inline-border) !important;
}
[data-darkreader-inline-border-bottom] {
  border-bottom-color: var(--darkreader-inline-border-bottom) !important;
}
[data-darkreader-inline-border-left] {
  border-left-color: var(--darkreader-inline-border-left) !important;
}
[data-darkreader-inline-border-right] {
  border-right-color: var(--darkreader-inline-border-right) !important;
}
[data-darkreader-inline-border-top] {
  border-top-color: var(--darkreader-inline-border-top) !important;
}
[data-darkreader-inline-boxshadow] {
  box-shadow: var(--darkreader-inline-boxshadow) !important;
}
[data-darkreader-inline-color] {
  color: var(--darkreader-inline-color) !important;
}
[data-darkreader-inline-fill] {
  fill: var(--darkreader-inline-fill) !important;
}
[data-darkreader-inline-stroke] {
  stroke: var(--darkreader-inline-stroke) !important;
}
[data-darkreader-inline-outline] {
  outline-color: var(--darkreader-inline-outline) !important;
}</style>
<style class="darkreader darkreader--user-agent" media="screen">html {
    background-color: #191a1b !important;
}
html, body, input, textarea, select, button {
    background-color: #191a1b;
}
html, body, input, textarea, select, button {
    border-color: #5a5956;
    color: #f0ebe2;
}
a {
    color: #4791e7;
}
table {
    border-color: #4f4e4c;
}
::placeholder {
    color: #bfb9ac;
}
::selection {
    background-color: #125cb4;
    color: #fffffd;
}
::-moz-selection {
    background-color: #125cb4;
    color: #fffffd;
}
input:-webkit-autofill,
textarea:-webkit-autofill,
select:-webkit-autofill {
    background-color: #565a0f !important;
    color: #f0ebe2 !important;
}
::-webkit-scrollbar {
    background-color: #1d1f1f;
    color: #cbc5b9;
}
::-webkit-scrollbar-thumb {
    background-color: #2c2d2d;
}
::-webkit-scrollbar-thumb:hover {
    background-color: #343636;
}
::-webkit-scrollbar-thumb:active {
    background-color: #404142;
}
::-webkit-scrollbar-corner {
    background-color: #191a1b;
}
* {
    scrollbar-color: #2c2d2d #1d1f1f;
}</style>
<style class="darkreader darkreader--sync" media="screen"></style>
<style class="darkreader darkreader--override" media="screen">.jfk-bubble {
    background-color: #000000 !important;
}
.vimvixen-hint {
    background-color: #765500 !important;
    border-color: #d5b22e !important;
    color: #f9edcc !important;
}</style>
<style class="darkreader darkreader--sync" media="screen"></style>
<style class="darkreader darkreader--sync" media="screen"></style>
<style class="darkreader darkreader--sync" media="screen"></style>
<style type="text/css"> 
.tr3 td,.tr3 th{border-right:1px solid #D5E5E8;}
.y-style{text-align:center;}
.tr1 th{border-right:1px solid #D5E5E8;}
.tr1 td.td1{border-left:0}
 

.signature img { max-height:250px !important; }
</style>
<style class="darkreader darkreader--sync" media="screen"></style>
<style type="text/css">@keyframes fadeInOpacity{0%{opacity:0}to{opacity:1}}:hover>*>.fbvd--wrapper{animation-name:fadeInOpacity;animation-duration:.3s;opacity:1}.fbvd--wrapper{position:absolute;top:10px;left:10px;opacity:0;text-align:center;margin:0;z-index:5}.fbvd--wrapper a{background: url("") no-repeat 3px 4.55px; background-color: #fff; display:inline-block;font:700 14px Helvetica,Arial,sans-serif;color:#4b4f56;text-decoration:none;vertical-align:middle;padding:0px 8px 0px;margin-right:8px;border-radius:2px; line-height: 22px; padding-left:19px; border: 1px solid #e7e7e7; background-size: 13px}.fbvd--wrapper a:last-child{margin-right:0}.fbvd--wrapper a:hover{text-decoration:none}.fbvd--wrapper a:focus{box-shadow:0 0 1px 2px rgba(88,144,255,.75),0 1px 1px rgba(0,0,0,.15);outline:none}.fbvd--wrapper b{font-size:13px;position:relative;top:1px;color:#3b5998;font-weight:400}</style>
<style class="darkreader darkreader--sync" media="screen"></style>

      <style class="mx-wc-style">
        .mx-wc-main img {max-width: 100%;}
        .mx-wc-main{
          box-sizing: content-box;
          background-color: rgb(25, 26, 27) !important;
          margin: 0 auto;
          margin-top: 20px;
          max-width: 1349px;
        }
        @media (min-width: 768px) {
          .mx-wc-main { padding: 15px 15px 80px 15px }
        }
        @media (max-width: 767px) {
          .mx-wc-main { padding: 15px 3px 80px 3px }
        }
  
      </style>
    </head>
    <body style="background-color: #ffffff !important; min-height: 100%; height: auto; position: static !important; overflow: auto !important; padding-bottom: 0px !important;" id="" class="">
      <div class="mx-wc-main">
        <div id="wrapA" class="mx-wc-selected-elem mx-wc-1570946278" style="display: block; float: none !important; position: relative !important; top: 0px !important; left: 0px !important; margin: 0px !important; flex: unset !important; width: 100% !important; max-width: 100% !important; box-sizing: border-box !important;">

<div id="header">
<div class="toptool tar">	<span>
	<a href="https://bbs.sumisora.net/read.php?tid=10917250&amp;fpage=10&amp;skinco=simple" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">手机版</a>

	| <a style="cursor:pointer;" id="td_skin" data-mx-warn="Empty URL">风格切换<img src="assets/1570946278-5c8e409588b73ce4284cf5b9bd619e15.gif"></a>
	| <a href="https://bbs.sumisora.net/read.php?tid=10894912" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">学生手册</a>
	</span>
</div>
<table cellspacing="0" cellpadding="0" align="center" width="100%">
<tbody><tr>
	<td class="banner"><a href="https://bbs.sumisora.net/" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img id="forumlogo" src="assets/1570946278-7ac78a0e1e3ce795251288b0c8bd4b1b.png"></a></td>
	<td class="banner" id="banner" align="right"></td>
</tr>
<tr><td align="center" height="1" colspan="2"></td></tr>
</tbody></table>
<div id="h_guide" class="guide" colspan="2"><span class="s3">»</span>

	<span style="font-weight:bold" class="s3">silasu</span>&nbsp;<a href="https://bbs.sumisora.net/login.php?action=quit&amp;verify=034be2bd" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">退出</a> |
	<a id="td_profile" href="https://bbs.sumisora.net/profile.php" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">控制面板</a>
	| <a id="td_msg" href="https://bbs.sumisora.net/message.php" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">

	短消息</a>

	| <a id="td_sort" href="https://bbs.sumisora.net/sort.php" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">统计排行</a>

	| <a href="https://bbs.sumisora.net/member.php" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">会员</a>

	| <a href="https://bbs.sumisora.net/search.php" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">搜索</a>
	| <a style="cursor:pointer;" id="td_hack" data-mx-warn="Empty URL">社区服务<img src="assets/1570946278-5c8e409588b73ce4284cf5b9bd619e15.gif"></a>

	| <a href="https://bbs.sumisora.net/hack.php?H_name=galgamevote" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">GALGAME角色人气投票活动</a>

 | <a href="https://bbs.sumisora.net/yume/polls/" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">近期关注</a><!--[if lte IE 6]>
 | <a href="read.php?tid=10955539" style="color:red">本站已停止支持IE6，请升级或更换浏览器</a>
<![endif]-->
</div>



</div>
<div id="main">




<div class="t3" style="margin-top:8px"><table width="100%" cellspacing="0" cellpadding="0" align="center">
	<tbody><tr><td class="b"><img src="assets/1570946278-ca4a91079181c2a5cb3514b2e5b5f035.gif" align="absmiddle"> <a href="https://bbs.sumisora.net/index.php" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">『澄空学园』</a> » <a href="https://bbs.sumisora.net/thread.php?fid=77" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">【游戏汉化交流区】</a> » <a href="https://bbs.sumisora.net/thread.php?fid=78&amp;page=10" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">【汉化破解研讨室】</a> » <a href="https://bbs.sumisora.net/read.php?tid=10917250" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">会解压，不会压缩了</a> <a href="https://bbs.sumisora.net/rss.php?tid=10917250" target="_blank" title="Rss订阅本帖最新内容" referrerpolicy="no-referrer" rel="noopener noreferrer"><img align="absmiddle" src="assets/1570946278-b4369735f1bfb33ab69477230a8ba635.png"></a></td></tr>
</tbody></table></div>

<!--ads begin-->

<!--ads end-->
<div class="t3"><table width="100%" align="center" cellspacing="0" cellpadding="0">
	<tbody><tr><td align="left"><div class="fl"></div></td><td align="right" style="padding-bottom:.2em"><a href="https://bbs.sumisora.net/post.php?action=reply&amp;fid=78&amp;tid=10917250" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img src="assets/1570946278-132cb83b134d7ecd9b390389d489bc43.png"></a>

<a href="https://bbs.sumisora.net/post.php?fid=78" style="margin-left:.5em" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img src="assets/1570946278-8cab7ee31ae503cf78e5410d40cec291.png" id="td_post"></a>

</td></tr>
</tbody></table></div>



<form name="delatc" method="post">


<div class="t" style="margin-bottom: 0px; border-bottom: 0px; --darkreader-inline-border-bottom: initial;" data-darkreader-inline-border-bottom=""><table cellspacing="0" cellpadding="0" width="100%">
	<tbody><tr><th class="h"><strong class="fl w"><b>本页主题:</b> 会解压，不会压缩了</strong>
	<span class="fr w"><a data-mx-warn="Empty URL">&nbsp;</a><a href="https://bbs.sumisora.net/job.php?action=previous&amp;fid=78&amp;tid=10917250&amp;fpage=10&amp;goto=previous" class="fn" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">上一主题</a> | <a href="https://bbs.sumisora.net/job.php?action=previous&amp;fid=78&amp;tid=10917250&amp;fpage=10&amp;goto=next" class="fn" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">下一主题</a> | <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span> </th>
	</tr>
	<tr><td></td></tr>
	<tr class="tr2"><td colspan="2" class="tar">

		<a id="usetool" style="cursor:pointer" onclick="sendmsg('pw_ajax.php?action=usetool','',this.id)" data-mx-warn="Empty URL">[使用道具]</a>

		<br></td>
	</tr>
	<tr><td></td></tr>
</tbody></table></div>

<a name="tpc" data-mx-warn="Empty URL"></a>
<div class="t t2" style="border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top=""><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570946278-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>37859365</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=263811" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570946278-bc3b3631a24154c2d9ba8189508a5212.gif" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_0"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">澄空新生</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570946278-be59bc9a4edb96b6b54ba67c9267b93f.gif"><br>

<span class="user-info2" id="showface_0">
<span class="user-infoWrap2">


精华:

		<span class="s4">0</span>
<br>
发帖: <span class="s1 f9">33</span><br>
学分: <span class="s2 f9">0 点</span><br>
澄空币: <span class="s3 f9">452 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2009-02-04<br>
		最后登录:2017-05-02 <br><br> 
		</span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_tpc" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=10917250&amp;pid=tpc&amp;article=0" onclick="return sendurl(this,4,event)" id="quote_tpc" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=10917250&amp;pid=tpc&amp;article=0" id="modify_tpc" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=263811" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=10917250&amp;pid=tpc" onclick="return sendurl(this,8)" id="report_tpc" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=10917250&amp;uid=263811" title="只看楼主的所有帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('tpc')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_tpc" class="fl"><img src="assets/1570946278-53adf3e24557240f4f639532cae126f5.gif" align="left" border="0">&nbsp;会解压，不会压缩了</h1>
			

			<div id="p_tpc" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_tpc">朋友用Delphi写的某个打包文件的解压源码，但是压缩回去不知道怎么写了，因为是新手，所以希望大大点拨一下<img src="assets/1570946278-8a11200216092878ad952c7d59c5a9a4.gif"><br><br>谢谢~<br><br>unit PVM_p;<br><br>interface<br><br>uses<br>&nbsp;&nbsp;Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,<br>&nbsp;&nbsp;Dialogs, StdCtrls, StrUtils;<br><br>type<br>&nbsp;&nbsp;TForm1 = class(TForm)<br>&nbsp;&nbsp;&nbsp;&nbsp;Edit1: TEdit;<br>&nbsp;&nbsp;&nbsp;&nbsp;Button1: TButton;<br>&nbsp;&nbsp;&nbsp;&nbsp;Label1: TLabel;<br>&nbsp;&nbsp;&nbsp;&nbsp;Label2: TLabel;<br>&nbsp;&nbsp;&nbsp;&nbsp;Button2: TButton;<br>&nbsp;&nbsp;&nbsp;&nbsp;Button3: TButton;<br>&nbsp;&nbsp;&nbsp;&nbsp;OpenDialog1: TOpenDialog;<br>&nbsp;&nbsp;&nbsp;&nbsp;Memo1: TMemo;<br>&nbsp;&nbsp;&nbsp;&nbsp;procedure Button2Click(Sender: TObject);<br>&nbsp;&nbsp;&nbsp;&nbsp;procedure FormCreate(Sender: TObject);<br>&nbsp;&nbsp;&nbsp;&nbsp;procedure Button1Click(Sender: TObject);<br>&nbsp;&nbsp;&nbsp;&nbsp;procedure Button3Click(Sender: TObject);<br>&nbsp;&nbsp;private<br>&nbsp;&nbsp;&nbsp;&nbsp;{ Private declarations }<br>&nbsp;&nbsp;public<br>&nbsp;&nbsp;&nbsp;&nbsp;{ Public declarations }<br>&nbsp;&nbsp;&nbsp;&nbsp;function getfiledat(gfname:string; psize1,pos2:integer):string;<br>&nbsp;&nbsp;&nbsp;&nbsp;function getfiledati(gfname:string; psize1,pos2:integer):integer;<br>&nbsp;&nbsp;&nbsp;&nbsp;procedure FenGe_File(fname,patch,nname:string; psize,pos:integer);<br>&nbsp;&nbsp;end;<br><br>var<br>&nbsp;&nbsp;Form1: TForm1;<br>&nbsp;&nbsp;FileName,app_0:string;<br><br><br>&nbsp;&nbsp;<br>implementation<br><br>{$R *.dfm}<br><br>//取指定文件的 指定大小 指定位置的 字符串<br>function TForm1.getfiledat(gfname:string; psize1,pos2:integer):string;<br>var<br>&nbsp;&nbsp;iFileHandle: Integer;<br>&nbsp;&nbsp;iFileLength: Integer;<br>&nbsp;&nbsp;Buffer: PChar;<br>begin<br>iFileHandle := FileOpen(gfname, fmOpenRead or fmShareDenyWrite);<br>iFileLength := FileSeek(iFileHandle,psize1,0);<br>FileSeek(iFileHandle,pos2,0);<br>Buffer := PChar(AllocMem(iFileLength+1));<br>FileRead(iFileHandle, Buffer^, iFileLength);<br>FileClose(iFileHandle);<br>Result:= Buffer;<br>end;<br><br>//取指定文件的 指定大小 指定位置的 数值<br>function TForm1.getfiledati(gfname:string; psize1,pos2:integer):integer;<br>var<br>&nbsp;&nbsp;iFileHandle: Integer;<br>&nbsp;&nbsp;Buffer: integer;<br>begin<br>iFileHandle := FileOpen(gfname, fmOpenRead or fmShareDenyWrite);<br>FileSeek(iFileHandle,pos2,0);<br>FileRead(iFileHandle, Buffer, psize1); <br>Result:= Buffer;<br>FileClose(iFileHandle);<br>end;<br><br><br>//分割指定文件&nbsp;&nbsp;文件名 保存路径 新文件名 大小 位置<br>procedure TForm1.FenGe_File(fname,patch,nname:string; psize,pos:integer);<br>var<br>fStream: TFileStream;<br>toStream: TMemoryStream;<br>begin<br>if DirectoryExists(patch)=false then exit;<br><br>fStream := TFileStream.Create(fname, fmOpenRead or fmShareDenyWrite);<br>toStream := TMemoryStream.Create;<br>toStream.Clear;<br>fStream.Position :=pos;<br>toStream.CopyFrom(fStream, psize);<br>toStream.SaveToFile(patch+'\'+nname);<br><br>fStream.Free;<br>toStream.Free;<br>end;<br><br><br>//打开文件按钮<br>procedure TForm1.Button1Click(Sender: TObject);<br>var<br>head,fn1:string;<br>pfs,d,i:integer;<br>begin<br>&nbsp;&nbsp;//初始化显示信息<br>&nbsp;&nbsp;edit1.Text:='';<br>&nbsp;&nbsp;label2.Caption:='PVR Files';<br>&nbsp;&nbsp;memo1.Clear;<br><br>&nbsp;&nbsp;//打开文件对话框 如果文件打开则显示到编辑框<br>&nbsp;&nbsp;//设置打开对话框的 路径 标题 文件类型 等信息<br>&nbsp;&nbsp;opendialog1.InitialDir:=app_0;<br>&nbsp;&nbsp;opendialog1.Title:='Please Open A PVM File ...';<br>&nbsp;&nbsp;opendialog1.Filter:='PVM File (*.PVM)|*.pvm|All File Type (*.*)|*.*';<br>&nbsp;&nbsp;if opendialog1.Execute then<br>&nbsp;&nbsp;&nbsp;&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileName:= opendialog1.FileName;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;edit1.Text:= FileName ;<br>&nbsp;&nbsp;&nbsp;&nbsp;end;<br><br>&nbsp;&nbsp;//如果未打开文件则结束<br>&nbsp;&nbsp;if edit1.Text='' then exit;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;//判断文件头部是否正确 否则报告错误并结束<br>&nbsp;&nbsp;head := getfiledat(FileName,4,0);<br>&nbsp;&nbsp;if head&lt;&gt;'PVMH' then<br>&nbsp;&nbsp;&nbsp;&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;edit1.Text:='';<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showmessage('Not Open PVM File !');<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit;<br>&nbsp;&nbsp;&nbsp;&nbsp;end;<br><br>&nbsp;&nbsp;//获取文件数量并显示<br>&nbsp;&nbsp;pfs:= getfiledati(FileName,2,10);<br>&nbsp;&nbsp;label2.Caption:='PVR Files : '+inttostr(pfs);<br><br>&nbsp;&nbsp;//列出 PVM 文件的 PVR 文件列表<br>&nbsp;&nbsp;i:=14;<br>&nbsp;&nbsp;for d := 1 to pfs do<br>&nbsp;&nbsp;&nbsp;&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fn1:= getfiledat(FileName,28,i);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memo1.Lines.Add(fn1);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i:=i+38;<br>&nbsp;&nbsp;&nbsp;&nbsp;end;<br><br>end;<br><br><br>//关闭程序按钮<br>procedure TForm1.Button2Click(Sender: TObject);<br>begin<br>close;<br>end;<br><br><br>procedure TForm1.Button3Click(Sender: TObject);<br>var<br>i,d,si,pfs:integer;<br>s,sn,se,fn1:string;<br>fpos,fstart,fsize:integer;<br><br>begin<br>//判断文件是否打开&nbsp;&nbsp;未打开提示打开 打开提示注册<br>if edit1.Text='' then<br>&nbsp;&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;showmessage('Please Open A PVM File !');<br>&nbsp;&nbsp;&nbsp;&nbsp;exit;<br>&nbsp;&nbsp;end<br>else<br>&nbsp;&nbsp;memo1.Clear;<br><br>//取打开文件的文件名<br>SN:= ExtractFileName(FileName);<br>SE:= ExtractFileExt(FileName);<br>Si:= length(WideString(SN))- length(SE);<br>S:= leftstr(SN,Si);<br>S:=app_0+s;<br>//根据文件名创建 文件夹<br>if DirectoryExists(s)=false then<br>&nbsp;&nbsp;CreateDir(s)<br>else<br>&nbsp;&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;showmessage('Can Not Create Dir '+s+' !');<br>&nbsp;&nbsp;&nbsp;&nbsp;exit;<br>&nbsp;&nbsp;end;<br><br><br>//列出 PVM 文件的 PVR 文件列表<br>fstart:= getfiledati(FileName,4,4);<br>fpos:= fstart+8;<br>pfs:= getfiledati(FileName,2,10);<br>i:=14;<br>for d := 1 to pfs do<br>&nbsp;&nbsp;begin<br>&nbsp;&nbsp;&nbsp;&nbsp;fn1:= getfiledat(FileName,28,i);<br>&nbsp;&nbsp;&nbsp;&nbsp;fsize:= getfiledati(FileName,4,fpos+4);<br>&nbsp;&nbsp;&nbsp;&nbsp;FenGe_File(FileName,s,fn1+'.pvr',fsize+8,fpos);<br>&nbsp;&nbsp;&nbsp;&nbsp;if d &lt; pfs then<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fpos:=fpos+fsize+8;<br>&nbsp;&nbsp;&nbsp;&nbsp;memo1.Lines.Add(fn1);<br>&nbsp;&nbsp;&nbsp;&nbsp;i:=i+38;<br>&nbsp;&nbsp;end;<br>//提示分割完成<br>Showmessage('File Unpack OK !')<br><br>end;<br><br>//程序创建 初始化<br>procedure TForm1.FormCreate(Sender: TObject);<br>begin<br>app_0:=ExtractFilepath(paramstr(0));<br>edit1.Clear;<br>edit1.ReadOnly:=true;<br>label1.Caption:='File Name :';<br>label2.Caption:='PVR Files';<br>memo1.Clear;<br>end;<br><br>end.</div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_tpc" class="c"></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2009-05-28 03:39 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 楼主(37859365) 的帖子');" data-mx-warn="Empty URL">[楼 主]</a></span>

		</div></th>
	</tr></tbody></table>
</div>

<a name="2101901" data-mx-warn="Empty URL"></a>
<div class="t t2"><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570946278-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>holand</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=12839" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570946278-10ca70a4d7381f80e818b80d3e0822a3.gif" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_1"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">学生会干事</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570946278-87bc1a6e935264a57e50e0d513f23aa7.gif"><br>

<span class="user-info2" id="showface_1">
<span class="user-infoWrap2">


精华:

		<a href="https://bbs.sumisora.net/search.php?authorid=12839&amp;digest=1" target="_blank" class="s4 f9" referrerpolicy="no-referrer" rel="noopener noreferrer">2</a>
<br>
发帖: <span class="s1 f9">227</span><br>
学分: <span class="s2 f9">228 点</span><br>
澄空币: <span class="s3 f9">12493 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2005-06-26<br>
		最后登录:2018-11-19 <br><br> 
		</span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_2101901" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=10917250&amp;pid=2101901&amp;article=1" onclick="return sendurl(this,4,event)" id="quote_2101901" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=10917250&amp;pid=2101901&amp;article=1" id="modify_2101901" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=12839" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=10917250&amp;pid=2101901" onclick="return sendurl(this,8)" id="report_2101901" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=10917250&amp;uid=12839" title="只看该作者的所有回复" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('2101901')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_2101901" class="fl">&nbsp;</h1>
			

			<div id="p_2101901" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_2101901">看了一下代码，文件并不涉及压缩的问题，是常见的没有压缩和加密的封包类型。我想lz的朋友既然能写出解包程序那打包的程序应该也不成问题。如果楼主需要技术协助的话，请提供一个PVM文件。这类封包直接看封包文件比看代码更轻松。</div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_2101901" class="c"></div>

		<div><img class="signature" src="assets/1570946278-f23b8ffd0b6b327441aa828c9cd3243d.gif" align="absbottom"></div>
		<div class="signature" style="max-height:380px;maxHeight:380px; overflow:hidden;"><table width="100%"><tbody><tr><td><span class="highslide"><img src="assets/1570946278-ff3742aa5421026216472f96568d0238.JPG" border="0" style="max-width: 100%;max-height: 900px;"></span></td><td></td></tr></tbody></table></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2009-05-28 10:13 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 1楼(holand) 的帖子');" data-mx-warn="Empty URL">1 楼</a></span>

		</div></th>
	</tr></tbody></table>
</div>

<a name="2102239" data-mx-warn="Empty URL"></a>
<div class="t t2"><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570946278-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>37859365</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=263811" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570946278-bc3b3631a24154c2d9ba8189508a5212.gif" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_2"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">澄空新生</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570946278-be59bc9a4edb96b6b54ba67c9267b93f.gif"><br>

<span class="user-info2" id="showface_2">
<span class="user-infoWrap2">


精华:

		<span class="s4">0</span>
<br>
发帖: <span class="s1 f9">33</span><br>
学分: <span class="s2 f9">0 点</span><br>
澄空币: <span class="s3 f9">452 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2009-02-04<br>
		最后登录:2017-05-02 <br><br> 
		</span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_2102239" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=10917250&amp;pid=2102239&amp;article=2" onclick="return sendurl(this,4,event)" id="quote_2102239" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=10917250&amp;pid=2102239&amp;article=2" id="modify_2102239" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=263811" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=10917250&amp;pid=2102239" onclick="return sendurl(this,8)" id="report_2102239" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=10917250&amp;uid=263811" title="只看该作者的所有回复" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('2102239')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_2102239" class="fl">&nbsp;</h1>
			

			<div id="p_2102239" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_2102239"><h6 class="quote">Quote:</h6><blockquote class="blockquote">引用第1楼holand于2009-05-28 10:13发表的&nbsp;&nbsp;:<br>看了一下代码，文件并不涉及压缩的问题，是常见的没有压缩和加密的封包类型。我想lz的朋友既然能写出解包程序那打包的程序应该也不成问题。如果楼主需要技术协助的话，请提供一个PVM文件。这类封包直接看封包文件比看代码更轻松。</blockquote><br><br>是啊，就是普通的打包文件，没经过压缩的，我朋友因为也是刚学de没多久，所以没经验~<br><br>麻烦大大指点一下，文件在此<br><br><a href="http://www.damipan.com/file/1XMu3cp.html" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">http://www.damipan.com/file/1XMu3cp.html</a><br><br>谢谢了</div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_2102239" class="c"></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2009-05-28 14:08 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 2楼(37859365) 的帖子');" data-mx-warn="Empty URL">2 楼</a></span>

		</div></th>
	</tr></tbody></table>
</div>

<a name="2105195" data-mx-warn="Empty URL"></a>
<div class="t t2"><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570946278-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>dwing</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=98042" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570946278-bc3b3631a24154c2d9ba8189508a5212.gif" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_3"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">澄空二年生上学期</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570946278-3699e74cfe4e975552e8db25eb7cc233.gif"><br>

<span class="user-info2" id="showface_3">
<span class="user-infoWrap2">


精华:

		<span class="s4">0</span>
<br>
发帖: <span class="s1 f9">144</span><br>
学分: <span class="s2 f9">20 点</span><br>
澄空币: <span class="s3 f9">880 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2007-03-03<br>
		最后登录:2019-09-29 <br><br> 
		</span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_2105195" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=10917250&amp;pid=2105195&amp;article=3" onclick="return sendurl(this,4,event)" id="quote_2105195" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=10917250&amp;pid=2105195&amp;article=3" id="modify_2105195" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=98042" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=10917250&amp;pid=2105195" onclick="return sendurl(this,8)" id="report_2105195" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=10917250&amp;uid=98042" title="只看该作者的所有回复" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('2105195')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_2105195" class="fl">&nbsp;</h1>
			

			<div id="p_2105195" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_2105195">只是简单的打包,没有压缩加密,能看懂解包代码就能写出封包.</div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_2105195" class="c"></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2009-05-30 00:09 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 3楼(dwing) 的帖子');" data-mx-warn="Empty URL">3 楼</a></span>

		</div></th>
	</tr></tbody></table>
</div>

<a name="2105572" data-mx-warn="Empty URL"></a>
<div class="t t2"><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570946278-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>37859365</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=263811" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570946278-bc3b3631a24154c2d9ba8189508a5212.gif" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_4"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">澄空新生</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570946278-be59bc9a4edb96b6b54ba67c9267b93f.gif"><br>

<span class="user-info2" id="showface_4">
<span class="user-infoWrap2">


精华:

		<span class="s4">0</span>
<br>
发帖: <span class="s1 f9">33</span><br>
学分: <span class="s2 f9">0 点</span><br>
澄空币: <span class="s3 f9">452 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2009-02-04<br>
		最后登录:2017-05-02 <br><br> 
		</span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_2105572" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=10917250&amp;pid=2105572&amp;article=4" onclick="return sendurl(this,4,event)" id="quote_2105572" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=10917250&amp;pid=2105572&amp;article=4" id="modify_2105572" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=263811" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=10917250&amp;pid=2105572" onclick="return sendurl(this,8)" id="report_2105572" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=10917250&amp;uid=263811" title="只看该作者的所有回复" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('2105572')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_2105572" class="fl">&nbsp;</h1>
			

			<div id="p_2105572" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_2105572">代码都是他自己写的，但是打包的话就不会了 <img src="assets/1570946278-9faf060365773a2939d002b34bc0a35a.gif"></div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_2105572" class="c"></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2009-05-30 10:02 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 4楼(37859365) 的帖子');" data-mx-warn="Empty URL">4 楼</a></span>

		</div></th>
	</tr></tbody></table>
</div>

<a name="2123845" data-mx-warn="Empty URL"></a>
<div class="t t2"><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570946278-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>holand</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=12839" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570946278-10ca70a4d7381f80e818b80d3e0822a3.gif" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_5"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">学生会干事</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570946278-87bc1a6e935264a57e50e0d513f23aa7.gif"><br>

<span class="user-info2" id="showface_5">
<span class="user-infoWrap2">


精华:

		<a href="https://bbs.sumisora.net/search.php?authorid=12839&amp;digest=1" target="_blank" class="s4 f9" referrerpolicy="no-referrer" rel="noopener noreferrer">2</a>
<br>
发帖: <span class="s1 f9">227</span><br>
学分: <span class="s2 f9">228 点</span><br>
澄空币: <span class="s3 f9">12493 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2005-06-26<br>
		最后登录:2018-11-19 <br><br> 
		</span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_2123845" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=10917250&amp;pid=2123845&amp;article=5" onclick="return sendurl(this,4,event)" id="quote_2123845" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=10917250&amp;pid=2123845&amp;article=5" id="modify_2123845" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=12839" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=10917250&amp;pid=2123845" onclick="return sendurl(this,8)" id="report_2123845" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=10917250&amp;uid=12839" title="只看该作者的所有回复" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('2123845')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_2123845" class="fl">&nbsp;</h1>
			

			<div id="p_2123845" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_2123845">最近忙其它事情，趁假日写一下，希望对楼主还有帮助<br>楼主要解的是DC的文件吧，由于索引部分有些用途不明的字段，所以用google搜索了一下资料，找到一编介绍得比较详细的文章<br>原地址：<br><a href="http://forumsx.sonic-cult.org/index.php?showtopic=3388" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">http://forumsx.sonic-cult.org/index.php?showtopic=3388</a><br><br><h6 class="quote"><a href="javascript:" onclick="CopyCode(document.getElementById('code1'));" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Copy code</a></h6><pre class="prettyprint" id="code1" style="border-radius:5px;font-family:monaco,consolas,monospace;font-size:12px;overflow-x:auto;line-height:1.4em"><span class="pln"> analyzed lots of PVM files recently </span><span class="kwd">and</span><span class="pln"> </span><span class="kwd">this</span><span class="pln"> </span><span class="kwd">is</span><span class="pln"> what I found </span><span class="kwd">out</span><span class="pln"> about their structure</span><span class="pun">.</span><span class="pln">

</span><span class="typ">The</span><span class="pln"> general layout of a PVM file </span><span class="kwd">is</span><span class="pln"> simple</span><span class="pun">:</span><span class="pln">
</span><span class="typ">Header</span><span class="pln">
</span><span class="typ">Directory</span><span class="pln"> entries
</span><span class="typ">Textures</span><span class="pln">

</span><span class="typ">In</span><span class="pln"> detail </span><span class="pun">(</span><span class="kwd">in</span><span class="pln"> </span><span class="typ">Delphi</span><span class="pln"> syntax</span><span class="pun">,</span><span class="pln"> but it shouldn</span><span class="str">'t be too hard to understand even if you don'</span><span class="pln">t know </span><span class="typ">Delphi</span><span class="pun">):</span><span class="pln">

</span><span class="pun">&gt;&gt;</span><span class="pln"> CODE</span><span class="pun">&gt;&gt;</span><span class="pln"> </span><span class="typ">TPVMHeader</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> packed record
</span><span class="pun">Â</span><span class="pln"> </span><span class="typ">ChunkName</span><span class="pun">:</span><span class="pln"> array </span><span class="pun">[</span><span class="lit">0.</span><span class="pun">.</span><span class="lit">3</span><span class="pun">]</span><span class="pln"> of </span><span class="typ">Char</span><span class="pun">;</span><span class="pln"> </span><span class="pun">Â</span><span class="pln">&nbsp;&nbsp;</span><span class="com">// 4 Bytes</span><span class="pln">
</span><span class="pun">Â</span><span class="pln"> </span><span class="typ">ChunkSize</span><span class="pun">:</span><span class="pln"> </span><span class="typ">DWord</span><span class="pun">;</span><span class="pln"> </span><span class="pun">Â</span><span class="pln">&nbsp;&nbsp;</span><span class="pun">Â</span><span class="pln">&nbsp;&nbsp;</span><span class="pun">Â</span><span class="pln">&nbsp;&nbsp;</span><span class="pun">Â</span><span class="pln">&nbsp;&nbsp;</span><span class="pun">Â</span><span class="pln">&nbsp;&nbsp;</span><span class="pun">Â</span><span class="pln">&nbsp;&nbsp;</span><span class="pun">Â</span><span class="pln">&nbsp;&nbsp;</span><span class="pun">Â</span><span class="pln">&nbsp;&nbsp;</span><span class="pun">Â</span><span class="pln"> </span><span class="com">// 4 Bytes</span><span class="pln">
</span><span class="pun">Â</span><span class="pln"> </span><span class="typ">DirectoryType</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Byte</span><span class="pun">;</span><span class="pln">
</span><span class="pun">Â</span><span class="pln"> </span><span class="typ">Unknown</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Byte</span><span class="pun">;</span><span class="pln">
</span><span class="pun">Â</span><span class="pln"> </span><span class="typ">Count</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Word</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">end</span><span class="pun">;</span><span class="pln">


</span><span class="str">"ChunkName"</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">'PVMH'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pln"> can be used to identify PVM files</span><span class="pun">.</span><span class="pln">
</span><span class="str">"ChunkSize"</span><span class="pln"> tells how many </span><span class="typ">Bytes</span><span class="pln"> follow </span><span class="kwd">until</span><span class="pln"> the first PVR texture begins</span><span class="pun">.</span><span class="pln"> </span><span class="typ">So</span><span class="pun">,</span><span class="pln"> the file offset of the first PVR texture </span><span class="kwd">is</span><span class="pln"> </span><span class="typ">ChunkSize</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">8.</span><span class="pln">
</span><span class="str">"DirectoryType"</span><span class="pln"> </span><span class="kwd">is</span><span class="pln"> a </span><span class="typ">Byte</span><span class="pln"> that determines the format of the following directory entries</span><span class="pun">.</span><span class="pln"> I</span><span class="str">'ve found PVM files with the values 09 and 0F, if anyone has seen other values anywhere, please tell.
I have no clue what "Unknown" is good for, it seems to be either 00 or 01.
"Count" tells the number of Directory entries that follow, and thus the number of PVR textures in the file.


&gt;&gt; CODE&gt;&gt; TPVMDirectoryEntry = packed record
Â Index: Word;
Â Name: array [0..27] of Char; Â&nbsp;&nbsp;Â&nbsp;&nbsp;Â&nbsp;&nbsp;Â&nbsp;&nbsp;// 28 Bytes
Â PixelFormat: Byte;
Â DataFormat: Byte;
Â Dimensions: Word;
Â GlobalIndex: DWord;
end;


That'</span><span class="pln">s a PVM </span><span class="typ">Directory</span><span class="pln"> entry</span><span class="pun">.</span><span class="pln"> </span><span class="typ">However</span><span class="pun">,</span><span class="pln"> it</span><span class="str">'s only like this when the "DirectoryType" Byte from the header is 0F. When DirectoryType is 09, then each Directory entry is missing the PixelFormat, DataFormat and Dimensions fields, and thus is 4 Bytes smaller. I think it'</span><span class="pln">s possible that </span><span class="typ">DirectoryType</span><span class="pln"> </span><span class="kwd">is</span><span class="pln"> a bitfield </span><span class="kwd">with</span><span class="pln"> the individual bits signalling which fields are present </span><span class="kwd">in</span><span class="pln"> a </span><span class="typ">Directory</span><span class="pln"> entry </span><span class="kwd">and</span><span class="pln"> which are </span><span class="kwd">not</span><span class="pun">.</span><span class="pln">
</span><span class="lit">0F</span><span class="pln"> </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">1111</span><span class="pln"> binary</span><span class="pun">,</span><span class="pln"> so the </span><span class="typ">Name</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Format</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Dimensions</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> </span><span class="typ">GlobalIndex</span><span class="pln"> fields are present</span><span class="pun">.</span><span class="pln">
</span><span class="lit">09</span><span class="pln"> </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">1001</span><span class="pln"> binary</span><span class="pun">,</span><span class="pln"> so just the </span><span class="typ">Name</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> </span><span class="typ">GlobalIndex</span><span class="pln"> fields are present</span><span class="pun">.</span><span class="pln">


</span><span class="str">"Index"</span><span class="pln"> seems to be a pretty useless field</span><span class="pun">,</span><span class="pln"> because it</span><span class="str">'s "0" for the first Directory entry, "1" for the second, "2" for the third and so on. Maybe it'</span><span class="pln">s possible that the </span><span class="typ">Directory</span><span class="pln"> entries can be </span><span class="kwd">out</span><span class="pln"> of sequence</span><span class="pun">,</span><span class="pln"> so </span><span class="kwd">if</span><span class="pln"> the first entry had </span><span class="typ">Index</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> it would mean that it refers to the third texture </span><span class="kwd">in</span><span class="pln"> the PVM </span><span class="kwd">and</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> to the first</span><span class="pun">.</span><span class="pln"> </span><span class="typ">However</span><span class="pun">,</span><span class="pln"> so far I</span><span class="str">'ve only seen Directories which are in sequence.
"Name" is the name of the texture and can be anything. It'</span><span class="pln">s a zero terminated ASCII </span><span class="kwd">string</span><span class="pun">,</span><span class="pln"> I think</span><span class="pun">.</span><span class="pln">
</span><span class="str">"PixelFormat"</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> </span><span class="str">"DataFormat"</span><span class="pln"> are copies of the same two </span><span class="typ">Bytes</span><span class="pln"> which are found </span><span class="kwd">in</span><span class="pln"> the PVR texture</span><span class="str">'s header.
"Dimensions" - indicates the width and height of the texture in pixels. Example:
a value of 0011 (hexadecimal) indicates that the texture is 8x8 pixels in size (the smallest legal size of a PVR texture, apparently). In general: 00yx means that the texture is "4 shl x" pixels wide and "4 shl y" pixels high (where "shl" is the bitwise shift left operation).
"GlobalIndex" - each PVR file can have an optional '</span><span class="pln">GBIX</span><span class="str">' GlobalIndex Header, which assigns a 32 bit number to the texture. But when PVR files are stored in a PVM file, then it'</span><span class="pln">s obviously more convenient </span><span class="kwd">and</span><span class="pln"> efficient to store that </span><span class="typ">GlobalIndex</span><span class="pln"> value </span><span class="kwd">in</span><span class="pln"> the </span><span class="typ">Directory</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> </span><span class="kwd">in</span><span class="pln"> a separate chunk before each individual texture</span><span class="pun">.</span><span class="pln">


</span><span class="typ">That</span><span class="str">'s it, after the Directory the texture data starts, but the PVR file format is another story and not to be discussed here. :D </span></pre><br><br><br>根据文章的分析写了一下代码，写得比较简陋，有些地方你让你朋友完善一下。<br><br><h6 class="quote"><a href="javascript:" onclick="CopyCode(document.getElementById('code2'));" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Copy code</a></h6><pre class="prettyprint" id="code2" style="border-radius:5px;font-family:monaco,consolas,monospace;font-size:12px;overflow-x:auto;line-height:1.4em"><span class="pln">unit </span><span class="typ">Unit1</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">interface</span><span class="pln">

uses
&nbsp;&nbsp;</span><span class="typ">Windows</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Messages</span><span class="pun">,</span><span class="pln"> </span><span class="typ">SysUtils</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Variants</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Classes</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Graphics</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Controls</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Forms</span><span class="pun">,</span><span class="pln">
&nbsp;&nbsp;</span><span class="typ">Dialogs</span><span class="pun">,</span><span class="pln"> </span><span class="typ">StdCtrls</span><span class="pun">;</span><span class="pln">

type
&nbsp;&nbsp;</span><span class="typ">TForm1</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">class</span><span class="pun">(</span><span class="typ">TForm</span><span class="pun">)</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;btnUnpack</span><span class="pun">:</span><span class="pln"> </span><span class="typ">TButton</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;btnPack</span><span class="pun">:</span><span class="pln"> </span><span class="typ">TButton</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">OpenDialog1</span><span class="pun">:</span><span class="pln"> </span><span class="typ">TOpenDialog</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;procedure btnUnpackClick</span><span class="pun">(</span><span class="typ">Sender</span><span class="pun">:</span><span class="pln"> </span><span class="typ">TObject</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;procedure btnPackClick</span><span class="pun">(</span><span class="typ">Sender</span><span class="pun">:</span><span class="pln"> </span><span class="typ">TObject</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;</span><span class="kwd">private</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">Private</span><span class="pln"> declarations </span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;</span><span class="kwd">public</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span><span class="pln"> </span><span class="typ">Public</span><span class="pln"> declarations </span><span class="pun">}</span><span class="pln">
&nbsp;&nbsp;</span><span class="kwd">end</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;</span><span class="typ">TPVMHeader</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> packed record
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">ChunkName</span><span class="pun">:</span><span class="pln"> array </span><span class="pun">[</span><span class="lit">0.</span><span class="pun">.</span><span class="lit">3</span><span class="pun">]</span><span class="pln"> of </span><span class="typ">Char</span><span class="pun">;</span><span class="com">// 4 Bytes</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">ChunkSize</span><span class="pun">:</span><span class="pln"> </span><span class="typ">DWord</span><span class="pun">;</span><span class="pln"> </span><span class="com">// 4 Bytes</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DirectoryType</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Byte</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;unknown</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Byte</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">Count</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Word</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;</span><span class="kwd">end</span><span class="pun">;</span><span class="pln">

&nbsp;&nbsp;</span><span class="typ">PVMDirectoryEntry1</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> packed record </span><span class="com">//定义文件索引项</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">Index</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Word</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">Name</span><span class="pun">:</span><span class="pln"> array </span><span class="pun">[</span><span class="lit">0.</span><span class="pun">.</span><span class="lit">27</span><span class="pun">]</span><span class="pln"> of </span><span class="typ">Char</span><span class="pun">;</span><span class="pln">&nbsp;&nbsp; </span><span class="com">// 28 Bytes</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">PixelFormat</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Byte</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">DataFormat</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Byte</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">Dimensions</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Word</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">GlobalIndex</span><span class="pun">:</span><span class="pln"> </span><span class="typ">DWord</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;</span><span class="kwd">end</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;</span><span class="typ">PVMDirectoryEntry2</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> packed record </span><span class="com">//定义文件索引项</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">Index</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Word</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">Name</span><span class="pun">:</span><span class="pln"> array </span><span class="pun">[</span><span class="lit">0.</span><span class="pun">.</span><span class="lit">27</span><span class="pun">]</span><span class="pln"> of </span><span class="typ">Char</span><span class="pun">;</span><span class="pln">&nbsp;&nbsp; </span><span class="com">// 28 Bytes</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">GlobalIndex</span><span class="pun">:</span><span class="pln"> </span><span class="typ">DWord</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;</span><span class="kwd">end</span><span class="pun">;</span><span class="pln">
procedure unPack</span><span class="pun">(</span><span class="typ">FileName</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="typ">String</span><span class="pun">);</span><span class="pln">
procedure pack</span><span class="pun">(</span><span class="typ">FileName</span><span class="pun">:</span><span class="pln"> </span><span class="typ">String</span><span class="pun">);</span><span class="pln">
</span><span class="kwd">var</span><span class="pln">
&nbsp;&nbsp;</span><span class="typ">Form1</span><span class="pun">:</span><span class="pln"> </span><span class="typ">TForm1</span><span class="pun">;</span><span class="pln">

implementation

</span><span class="pun">{</span><span class="pln">$R </span><span class="pun">*.</span><span class="pln">dfm</span><span class="pun">}</span><span class="pln">

procedure </span><span class="typ">TForm1</span><span class="pun">.</span><span class="pln">btnUnpackClick</span><span class="pun">(</span><span class="typ">Sender</span><span class="pun">:</span><span class="pln"> </span><span class="typ">TObject</span><span class="pun">);</span><span class="pln">
</span><span class="kwd">var</span><span class="pln">
&nbsp;&nbsp;i </span><span class="pun">:</span><span class="pln"> </span><span class="typ">Integer</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">begin</span><span class="pln">
&nbsp;&nbsp;opendialog1</span><span class="pun">.</span><span class="typ">Title</span><span class="pun">:=</span><span class="str">'Please Open A PVM File ...'</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;opendialog1</span><span class="pun">.</span><span class="typ">Filter</span><span class="pun">:=</span><span class="str">'PVM File (*.PVM)|*.pvm|All File Type (*.*)|*.*'</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln"> </span><span class="typ">OpenDialog1</span><span class="pun">.</span><span class="typ">Execute</span><span class="pln"> </span><span class="kwd">then</span><span class="pln">
&nbsp;&nbsp;</span><span class="kwd">begin</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;btnUnpack</span><span class="pun">.</span><span class="typ">Enabled</span><span class="pun">:=</span><span class="kwd">False</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln"> i</span><span class="pun">:=</span><span class="lit">0</span><span class="pln"> to </span><span class="typ">OpenDialog1</span><span class="pun">.</span><span class="typ">Files</span><span class="pun">.</span><span class="typ">Count</span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">do</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unPack</span><span class="pun">(</span><span class="typ">OpenDialog1</span><span class="pun">.</span><span class="typ">Files</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;btnUnpack</span><span class="pun">.</span><span class="typ">Enabled</span><span class="pun">:=</span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;</span><span class="kwd">end</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">end</span><span class="pun">;</span><span class="pln">

procedure </span><span class="typ">TForm1</span><span class="pun">.</span><span class="pln">btnPackClick</span><span class="pun">(</span><span class="typ">Sender</span><span class="pun">:</span><span class="pln"> </span><span class="typ">TObject</span><span class="pun">);</span><span class="pln">
</span><span class="kwd">var</span><span class="pln">
&nbsp;&nbsp;i </span><span class="pun">:</span><span class="pln"> </span><span class="typ">Integer</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">begin</span><span class="pln">
&nbsp;&nbsp;opendialog1</span><span class="pun">.</span><span class="typ">Title</span><span class="pun">:=</span><span class="str">'Please Open A IDX File ...'</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;opendialog1</span><span class="pun">.</span><span class="typ">Filter</span><span class="pun">:=</span><span class="str">'IDX File (*.IDX)|*.idx|All File Type (*.*)|*.*'</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln"> </span><span class="typ">OpenDialog1</span><span class="pun">.</span><span class="typ">Execute</span><span class="pln"> </span><span class="kwd">then</span><span class="pln">
&nbsp;&nbsp;</span><span class="kwd">begin</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;btnPack</span><span class="pun">.</span><span class="typ">Enabled</span><span class="pun">:=</span><span class="kwd">False</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln"> i</span><span class="pun">:=</span><span class="lit">0</span><span class="pln"> to </span><span class="typ">OpenDialog1</span><span class="pun">.</span><span class="typ">Files</span><span class="pun">.</span><span class="typ">Count</span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">do</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">Pack</span><span class="pun">(</span><span class="typ">OpenDialog1</span><span class="pun">.</span><span class="typ">Files</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;btnPack</span><span class="pun">.</span><span class="typ">Enabled</span><span class="pun">:=</span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;</span><span class="kwd">end</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">end</span><span class="pun">;</span><span class="pln">


procedure unPack</span><span class="pun">(</span><span class="typ">FileName</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="typ">String</span><span class="pun">);</span><span class="pln">
</span><span class="kwd">var</span><span class="pln">
&nbsp;&nbsp;</span><span class="typ">Dir</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="typ">String</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;i </span><span class="pun">:</span><span class="pln"> </span><span class="typ">Integer</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;fin</span><span class="pun">,</span><span class="pln">fout </span><span class="pun">:</span><span class="pln"> </span><span class="typ">TFileStream</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;index1 </span><span class="pun">:</span><span class="pln"> </span><span class="typ">Array</span><span class="pln"> of </span><span class="typ">PVMDirectoryEntry1</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;index2 </span><span class="pun">:</span><span class="pln"> </span><span class="typ">Array</span><span class="pln"> of </span><span class="typ">PVMDirectoryEntry2</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;header </span><span class="pun">:</span><span class="pln"> </span><span class="typ">TPVMHeader</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;outFileName </span><span class="pun">:</span><span class="pln"> </span><span class="typ">String</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;</span><span class="typ">FileSize</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="typ">Integer</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">begin</span><span class="pln">
&nbsp;&nbsp;fin</span><span class="pun">:=</span><span class="typ">TFileStream</span><span class="pun">.</span><span class="typ">Create</span><span class="pun">(</span><span class="typ">FileName</span><span class="pun">,</span><span class="pln">fmOpenRead</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;fin</span><span class="pun">.</span><span class="typ">ReadBuffer</span><span class="pun">(</span><span class="pln">header</span><span class="pun">,</span><span class="pln">sizeOf</span><span class="pun">(</span><span class="typ">TPVMHeader</span><span class="pun">));</span><span class="pln">

&nbsp;&nbsp;</span><span class="com">//判断是否PVM文件</span><span class="pln">
&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln"> header</span><span class="pun">.</span><span class="typ">ChunkName</span><span class="pun">&lt;&gt;</span><span class="str">'PVMH'</span><span class="pln"> </span><span class="kwd">then</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">// PVMH</span><span class="pln">
&nbsp;&nbsp;</span><span class="kwd">begin</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;showmessage</span><span class="pun">(</span><span class="str">'Not a pvm file'</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;fin</span><span class="pun">.</span><span class="typ">Free</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">exit</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;</span><span class="kwd">end</span><span class="pun">;</span><span class="pln">


</span><span class="com">//读取封包索引</span><span class="pln">
&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln"> header</span><span class="pun">.</span><span class="typ">DirectoryType</span><span class="pun">=</span><span class="pln">$F </span><span class="kwd">then</span><span class="pln">
&nbsp;&nbsp;</span><span class="kwd">begin</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;setLength</span><span class="pun">(</span><span class="pln">index1</span><span class="pun">,</span><span class="pln">header</span><span class="pun">.</span><span class="typ">Count</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln"> i</span><span class="pun">:=</span><span class="lit">0</span><span class="pln"> to header</span><span class="pun">.</span><span class="typ">Count</span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">do</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">begin</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fin</span><span class="pun">.</span><span class="typ">ReadBuffer</span><span class="pun">(</span><span class="pln">index1</span><span class="pun">[</span><span class="pln">i</span><span class="pun">],</span><span class="pln">sizeOf</span><span class="pun">(</span><span class="typ">PVMDirectoryEntry1</span><span class="pun">));</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">end</span><span class="pun">;</span><span class="pln">

</span><span class="com">//创建解包文件存放的目录</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">Dir</span><span class="pun">:=</span><span class="typ">ChangeFileExt</span><span class="pun">(</span><span class="typ">FileName</span><span class="pun">,</span><span class="str">''</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> </span><span class="typ">DirectoryExists</span><span class="pun">(</span><span class="typ">Dir</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">CreateDir</span><span class="pun">(</span><span class="typ">Dir</span><span class="pun">);</span><span class="pln">

</span><span class="com">//提取文件</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;fin</span><span class="pun">.</span><span class="typ">Seek</span><span class="pun">(</span><span class="pln">header</span><span class="pun">.</span><span class="typ">ChunkSize</span><span class="pun">+</span><span class="lit">8</span><span class="pun">,</span><span class="pln">soFromBeginning</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln"> i</span><span class="pun">:=</span><span class="lit">0</span><span class="pln"> to header</span><span class="pun">.</span><span class="typ">Count</span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">do</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">begin</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outFileName</span><span class="pun">:=</span><span class="typ">Format</span><span class="pun">(</span><span class="str">'%s\%s.pvr'</span><span class="pun">,[</span><span class="typ">Dir</span><span class="pun">,</span><span class="typ">Index1</span><span class="pun">[</span><span class="pln">i</span><span class="pun">].</span><span class="typ">Name</span><span class="pun">]);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fout</span><span class="pun">:=</span><span class="typ">TFileStream</span><span class="pun">.</span><span class="typ">Create</span><span class="pun">(</span><span class="pln">outFileName</span><span class="pun">,</span><span class="pln">fmCreate</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fin</span><span class="pun">.</span><span class="typ">Seek</span><span class="pun">(</span><span class="lit">4</span><span class="pun">,</span><span class="pln">soFromCurrent</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fin</span><span class="pun">.</span><span class="typ">ReadBuffer</span><span class="pun">(</span><span class="pln">fileSize</span><span class="pun">,</span><span class="lit">4</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fin</span><span class="pun">.</span><span class="typ">Seek</span><span class="pun">(-</span><span class="lit">8</span><span class="pun">,</span><span class="pln">soFromCurrent</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fout</span><span class="pun">.</span><span class="typ">CopyFrom</span><span class="pun">(</span><span class="pln">fin</span><span class="pun">,</span><span class="typ">FileSize</span><span class="pun">+</span><span class="lit">8</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fout</span><span class="pun">.</span><span class="typ">Free</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">end</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;</span><span class="kwd">end</span><span class="pln"> </span><span class="kwd">else</span><span class="pln">
&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln"> header</span><span class="pun">.</span><span class="typ">DirectoryType</span><span class="pun">=</span><span class="pln">$9 </span><span class="kwd">then</span><span class="pln">
&nbsp;&nbsp;</span><span class="kwd">begin</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;setLength</span><span class="pun">(</span><span class="pln">index2</span><span class="pun">,</span><span class="pln">header</span><span class="pun">.</span><span class="typ">Count</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln"> i</span><span class="pun">:=</span><span class="lit">0</span><span class="pln"> to header</span><span class="pun">.</span><span class="typ">Count</span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">do</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">begin</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fin</span><span class="pun">.</span><span class="typ">ReadBuffer</span><span class="pun">(</span><span class="pln">index2</span><span class="pun">[</span><span class="pln">i</span><span class="pun">],</span><span class="pln">sizeOf</span><span class="pun">(</span><span class="typ">PVMDirectoryEntry1</span><span class="pun">));</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">end</span><span class="pun">;</span><span class="pln">

</span><span class="com">//创建解包文件存放的目录</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">Dir</span><span class="pun">:=</span><span class="typ">ChangeFileExt</span><span class="pun">(</span><span class="typ">FileName</span><span class="pun">,</span><span class="str">''</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> </span><span class="typ">DirectoryExists</span><span class="pun">(</span><span class="typ">Dir</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">CreateDir</span><span class="pun">(</span><span class="typ">Dir</span><span class="pun">);</span><span class="pln">

</span><span class="com">//提取文件</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;fin</span><span class="pun">.</span><span class="typ">Seek</span><span class="pun">(</span><span class="pln">header</span><span class="pun">.</span><span class="typ">ChunkSize</span><span class="pun">+</span><span class="lit">8</span><span class="pun">,</span><span class="pln">soFromBeginning</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln"> i</span><span class="pun">:=</span><span class="lit">0</span><span class="pln"> to header</span><span class="pun">.</span><span class="typ">Count</span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">do</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">begin</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outFileName</span><span class="pun">:=</span><span class="typ">Format</span><span class="pun">(</span><span class="str">'%s\%s.pvr'</span><span class="pun">,[</span><span class="typ">Dir</span><span class="pun">,</span><span class="typ">Index2</span><span class="pun">[</span><span class="pln">i</span><span class="pun">].</span><span class="typ">Name</span><span class="pun">]);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fout</span><span class="pun">:=</span><span class="typ">TFileStream</span><span class="pun">.</span><span class="typ">Create</span><span class="pun">(</span><span class="pln">outFileName</span><span class="pun">,</span><span class="pln">fmCreate</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fin</span><span class="pun">.</span><span class="typ">Seek</span><span class="pun">(</span><span class="lit">4</span><span class="pun">,</span><span class="pln">soFromCurrent</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fin</span><span class="pun">.</span><span class="typ">ReadBuffer</span><span class="pun">(</span><span class="pln">fileSize</span><span class="pun">,</span><span class="lit">4</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fin</span><span class="pun">.</span><span class="typ">Seek</span><span class="pun">(-</span><span class="lit">8</span><span class="pun">,</span><span class="pln">soFromCurrent</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fout</span><span class="pun">.</span><span class="typ">CopyFrom</span><span class="pun">(</span><span class="pln">fin</span><span class="pun">,</span><span class="typ">FileSize</span><span class="pun">+</span><span class="lit">8</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fout</span><span class="pun">.</span><span class="typ">Free</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">end</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;</span><span class="kwd">end</span><span class="pun">;</span><span class="pln">

&nbsp;&nbsp;outFileName</span><span class="pun">:=</span><span class="typ">ChangeFileExt</span><span class="pun">(</span><span class="typ">FileName</span><span class="pun">,</span><span class="str">'.idx'</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;fout</span><span class="pun">:=</span><span class="typ">TFileStream</span><span class="pun">.</span><span class="typ">Create</span><span class="pun">(</span><span class="pln">outFileName</span><span class="pun">,</span><span class="pln">fmCreate</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;fin</span><span class="pun">.</span><span class="typ">Seek</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln">soFromBeginning</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;fout</span><span class="pun">.</span><span class="typ">CopyFrom</span><span class="pun">(</span><span class="pln">fin</span><span class="pun">,</span><span class="pln">header</span><span class="pun">.</span><span class="typ">ChunkSize</span><span class="pun">+</span><span class="lit">8</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;fout</span><span class="pun">.</span><span class="typ">Free</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;fin</span><span class="pun">.</span><span class="typ">Free</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">end</span><span class="pun">;</span><span class="pln">

procedure pack</span><span class="pun">(</span><span class="typ">FileName</span><span class="pun">:</span><span class="pln"> </span><span class="typ">String</span><span class="pun">);</span><span class="pln">
</span><span class="kwd">var</span><span class="pln">
&nbsp;&nbsp;</span><span class="typ">Dir</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="typ">String</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;i </span><span class="pun">:</span><span class="pln"> </span><span class="typ">Integer</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;fin</span><span class="pun">,</span><span class="pln">fout </span><span class="pun">:</span><span class="pln"> </span><span class="typ">TFileStream</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;index1 </span><span class="pun">:</span><span class="pln"> </span><span class="typ">Array</span><span class="pln"> of </span><span class="typ">PVMDirectoryEntry1</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;index2 </span><span class="pun">:</span><span class="pln"> </span><span class="typ">Array</span><span class="pln"> of </span><span class="typ">PVMDirectoryEntry2</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;header </span><span class="pun">:</span><span class="pln"> </span><span class="typ">TPVMHeader</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;inFileName</span><span class="pun">,</span><span class="pln">outFileName </span><span class="pun">:</span><span class="pln"> </span><span class="typ">String</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">begin</span><span class="pln">
&nbsp;&nbsp;fin</span><span class="pun">:=</span><span class="typ">TFileStream</span><span class="pun">.</span><span class="typ">Create</span><span class="pun">(</span><span class="typ">FileName</span><span class="pun">,</span><span class="pln">fmOpenRead</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;fin</span><span class="pun">.</span><span class="typ">ReadBuffer</span><span class="pun">(</span><span class="pln">header</span><span class="pun">,</span><span class="pln">sizeOf</span><span class="pun">(</span><span class="typ">TPVMHeader</span><span class="pun">));</span><span class="pln">

&nbsp;&nbsp;</span><span class="com">//判断是否PVM文件</span><span class="pln">
&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln"> header</span><span class="pun">.</span><span class="typ">ChunkName</span><span class="pun">&lt;&gt;</span><span class="str">'PVMH'</span><span class="pln"> </span><span class="kwd">then</span><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">// PVMH</span><span class="pln">
&nbsp;&nbsp;</span><span class="kwd">begin</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;showmessage</span><span class="pun">(</span><span class="str">'Not a pvm file'</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;fin</span><span class="pun">.</span><span class="typ">Free</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">exit</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;</span><span class="kwd">end</span><span class="pun">;</span><span class="pln">

&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln"> header</span><span class="pun">.</span><span class="typ">DirectoryType</span><span class="pun">=</span><span class="pln">$F </span><span class="kwd">then</span><span class="pln">
&nbsp;&nbsp;</span><span class="kwd">begin</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;setLength</span><span class="pun">(</span><span class="pln">index1</span><span class="pun">,</span><span class="pln">header</span><span class="pun">.</span><span class="typ">Count</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln"> i</span><span class="pun">:=</span><span class="lit">0</span><span class="pln"> to header</span><span class="pun">.</span><span class="typ">Count</span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">do</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">begin</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fin</span><span class="pun">.</span><span class="typ">ReadBuffer</span><span class="pun">(</span><span class="pln">index1</span><span class="pun">[</span><span class="pln">i</span><span class="pun">],</span><span class="pln">sizeOf</span><span class="pun">(</span><span class="typ">PVMDirectoryEntry1</span><span class="pun">));</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">end</span><span class="pun">;</span><span class="pln">


&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//创建生成的pvm文件</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;outFileName</span><span class="pun">:=</span><span class="typ">ChangeFileExt</span><span class="pun">(</span><span class="typ">FileName</span><span class="pun">,</span><span class="str">'.pvm'</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;fout</span><span class="pun">:=</span><span class="typ">TFileStream</span><span class="pun">.</span><span class="typ">Create</span><span class="pun">(</span><span class="pln">outFileName</span><span class="pun">,</span><span class="pln">fmCreate</span><span class="pun">);</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//将idx文件内容复制到pvm文件内</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;fin</span><span class="pun">.</span><span class="typ">Seek</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln">soFromBeginning</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;fout</span><span class="pun">.</span><span class="typ">CopyFrom</span><span class="pun">(</span><span class="pln">fin</span><span class="pun">,</span><span class="pln">fin</span><span class="pun">.</span><span class="pln">size</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;fin</span><span class="pun">.</span><span class="typ">Free</span><span class="pun">;</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//打包文件</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">Dir</span><span class="pun">:=</span><span class="typ">ChangeFileExt</span><span class="pun">(</span><span class="typ">FileName</span><span class="pun">,</span><span class="str">''</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln"> i</span><span class="pun">:=</span><span class="lit">0</span><span class="pln"> to header</span><span class="pun">.</span><span class="typ">Count</span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">do</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">begin</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inFileName</span><span class="pun">:=</span><span class="typ">Format</span><span class="pun">(</span><span class="str">'%s\%s.pvr'</span><span class="pun">,[</span><span class="typ">Dir</span><span class="pun">,</span><span class="typ">Index1</span><span class="pun">[</span><span class="pln">i</span><span class="pun">].</span><span class="typ">Name</span><span class="pun">]);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> </span><span class="typ">FileExists</span><span class="pun">(</span><span class="pln">inFileName</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">begin</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showMessage</span><span class="pun">(</span><span class="str">'Can not find file '</span><span class="pun">+</span><span class="pln"> inFileName</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fout</span><span class="pun">.</span><span class="typ">Free</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">exit</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">end</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fin</span><span class="pun">:=</span><span class="typ">TFileStream</span><span class="pun">.</span><span class="typ">Create</span><span class="pun">(</span><span class="pln">inFileName</span><span class="pun">,</span><span class="pln">fmOpenRead</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fout</span><span class="pun">.</span><span class="typ">CopyFrom</span><span class="pun">(</span><span class="pln">fin</span><span class="pun">,</span><span class="pln">fin</span><span class="pun">.</span><span class="pln">size</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fin</span><span class="pun">.</span><span class="typ">Free</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">end</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;fout</span><span class="pun">.</span><span class="typ">Free</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;</span><span class="kwd">end</span><span class="pun">;</span><span class="pln">

&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln"> header</span><span class="pun">.</span><span class="typ">DirectoryType</span><span class="pun">=</span><span class="pln">$9 </span><span class="kwd">then</span><span class="pln">
&nbsp;&nbsp;</span><span class="kwd">begin</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;setLength</span><span class="pun">(</span><span class="pln">index2</span><span class="pun">,</span><span class="pln">header</span><span class="pun">.</span><span class="typ">Count</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln"> i</span><span class="pun">:=</span><span class="lit">0</span><span class="pln"> to header</span><span class="pun">.</span><span class="typ">Count</span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">do</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">begin</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fin</span><span class="pun">.</span><span class="typ">ReadBuffer</span><span class="pun">(</span><span class="pln">index2</span><span class="pun">[</span><span class="pln">i</span><span class="pun">],</span><span class="pln">sizeOf</span><span class="pun">(</span><span class="typ">PVMDirectoryEntry1</span><span class="pun">));</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">end</span><span class="pun">;</span><span class="pln">


&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//创建生成的pvm文件</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;outFileName</span><span class="pun">:=</span><span class="typ">ChangeFileExt</span><span class="pun">(</span><span class="typ">FileName</span><span class="pun">,</span><span class="str">'.pvm'</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;fout</span><span class="pun">:=</span><span class="typ">TFileStream</span><span class="pun">.</span><span class="typ">Create</span><span class="pun">(</span><span class="pln">outFileName</span><span class="pun">,</span><span class="pln">fmCreate</span><span class="pun">);</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//将idx文件内容复制到pvm文件内</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;fin</span><span class="pun">.</span><span class="typ">Seek</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln">soFromBeginning</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;fout</span><span class="pun">.</span><span class="typ">CopyFrom</span><span class="pun">(</span><span class="pln">fin</span><span class="pun">,</span><span class="pln">fin</span><span class="pun">.</span><span class="pln">size</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;fin</span><span class="pun">.</span><span class="typ">Free</span><span class="pun">;</span><span class="pln">

&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="com">//打包文件</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">Dir</span><span class="pun">:=</span><span class="typ">ChangeFileExt</span><span class="pun">(</span><span class="typ">FileName</span><span class="pun">,</span><span class="str">''</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">for</span><span class="pln"> i</span><span class="pun">:=</span><span class="lit">0</span><span class="pln"> to header</span><span class="pun">.</span><span class="typ">Count</span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">do</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">begin</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inFileName</span><span class="pun">:=</span><span class="typ">Format</span><span class="pun">(</span><span class="str">'%s\%s.pvr'</span><span class="pun">,[</span><span class="typ">Dir</span><span class="pun">,</span><span class="typ">Index2</span><span class="pun">[</span><span class="pln">i</span><span class="pun">].</span><span class="typ">Name</span><span class="pun">]);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> </span><span class="typ">FileExists</span><span class="pun">(</span><span class="pln">inFileName</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">then</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">begin</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showMessage</span><span class="pun">(</span><span class="str">'Can not find file '</span><span class="pun">+</span><span class="pln"> inFileName</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fout</span><span class="pun">.</span><span class="typ">Free</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">exit</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">end</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fin</span><span class="pun">:=</span><span class="typ">TFileStream</span><span class="pun">.</span><span class="typ">Create</span><span class="pun">(</span><span class="pln">inFileName</span><span class="pun">,</span><span class="pln">fmOpenRead</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fout</span><span class="pun">.</span><span class="typ">CopyFrom</span><span class="pun">(</span><span class="pln">fin</span><span class="pun">,</span><span class="pln">fin</span><span class="pun">.</span><span class="pln">size</span><span class="pun">);</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fin</span><span class="pun">.</span><span class="typ">Free</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="kwd">end</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;&nbsp;&nbsp;fout</span><span class="pun">.</span><span class="typ">Free</span><span class="pun">;</span><span class="pln">
&nbsp;&nbsp;</span><span class="kwd">end</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">end</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">end</span><span class="pun">.</span></pre></div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

			<div style="margin:5px" id="att_11359">

			描述：程序源代码<br>

			附件： <img src="assets/1570946278-b5fa6ed7ddca3ee3eb717b54f148adb7.gif" align="absbottom"> <a href="https://bbs.sumisora.net/job.php?action=download&amp;pid=2123845&amp;tid=10917250&amp;aid=11359" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"> <font color="red" data-darkreader-inline-color="" style="--darkreader-inline-color:#e63f3c;">pvm.rar</font></a> (10 K) 下载次数:21

			</div>

		<div id="w_2123845" class="c"></div>

		<div><img class="signature" src="assets/1570946278-f23b8ffd0b6b327441aa828c9cd3243d.gif" align="absbottom"></div>
		<div class="signature" style="max-height:380px;maxHeight:380px; overflow:hidden;"><table width="100%"><tbody><tr><td><span class="highslide"><img src="assets/1570946278-ff3742aa5421026216472f96568d0238.JPG" border="0" style="max-width: 100%;max-height: 900px;"></span></td><td></td></tr></tbody></table></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2009-06-07 21:23 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 5楼(holand) 的帖子');" data-mx-warn="Empty URL">5 楼</a></span>

		</div></th>
	</tr></tbody></table>
</div>

<a name="a" data-mx-warn="Empty URL"></a><a name="2126646" data-mx-warn="Empty URL"></a>
<div class="t t2"><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570946278-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>37859365</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=263811" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570946278-bc3b3631a24154c2d9ba8189508a5212.gif" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_6"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">澄空新生</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570946278-be59bc9a4edb96b6b54ba67c9267b93f.gif"><br>

<span class="user-info2" id="showface_6">
<span class="user-infoWrap2">


精华:

		<span class="s4">0</span>
<br>
发帖: <span class="s1 f9">33</span><br>
学分: <span class="s2 f9">0 点</span><br>
澄空币: <span class="s3 f9">452 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2009-02-04<br>
		最后登录:2017-05-02 <br><br> 
		</span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_2126646" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=10917250&amp;pid=2126646&amp;article=6" onclick="return sendurl(this,4,event)" id="quote_2126646" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=10917250&amp;pid=2126646&amp;article=6" id="modify_2126646" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=263811" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=10917250&amp;pid=2126646" onclick="return sendurl(this,8)" id="report_2126646" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=10917250&amp;uid=263811" title="只看该作者的所有回复" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('2126646')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_2126646" class="fl">&nbsp;</h1>
			

			<div id="p_2126646" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_2126646">多谢了，我叫他看看 <img src="assets/1570946278-ca6ac492963a92579e253737c292a7c4.gif"></div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_2126646" class="c"></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2009-06-09 10:38 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 6楼(37859365) 的帖子');" data-mx-warn="Empty URL">6 楼</a></span>

		</div></th>
	</tr></tbody></table>
</div>

</form>
<div class="t3" style="margin:initial"><table cellspacing="0" cellpadding="0" width="100%" align="center">
	<tbody><tr><td align="left"></td>
		<td valign="center" align="right">
		<a class="abtn f_two" id="readlog" onclick="sendmsg('pw_ajax.php?action=readlog','',this.id);" data-mx-warn="Empty URL">帖子浏览记录<img src="assets/1570946278-5c8e409588b73ce4284cf5b9bd619e15.gif"></a>
		<select onchange="Fjump(this.options[this.selectedIndex].value)"><option value="" selected="">快速跳至</option>
<option value="1">&gt;&gt; 『澄空学园 办公楼区』</option>
<option value="2"> &nbsp;|- 【校园公告栏】</option>
<option value="5"> &nbsp;|- 【论坛意见箱】</option>
<option value="113">&gt;&gt; 『澄空学园 资讯社』</option>
<option value="47"> &nbsp;|- 【新鲜速报】</option>
<option value="103"> &nbsp;|- 【新作介绍】</option>
<option value="8"> &nbsp; &nbsp;|-  【电子杂志下载区】</option>
<option value="104"> &nbsp;|- 【杂志专题】</option>
<option value="7">&gt;&gt; 『澄空学园 教学楼区』</option>
<option value="62"> &nbsp;|- 【AGE主题学部】</option>
<option value="39"> &nbsp;|- 【Akabeesoft2主题学部】</option>
<option value="100"> &nbsp;|- 【AUGUST主题学部】</option>
<option value="42"> &nbsp;|- 【CIRCUS主题学部】</option>
<option value="40"> &nbsp;|- 【Cotton-Nekoneko主题学部】</option>
<option value="64"> &nbsp;|- 【GIGA主题学部】</option>
<option value="38"> &nbsp;|- 【Key主题学部】</option>
<option value="10"> &nbsp;|- 【KID主题学部】</option>
<option value="37"> &nbsp;|- 【Leaf主题学部】</option>
<option value="70"> &nbsp;|- 【minori主题学部】</option>
<option value="12"> &nbsp;|- 【Navel主题学部】</option>
<option value="65"> &nbsp;|- 【Nitro+主题学部】</option>
<option value="14"> &nbsp;|- 【Type-Moon应援会】</option>
<option value="17"> &nbsp; &nbsp;|-  【TM精华区】</option>
<option value="98"> &nbsp;|- 【Will主题学部】</option>
<option value="116"> &nbsp;|- 【FAVORITE主题学部】</option>
<option value="108"> &nbsp;|- 【ALcot主题学部】</option>
<option value="55"> &nbsp;|- 【GALGAME综合作品讨论室】</option>
<option value="97"> &nbsp; &nbsp;|-  【Light主题学部】</option>
<option value="117"> &nbsp; &nbsp;|-  【CUFFS主题学部】</option>
<option value="15"> &nbsp; &nbsp;|-  【Liar Soft主题学部】</option>
<option value="57"> &nbsp; &nbsp;|-  【Purple 主题学部】</option>
<option value="13"> &nbsp; &nbsp;|-  【工画堂主题学部】</option>
<option value="35"> &nbsp;|- 【GALGAME综合杂谈室】</option>
<option value="99"> &nbsp;|- 【ぱれっと主题学部】</option>
<option value="122"> &nbsp;|- 【SAGA PLANETS研讨室】</option>
<option value="123"> &nbsp;|- 【Lump of Sugar 研讨室】</option>
<option value="86">&gt;&gt; 『澄空学园 图书馆』</option>
<option value="80"> &nbsp;|- 【游戏鉴赏室】</option>
<option value="56"> &nbsp;|- 【GALGAME攻略馆】</option>
<option value="115"> &nbsp;|- 【作品出处问询室】</option>
<option value="63"> &nbsp;|- 【Galgame疑问求助室】</option>
<option value="18">&gt;&gt; 『澄空学园 教辅楼区』</option>
<option value="73"> &nbsp;|- 【同人游戏区】</option>
<option value="60"> &nbsp;|- 【二次元轻小说社】</option>
<option value="20"> &nbsp;|- 【日语自学教室】</option>
<option value="61"> &nbsp; &nbsp;|-  【日语学习资料区】</option>
<option value="118"> &nbsp; &nbsp;|-  【日语参考文章区】</option>
<option value="21"> &nbsp;|- 【一般游戏社团】</option>
<option value="24"> &nbsp;|- 【多媒体课堂】</option>
<option value="88">&gt;&gt; 『澄空学园 原创综合区』</option>
<option value="79"> &nbsp;|- 【原创游戏部】</option>
<option value="36"> &nbsp; &nbsp;|-  【ss-square】</option>
<option value="89"> &nbsp;|- 【MAD研究室】</option>
<option value="91"> &nbsp;|- 【莉可屋 REC ROOM】</option>
<option value="119"> &nbsp; &nbsp;|-  【澄空百合社翻唱作品】</option>
<option value="19"> &nbsp;|- 【澄空文学部】</option>
<option value="120"> &nbsp; &nbsp;|-  【落日余晖】</option>
<option value="23"> &nbsp;|- 【绘画工房】</option>
<option value="69"> &nbsp;|- 【活动投票区】</option>
<option value="74"> &nbsp;|- 【友谊赛投票区】</option>
<option value="58"> &nbsp;|- 【澄空部活室】</option>
<option value="41"> &nbsp;|- 【暑假原创作品活动专区】</option>
<option value="59"> &nbsp;|- 【实物周边交流区】</option>
<option value="85"> &nbsp; &nbsp;|-  【ComicMarket相关资料】</option>
<option value="82"> &nbsp; &nbsp;|-  【新品介绍】</option>
<option value="84"> &nbsp; &nbsp;|-  【综合交流】</option>
<option value="83"> &nbsp; &nbsp;|-  【好物收集】</option>
<option value="81"> &nbsp; &nbsp;|-  【交易求购】</option>
<option value="95"> &nbsp;|- 【澄空放送部】</option>
<option value="111"> &nbsp; &nbsp;|-  【放送策划室】</option>
<option value="27"> &nbsp;|- 【水下乐园LeMU】</option>
<option value="46"> &nbsp; &nbsp;|-  【美工作品收藏室】</option>
<option value="26"> &nbsp; &nbsp;|-  【COS自爆馆】</option>
<option value="90"> &nbsp; &nbsp;|-  【澄空期刊室】</option>
<option value="71"> &nbsp;|- 【澄空演剧部】</option>
<option value="9"> &nbsp; &nbsp;|-  演剧部排练室</option>
<option value="52"> &nbsp;|- 【废帖回收站】</option>
<option value="29">&gt;&gt; 『澄空学园 好物交流站』</option>
<option value="50"> &nbsp;|- 【澄空学园字幕作品】</option>
<option value="51"> &nbsp;|- 【澄空学园漫画作品】</option>
<option value="77"> &nbsp;|- 【游戏汉化交流区】</option>
<option value="28"> &nbsp; &nbsp;|-  【CK-GAL中文化小组】</option>
<option value="106"> &nbsp; &nbsp;|-  【PRO2】</option>
<option value="49"> &nbsp; &nbsp;|-      【桜】</option>
<option value="30"> &nbsp;|- 【资源求助区】</option>
<option value="32"> &nbsp;|- 【澄空音乐厅】</option>
<option value="33"> &nbsp;|- 【澄空美术馆】</option>
<option value="34"> &nbsp;|- 【动漫租售屋】</option>
<option value="44">&gt;&gt; 『澄空学园 课余工作区』</option>
<option value="45"> &nbsp;|- 【澄空漫画汉化组】</option>
<option value="48"> &nbsp;|-  【澄空学园字幕组】</option>
<option value="101"> &nbsp; &nbsp;|-  字幕组资料区</option>
<option value="72"> &nbsp;|- 【澄空学园分流组】</option>
<option value="87"> &nbsp;|- 【澄空学园新闻组】</option>
<option value="96"> &nbsp;|- 【澄空学园文学社】</option>
<option value="75"> &nbsp;|- 【澄空学园百合社】</option>
<option value="112"> &nbsp;|- 【澄空学园编辑部】</option>
<option value="114"> &nbsp;|- 【澄空学园美工部】</option>
<option value="121"> &nbsp;|-  【澄空祭运行委员会】</option>
</select></td>
		
	</tr>
	<tr><td style="padding-top: 12px;text-align: left;"><img src="assets/1570946278-ca4a91079181c2a5cb3514b2e5b5f035.gif" align="absbottom"> <b><a href="https://bbs.sumisora.net/index.php" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">『澄空学园』</a> » <a href="https://bbs.sumisora.net/thread.php?fid=78&amp;page=10" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">【汉化破解研讨室】</a></b> </td>
	<td style="padding-top: 12px;text-align: right;"><a href="https://bbs.sumisora.net/post.php?action=reply&amp;fid=78&amp;tid=10917250" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img src="assets/1570946278-132cb83b134d7ecd9b390389d489bc43.png"></a>

<a href="https://bbs.sumisora.net/post.php?fid=78" style="margin-left:.5em" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img src="assets/1570946278-8cab7ee31ae503cf78e5410d40cec291.png" id="td_post1"></a>
</td>
	</tr>
</tbody></table></div>




<form name="FORM" method="post" action="post.php?" enctype="multipart/form-data" onsubmit="return checkpost(document.FORM);">
<div class="t" style="margin-top:8px"><table cellspacing="0" cellpadding="0" align="center" width="100%">
	<tbody><tr>
		<td class="h" colspan="3"><b>快速发帖</b></td>
	</tr>
	<tr></tr>
	<tr class="tr2"><td colspan="100" style="border-bottom: 0px; --darkreader-inline-border-bottom: initial;" data-darkreader-inline-border-bottom=""></td></tr>
	<tr>
		<td valign="top" width="20%" class="f_one" style="padding:7px">
		<fieldset id="smiliebox" style="border: 1px solid rgb(213, 229, 232); --darkreader-inline-border-top:#354e51; --darkreader-inline-border-right:#354e51; --darkreader-inline-border-bottom:#354e51; --darkreader-inline-border-left:#354e51;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
		<legend>内容</legend>
		<br>
		<input type="checkbox" name="atc_usesign" value="1" checked="">使用签名<br>
		<input type="checkbox" name="atc_convert" value="1" checked="">Wind Code自动转换 <br>
	 	<input type="checkbox" id="atc_autoimg" name="atc_autoimg" value="1" onchange="onAutoImgchange()" checked="" title="此设置会记在浏览器中"><label for="atc_autoimg" title="此设置会记在浏览器中">自动分析img</label><br><br>
	 	
		<input type="checkbox" name="atc_requiresell" value="1" disabled="">出售此帖
		<input class="input" type="text" maxlength="3" size="3" name="atc_money" value="0">
		<br>
		<input type="checkbox" name="atc_requirervrc" value="1">加密此帖
		<input class="input" type="text" maxlength="6" size="3" name="atc_rvrc" value="0">
		<br>
		<br><br><a href="https://bbs.sumisora.net/read.php?tid=10925672" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">如何在帖子中贴图？</a>
		<br><a href="https://bbs.sumisora.net/read.php?tid=10942243" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Wind Code使用教程</a>
		<br><a href="https://bbs.sumisora.net/yume/recover/" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">恢复帖子内容</a>
		</fieldset>
		</td>
		<td width="60%" class="f_one" style="padding:7px">
		<div>


<blockquote style="width: 96%;" class="blockquote">澄空娘：『发帖前不看版规什么的，最讨厌了！
』</blockquote>

		<input type="text" class="input" name="atc_title" value="Re:会解压，不会压缩了" size="65">
		

		 认证码: <input class="input" type="text" name="gdcode" size="5" tabindex="6" onfocus="try{opencode('menu_gd',this)}catch(e){}"><br>
		

		</div><div style="padding:.3em 0">
		</div>
		<textarea onkeydown="quickpost(event)" id="atc_content" name="atc_content" rows="8" style="width:96%"></textarea>
		
		
		
		
		
		<div style="margin:5px 0">
		<div style="padding: 4px 10px 0px 0px; float: left; color: rgb(136, 136, 136); --darkreader-inline-color:#bfb9ac;" data-darkreader-inline-color="">按 Ctrl+Enter 直接提交</div>
		<input class="btn" type="submit" name="Submit" value=" 提 交 "></div>
		</td>
		<td width="20%" class="f_one">
		<div style="padding:3px; text-align:center; width:200px;">
		<fieldset id="smiliebox" style="border: 1px solid rgb(213, 229, 232); --darkreader-inline-border-top:#354e51; --darkreader-inline-border-right:#354e51; --darkreader-inline-border-bottom:#354e51; --darkreader-inline-border-left:#354e51;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<legend>表情</legend>
			<div id="menu_show"></div>
<span style="float:right; margin:3px 10px 5px;"><a id="td_face" style="cursor:pointer;" onclick="showDefault();" align="absmiddle" unselectable="on" data-mx-warn="Empty URL">[更多]</a></span>
<span style="float:left; margin:3px 10px 5px;"><a id="td_generalface" style="cursor:pointer;" onclick="showfaces();$('#td_generalface').fadeOut();" align="absmiddle" data-mx-warn="Empty URL">[显示表情]</a></span>
		</fieldset></div>
		
		
		</td>
	</tr>
</tbody></table></div></form>







</div>
<div id="bottom"></div><br>
<center class="gray">
<small><span id="windspend">Total 0.044162(s) query 6, Time is now 10-13 13:20, 
Load is low.
</span> <br>
Powered by <a href="http://www.phpwind.net/" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><b>PHPWind</b></a> <a href="http://www.phpwind.net/" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><b style="color: rgb(255, 153, 0); --darkreader-inline-color:#f7b24b;" data-darkreader-inline-color="">v6.3.2</b></a> Code © 2003-08 <a href="http://www.phpwind.com/" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><b>PHPWind.com</b></a> Corporation</small>
</center><br>
<div id="footer">
	<span class="f12 fl"></span><a href="https://bbs.sumisora.net/sendmail.php" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Contact us</a>

</div>
</div>
        
      </div>
    </body>
  </html>