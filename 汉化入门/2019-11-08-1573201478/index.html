
  <!DOCTYPE html>
  <html id="" class="">
    <!-- OriginalSrc: http://zt.tgbus.com/acghh/Teaching/2008/09/17/1452002509.shtml -->
    <head>
      <meta http-equiv="Content-Type" content="text/html"; charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />

      <title>汉化基础教程——ＡＳＭ篇-ACG汉化组-</title>
      

<link href="assets/1573201478-58d0aaaaac9013a348eacae64f778527.css" rel="stylesheet" type="text/css" referrerpolicy="no-referrer">
<link href="assets/1573201478-ea4422b02d1580776b2fa7eabaca9dd0.css" rel="stylesheet" type="text/css" referrerpolicy="no-referrer">


<style class="darkreader darkreader--fallback" media="screen"></style>
<style class="darkreader darkreader--text" media="screen"></style>
<style class="darkreader darkreader--invert" media="screen"></style>
<style class="darkreader darkreader--inline" media="screen">[data-darkreader-inline-bgcolor] {
  background-color: var(--darkreader-inline-bgcolor) !important;
}
[data-darkreader-inline-bgimage] {
  background-image: var(--darkreader-inline-bgimage) !important;
}
[data-darkreader-inline-border] {
  border-color: var(--darkreader-inline-border) !important;
}
[data-darkreader-inline-border-bottom] {
  border-bottom-color: var(--darkreader-inline-border-bottom) !important;
}
[data-darkreader-inline-border-left] {
  border-left-color: var(--darkreader-inline-border-left) !important;
}
[data-darkreader-inline-border-right] {
  border-right-color: var(--darkreader-inline-border-right) !important;
}
[data-darkreader-inline-border-top] {
  border-top-color: var(--darkreader-inline-border-top) !important;
}
[data-darkreader-inline-boxshadow] {
  box-shadow: var(--darkreader-inline-boxshadow) !important;
}
[data-darkreader-inline-color] {
  color: var(--darkreader-inline-color) !important;
}
[data-darkreader-inline-fill] {
  fill: var(--darkreader-inline-fill) !important;
}
[data-darkreader-inline-stroke] {
  stroke: var(--darkreader-inline-stroke) !important;
}
[data-darkreader-inline-outline] {
  outline-color: var(--darkreader-inline-outline) !important;
}</style>
<style class="darkreader darkreader--user-agent" media="screen">html {
    background-color: #181919 !important;
}
html, body, input, textarea, select, button {
    background-color: #181919;
}
html, body, input, textarea, select, button {
    border-color: #565452;
    color: #e4dfd7;
}
a {
    color: #448adb;
}
table {
    border-color: #4b4a48;
}
::placeholder {
    color: #b6afa3;
}
::selection {
    background-color: #1157ab;
    color: #fbf7f1;
}
::-moz-selection {
    background-color: #1157ab;
    color: #fbf7f1;
}
input:-webkit-autofill,
textarea:-webkit-autofill,
select:-webkit-autofill {
    background-color: #52560e !important;
    color: #e4dfd7 !important;
}
::-webkit-scrollbar {
    background-color: #1c1d1d;
    color: #c1bbb0;
}
::-webkit-scrollbar-thumb {
    background-color: #2a2b2b;
}
::-webkit-scrollbar-thumb:hover {
    background-color: #323333;
}
::-webkit-scrollbar-thumb:active {
    background-color: #3d3e3f;
}
::-webkit-scrollbar-corner {
    background-color: #181919;
}
* {
    scrollbar-color: #2a2b2b #1c1d1d;
}</style>
<style class="darkreader darkreader--sync" media="screen"></style>
<style class="darkreader darkreader--override" media="screen">.jfk-bubble {
    background-color: #000000 !important;
}
.vimvixen-hint {
    background-color: #705000 !important;
    border-color: #caa92c !important;
    color: #ece1c2 !important;
}</style>
<style type="text/css">@keyframes fadeInOpacity{0%{opacity:0}to{opacity:1}}:hover>*>.fbvd--wrapper{animation-name:fadeInOpacity;animation-duration:.3s;opacity:1}.fbvd--wrapper{position:absolute;top:10px;left:10px;opacity:0;text-align:center;margin:0;z-index:5}.fbvd--wrapper a{background: url("") no-repeat 3px 4.55px; background-color: #fff; display:inline-block;font:700 14px Helvetica,Arial,sans-serif;color:#4b4f56;text-decoration:none;vertical-align:middle;padding:0px 8px 0px;margin-right:8px;border-radius:2px; line-height: 22px; padding-left:19px; border: 1px solid #e7e7e7; background-size: 13px}.fbvd--wrapper a:last-child{margin-right:0}.fbvd--wrapper a:hover{text-decoration:none}.fbvd--wrapper a:focus{box-shadow:0 0 1px 2px rgba(88,144,255,.75),0 1px 1px rgba(0,0,0,.15);outline:none}.fbvd--wrapper b{font-size:13px;position:relative;top:1px;color:#3b5998;font-weight:400}</style>
<style class="darkreader darkreader--sync" media="screen"></style>
<style class="darkreader darkreader--cors" media="screen">@CHARSET "UTF-8";#bdshare ul,#bdshare_s ul,#bdshare ul li,#bdshare_s ul li,#bdshare_l_c ul li,#bdshare_m_c ul li,#bdshare_pop ul,#bdshare_pop ul li{list-style:none;margin:0;padding:0}#bdshare{_overflow-x:hidden;z-index:999999;padding-bottom:2px;font-size:12px;float:left;text-align:left!important;zoom:1}#bdshare a,#bdshare_s a,#bdshare_pop a{text-decoration:none;cursor:pointer}#bdshare a:hover,#bdshare_s a:hover,#bdshare_pop a:hover{color:#333;opacity:.8;filter:alpha(opacity=80)}#bdshare img{border:0;margin:0;padding:0;cursor:pointer}#bdshare h6,#bdshare_s h6{width:100%;font:14px/22px '宋体';text-indent:.5em;font-weight:700;border-top:1px solid #fbfbfb;border-bottom:1px solid #f2f1f1;background-color:#f6f6f6;float:left;padding:5px 0;margin:0}#bdshare ul,#bdshare_s ul{width:98%;float:left;padding:8px 0;margin-left:2px;overflow:hidden}#bdshare ul li,#bdshare_s ul li{width:47%;_width:41%;float:left;margin:4px 2px}#bdshare ul li a,#bdshare_s ul li a{color:#565656;font:12px '宋体';display:block;width:98%;padding:6px 0;text-indent:2.4em;*text-indent:1.8em;_text-indent:1.8em;border:1px solid #fff}#bdshare ul li a:hover,#bdshare_s ul li a:hover{background-color:#f3f3f3;border:1px solid #eee;-webkit-border-radius:3px;-moz-border-radius:3px}#bdshare p,#bdshare_s p{width:100%;height:21px;font:12px '宋体';border-top:1px solid #f2f1f1;background-color:#f8f8f8;float:left;padding:0;margin:0}#bdshare p a,#bdshare_s p a{width:auto;text-align:right;float:right;padding:0 5px}#bdshare_l{width:212px;position:absolute;top:0;background:#fff;text-align:left}#bdshare_l_c{width:210px;float:left;border:1px solid #e9e9e9;text-align:left}#bdshare_l_c ul li{width:47%;height:26px;float:left;margin:2px}#bdshare_l_c ul li a{background:url("") no-repeat;height:auto!important}#bdshare_m{width:132px;float:right;position:absolute;zoom:1;background:#fff}#bdshare_m_c{width:130px;float:left;border:1px solid #e9e9e9;overflow:hidden;background:#fff}#bdshare_m_c ul li{width:97%;_width:90%;float:left;margin:2px}#bdshare_m_c ul li a{background:url("") no-repeat;height:auto!important}#bdshare_l,#bdshare_m{-webkit-box-shadow:0 0 7px #eee;-moz-box-shadow:0 0 7px #eee;z-index:99999}#bdshare_pop{width:300px;border:6px solid #8f8f8f;padding:0;background:#f6f6f6;position:absolute;z-index:1000000;text-align:left}#bdshare_pop{-webkit-border-radius:5px;-moz-border-radius:5px}#bdshare_pop{-webkit-box-shadow:0 0 7px #aaa;-moz-box-shadow:0 0 7px #aaa}#bdshare_pop div{border:1px solid #e9e9e9;float:left;overflow:hidden;text-align:left}#bdshare_pop h5{width:100%;height:28px;color:#626262;font:14px/28px '宋体';font-weight:700;text-indent:.5em;float:left;margin:0;overflow:hidden}#bdshare_pop h5 b{width:22px;height:23px;background:url("") no-repeat 0 0;cursor:pointer;position:absolute;right:8px;top:4px}#bdshare_pop ul{width:100%;height:256px;background:#fff;float:left;padding:8px 0;margin:0;border-top:1px solid #f2f1f1;border-bottom:1px solid #f2f1f1;overflow:auto;overflow-x:hidden}#bdshare_pop ul li{width:130px;float:left;padding:2px;margin-left:6px;_margin-left:3px;height:29px;overflow:hidden}#bdshare_pop ul li a{background:url("") no-repeat;color:#565656;font:12px '宋体';display:block;width:75%;padding:6px 0 6px 28px;border:1px solid #fff}#bdshare_pop ul li a:hover{background-color:#f3f3f3;border:1px solid #eee;-webkit-border-radius:3px;-moz-border-radius:3px}#bdshare_pop p{width:100%;font:12px '宋体';float:left;padding:5px 0 8px;margin:0;overflow:hidden}#bdshare_pop p a{width:auto;text-align:right;float:right;padding:0 5px}#bdshare_l_c p a.goWebsite,#bdshare_m_c p a.goWebsite,#bdshare_pop p a.goWebsite{text-align:right;background:url("") no-repeat 0 center;line-height:16px;padding-left:12px;color:#8c8c8c}#bdshare_l_c p a.goWebsite:hover,#bdshare_m_c p a.goWebsite:hover,#bdshare_pop p a.goWebsite:hover{color:#00a9e0}span.bds_more{background:url("http://bdimg.share.baidu.com/static/images/is.png?cdnversion=20131219") no-repeat 0 5px!important}span.bds_more,.bds_tools a{display:block;font-family:'宋体',Arial;height:16px;float:left;cursor:pointer;padding-top:6px;padding-bottom:3px;padding-left:22px}.bds_tools a{background:url("http://bdimg.share.baidu.com/static/images/is.png?cdnversion=20131219") no-repeat}.bds_tools_32 a{background:url("") no-repeat;width:37px;height:37px;display:block;float:left;margin-right:3px;text-indent:-100em;cursor:pointer}.bds_tools_32 span.bds_more{background:url("") no-repeat 0 5px!important;width:37px;height:32px;text-indent:-100em;padding-left:0}.bds_tools_24 a{background:url("") no-repeat;width:29px;height:29px;display:block;float:left;margin-right:3px text-indent:-100em;padding-left:0;cursor:pointer}.bds_tools_24 span.bds_more{background:url("") no-repeat 0 5px!important;width:29px;height:24px;text-indent:-100em;padding-left:0}.bds_more{background-image:url("")!important;background-position:0 4px!important}span.bds_nopic,.bds_tools_32 span.bds_nopic,.bds_tools_24 span.bds_nopic{background-image:none!important;padding-left:3px!important}.bdshare_b img{float:left}.bdshare_b a.shareCount,.bds_tools a.shareCount,.bds_tools_32 a.shareCount,.bds_tools_24 a.shareCount{float:left;background:url("") no-repeat!important;margin:0;padding:0;text-align:center;padding-left:5px;color:#454545;font-family:'宋体'!important}.bdshare_b a.shareCount,.bds_tools_24 a.shareCount{width:39px;height:24px;background-position:0 0;font-size:12px;line-height:24px;margin-left:3px}.bdshare_b a.shareCount:hover,.bds_tools_24 a.shareCount:hover{color:#454545!important;background-position:-44px 0!important;opacity:1!important;filter:alpha(opacity=100)!important}.bds_tools a.shareCount{width:37px;height:16px;background-position:0 -30px!important;margin-top:5px;overflow:hidden;font-size:12px;line-height:16px}.bds_tools a.shareCount:hover{color:#454545!important;background-position:-42px -30px!important;opacity:1!important;filter:alpha(opacity=100)!important}.bds_tools_32 a.shareCount{width:43px;height:32px;background-position:0 -60px!important;margin-top:5px;overflow:hidden;font-size:14px;line-height:32px;text-indent:0!important}.bds_tools_32 a.shareCount:hover{color:#454545!important;background-position:-48px -60px!important;background-position:-48px -60px;opacity:1!important;filter:alpha(opacity=100)!important}.bds_tools_24 a.shareCount{margin-top:5px}.bds_qzone{background-position:0 -75px!important}.bds_tsina{background-position:0 -115px!important}.bds_bdhome{background-position:0 -155px!important}.bds_renren{background-position:0 -195px!important}.bds_tqq{background-position:0 -235px!important}.bds_kaixin001{background-position:0 -275px!important}.bds_tqf{background-position:0 -315px!important}.bds_hi{background-position:0 -355px!important}.bds_douban{background-position:0 -395px!important}.bds_tsohu{background-position:0 -435px!important}.bds_msn{background-position:0 -475px!important}.bds_qq{background-position:0 -515px!important}.bds_taobao{background-position:0 -555px!important}.bds_tieba{background-position:0 -595px!important}.bds_sohu{background-position:0 -675px!important}.bds_t163{background-position:0 -715px!important}.bds_qy{background-position:0 -755px!important}.bds_tfh{background-position:0 -795px!important}.bds_hx{background-position:0 -835px!important}.bds_fx{background-position:0 -875px!important}.bds_ff{background-position:0 -915px!important}.bds_xg{background-position:0 -955px!important}.bds_ty{background-position:0 -995px!important}.bds_s51{background-position:0 -1035px!important}.bds_fbook{background-position:0 -1115px!important}.bds_twi{background-position:0 -1155px!important}.bds_ms{background-position:0 -1195px!important}.bds_deli{background-position:0 -1235px!important}.bds_s139{background-position:0 -1275px!important}.bds_iguba{background-position:0 -1315px!important}.bds_linkedin{background-position:0 -1354px!important}.bds_copy{background-position:0 -1393px!important}.bds_ifeng{background-position:0 -1431px!important}.bds_tuita{background-position:0 -1470px!important}.bds_meilishuo{background-position:0 -1549px!important}.bds_mogujie{background-position:0 -1589px!important}.bds_diandian{background-position:0 -1629px!important}.bds_huaban{background-position:0 -1669px!important}.bds_leho{background-position:0 -1709px!important}.bds_wealink{background-position:0 -1749px!important}.bds_duitang{background-position:0 -1789px!important}.bds_thx{background-position:0 -1829px!important}.bds_mail{background-position:0 -1870px!important}.bds_print{background-position:0 -1910px!important}.bds_baidu{background-position:0 -1950px!important}.bds_share189{background-position:0 -1990px!important}.bds_youdao{background-position:0 -2030px!important}.bds_mshare{background-position:0 -2070px!important}.bds_mop{background-position:0 -2110px!important}.bds_yaoshi{background-position:0 -2150px!important}.bds_bdxc{background-position:0 -2190px!important}.bds_sqq{background-position:0 -2230px!important}.bds_sdo{background-position:0 -2270px!important}.bds_qingbiji{background-position:0 -2310px!important}.bds_people{background-position:0 -2350px!important}.bds_kanshou{background-position:0 -2390px!important}.bds_xinhua{background-position:0 -2430px!important}.bds_yaolan{background-position:0 -2470px!important}.bds_isohu{background-position:0 -2510px!important}.bds_bdysc{background-position:0 -2550px!important}.bds_ibaidu{background-position:0 -2590px!important}#bdshare .bds_fl5,#bdshare .bds_buzz,#bdshare .bds_zx{display:none}</style>
<style class="darkreader darkreader--sync" media="screen"></style>

      
    </head>
    <body onload="MM_preloadImages('images/a1.jpg','images/a3.jpg','images/a4.jpg','images/a5.jpg','images/a6.jpg','images/a7.jpg','images/a8.jpg')" class="mx-wc-selected-elem mx-wc-1573201478"><div id="bdshare" style="right: 0px; top: 166px; position: fixed; height: 330px; overflow: hidden;"><img src="assets/1573201478-60d0cf9445c8679a132df84e9dd505de.gif" alt="" style="float:left;margin-top:58px;"></div>
<div id="header">
	<div class="banner1"></div>
    <div class="banner2"></div>
    <div class="banner3"></div>
    <div class="banner4"></div>
    <div class="nav_menu">
    	<div class="nav_menu-1 left"></div>
        <div class="nav_menu-2 left">
   	    <a href="http://zt.tgbus.com/acghh/" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image1','','http://zt.tgbus.com/acghh/images/a1.jpg',1)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img src="assets/1573201478-69d0643e67e9fedc8eca76c706ed5ee4.jpg" name="Image1" width="55" height="44" border="0" id="Image1"></a><a href="http://zt.tgbus.com/acghh/news/" target="_blank" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image2','','http://zt.tgbus.com/acghh/images/a2.jpg',0)" referrerpolicy="no-referrer" rel="noopener noreferrer"><img src="assets/1573201478-564b3957cf1041ff115e0a74487860e7.jpg" name="Image2" width="89" height="44" border="0" id="Image2"></a> <a href="http://zt.tgbus.com/acghh/Project/" target="_blank" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image3','','http://zt.tgbus.com/acghh/images/a3.jpg',1)" referrerpolicy="no-referrer" rel="noopener noreferrer"><img src="assets/1573201478-27e9694f0673bd0822773af0ee656482.jpg" name="Image3" width="89" height="44" border="0" id="Image3"></a><a href="http://zt.tgbus.com/acghh/members/" target="_blank" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image4','','http://zt.tgbus.com/acghh/images/a4.jpg',1)" referrerpolicy="no-referrer" rel="noopener noreferrer"><img src="assets/1573201478-cf5e7253d64df00f596fcce38fd434cb.jpg" name="Image4" width="89" height="44" border="0" id="Image4"></a><a href="http://zt.tgbus.com/acghh/voices/" target="_blank" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image5','','http://zt.tgbus.com/acghh/images/a5.jpg',1)" referrerpolicy="no-referrer" rel="noopener noreferrer"><img src="assets/1573201478-5bc7edce65a349c390d5a8174f801f3f.jpg" name="Image5" width="123" height="44" border="0" id="Image5"></a><a href="http://zt.tgbus.com/acghh/work/" target="_blank" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image6','','http://zt.tgbus.com/acghh/images/a6.jpg',1)" referrerpolicy="no-referrer" rel="noopener noreferrer"><img src="assets/1573201478-36133329c3be078927f6406c9a6855d4.jpg" name="Image6" width="107" height="44" border="0" id="Image6"></a><a href="http://zt.tgbus.com/acghh/Teaching/" target="_blank" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image7','','http://zt.tgbus.com/acghh/images/a7.jpg',1)" referrerpolicy="no-referrer" rel="noopener noreferrer"><img src="assets/1573201478-55ed49a418716551e9eb9b182160ec47.jpg" name="Image7" width="90" height="44" border="0" id="Image7"></a><a href="http://forum.tgbus.com/forumdisplay.php?fid=33" target="_blank" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image8','','http://zt.tgbus.com/acghh/images/a8.jpg',1)" referrerpolicy="no-referrer" rel="noopener noreferrer"><img src="assets/1573201478-00733dbd5a62d0330c636bfe63c1266d.jpg" name="Image8" width="55" height="44" border="0" id="Image8"></a></div>
        <div class="nav_menu-3 right"></div>
    </div>
     <div class="banner5"></div>
</div>
<div id="main">
<div class="sso" style="margin:0 auto;width:1003px;	text-align: center;">
<ul>


</ul>
<div class="clear"></div>
</div>
  <div class="main2">
   	<div class="Screen3">
    	<div class="Speaking left">
        	<div class="Speaking-t"><b>汉化新闻-ACG汉化组</b></div>
            <div class="Speaking-c">
            	<div class="Article2">
                            <h1 class="Yellow">汉化基础教程——ＡＳＭ篇</h1>
                            <h2>作者：TGbus　来源：电玩巴士　发布时间：2008年09月17日　期望度：
17659
</h2>
                            <div id="txt_ad2" style="width:160px; height:600px; float:left; position:absolute; left:0px;  margin-top: 50px; ">
    <img width="100px" vspace="3" height="14px" border="0px" alt="�رչ��" onclick="javascript:document.getElementById('txt_ad2').style.display = 'none';" src="assets/1573201478-efb65f583d62884dbdf6b37125cf9a0f.gif">
    
</div>

<p>　　并非需要很多的计算机知识才能够进行程序跟踪，当然要想便捷有效的跟踪程序的确需要扎实的汇编语言基础。许多朋友都是出于个人爱好才接触汉化的，如果一开始进行跟踪就学习大量的硬件知识和汇编知识一定会感觉吃力而对自己丧失信心。其实学习ASM HACK完全可以遵循循序渐进的原则，先使用最简单但比较费力的方法，通过对程序认识的深入再不断改进自己的跟踪手段来提高效率。在这篇文章中我将讲解如何使用比较原始的方法来捕获游戏图片在ROM中的位置，这只是跟踪的第一步，如果想要捕获显示程序或解压程序就需要了解更多的知识才能实现，但这是后话了，让我们先从最简单的开始。 </p>
		<p>　　工具软件：<br>
　　BATGBA模拟器（一款免费的GBA模拟器，带基本的DEBUG功能。对于初学者不推荐使用NO$GBA） UltraEdit（全球最著名的文本编辑器，功能强大，中文界面） </p>
		<p>　　技术手册：<br>
　　ARM指令集手册（ARM是GBA使用的处理器芯片，学习汇编的必备工具书）<br>
　　几本计算机基础书籍（良好的计算机基础是你进行汉化的必要条件） </p>
		<p>&nbsp;</p>
		<p>　　其他：<br>
　　很多很多的耐心和一点点运气 </p>
		<p>&nbsp;</p>
		<p>　　在我们开始跟踪之前有必要了解一下GBA的芯片和模拟器的用法，大家开始的时候不用彻底学习这些知识，只要知道用法就可以。GBA使用的是ARM7TDMI处理器芯片，它和我们常见的INTER或AMD芯片有很大区别，不要把二者混为一谈。ARM使用RISC（精简指令集）架构 32位 16.78MHz。我们跟踪主要需要了解的是它的寄存器结构和汇编代码。ARM 处理器有二十七个寄存器，其中一些是在一定条件下使用的，所以一次只能使用十六个。<br>
　　寄存器 0 到寄存器 7 是通用寄存器并可以用做任何目的。<br>
　　寄存器 8 到 12 也是通用寄存器，但是在切换到 FIQ 模式的时候，使用它们的影子(shadow)寄存器。 <br>
　　寄存器 13 典型的用做 OS 栈指针，但也可被用做一个通用寄存器。<br>
　　寄存器 14 专职持有返回点的地址以便于写子例程。<br>
　　寄存器 15 是程序计数器。它除了持有指示程序当前使用的地址的二十六位数之外，还持有处理器的状态。<br>
　　寄存器在程序中的表示符号是R0-R15，大家先不要深究这些寄存器的功能和区别，只要知道这些寄存器的名称就可以，然后我们讲关键的地方。</p>
		<p>　　GBA和电脑一样，在运行任何程序时都遵循一个过程，先从卡带（ROM）里将程序或文件读入内存，然后将内存中的程序或文件按一定顺序装载到寄存器中，再由寄存器与处理器交互处理，将处理结果返回内存中。正是因为我们可以通过模拟器观察这个过程，才有跟踪的实现。那么GBA是如何将文件从ROM中装载到内存的呢？GBA在运行的时候将内存划分成一个连续的区域。用地址表示就是00000000H-FFFFFFFFH其中00000000H-08000000H是实际意义上的内存空间，而08000000H以后的地址则是ROM的地址映射，也就是说08000000H就是实际ROM中的首地址00000000H。GBA通过这个映射地址来读取ROM中的文件，理解这个概念很重要，也就是说你在寄存器中观察到的以08XXXXXXH表示的地址即说明此刻程序正从ROM里读取相应的文件，可能是程序，图片，文本，字库。这些正是我们需要找到的东西。</p>
		<p>　　如何才能截获这个地址呢？这就是模拟器的工作了，现在几乎所有的GBA模拟器都带有跟踪功能，允许你查看游戏运行过程中内存和寄存器里的内容，通过观察寄存器中的数值和内存中的程序，我们可以滴水不漏的获得游戏运行的全过程。以下让我们看看模拟器是如何跟踪游戏程序的。 </p>
		<p align="center">
				<img height="281" src="assets/1573201478-55f1b1ec652eed45b4913b69f211e2ee.png" width="227" border="0" alt="">
		</p>
		<p>　　打开BATGBA，看看DEBUG菜单下的内容，第一项是ENABLE，开始跟踪时可别忘选上它，否则跟踪无从谈起。第二项是UPDATE DIALOGS，这是自动刷新功能，当然跟踪时也要选上，否则你只能看到静止不动的程序。第三个选项就是我们的主角，观测功能菜单，在这个菜单中提供了10个不同的观测对象，我们主要用到的是最上面两个对象，CPU和DISASM。让我们选择这两个对象，这时候我们看见如下的两个窗口： </p>
		<p align="center">
				<img height="269" src="assets/1573201478-55f1b1ec652eed45b4913b69f211e2ee.png" width="397" border="0" alt="">
		</p>
		<p>　　（图片1）ARM7TDMI CPU窗口，你一眼就可以认出来，这个窗口表示的就是我们上文提到的GBA使用的那15个寄存器R0-R15，没错。既然所有的程序都必须经由寄存器才能与处理器交互，那么我们要找的地址也不例外，那些08XXXXXXH表示的地址都会在这些寄存器中出现，你只要在跟踪过程中从这些寄存器窗口中抓到它就可以了。 </p>
		<p>　　（图片2）ARM7TDMI ARM/THUMB DISASM窗口，就是将GBA内存中的数据反汇编成ARM汇编语言的窗口。通过这个窗口，我们可以以汇编语言的形式而不是二进制代码的形式来观察程序的运行过程，这大大方便了我们了解游戏是如何运行的。不论是字库显示程序，解压缩程序还是图片调用程序都需要在内存中运行，这些程序会被反编译成ARM的汇编指令在这个窗口显示，找到这些程序就是我们跟踪的目的。 </p>
		<p align="center">
				<img height="178" src="assets/1573201478-69714a2bde8de93b2b874f9fe61d09f2.png" width="240" border="0" alt="">
		</p>
		<p>　　下面我们以GBA游戏拿破伦传为例来看看怎样找到这个游戏中一个图片文件在ROM中的位置： </p>
		<p>　　（图片3）是我们需要找到图片文件，思考这样一个问题，GBA是通过哪几个步骤来完成这个图片的显示的？首先，GBA先将图片文件从ROM中读入内存，然后调用图象解析程序来处理这个图片文件，最后输出到显示屏上显示。我们暂时不考虑它的解析和输出过程，只要抓到它读取图片文件时的过程就可以找到它读取ROM的位置。那么它从哪里开始这个过程的呢？让我们看看这幅图片显示前的状态。 </p>
		<p align="center">
				<img height="177" src="assets/1573201478-69714a2bde8de93b2b874f9fe61d09f2.png" width="240" border="0" alt="">
		</p>
		<p>　　（图片4）是游戏里的一个选择菜单，当我们选择指挥官设定选项时，游戏随即显示我们需要跟踪的那个图片，也就是说，从你按下按键开始到（图片3）开始显示的这个过程中即包含了游戏调用图片文件的过程，我们就从这里来寻找图片文件在ROM中的地址数据。</p>
		<p>　　BATGBA提供了4种不同的跟踪模式，STEP INTO（F7），STEP OVER（F8），STEP LINE（F9），STEP FRAME（F10）这4种模式对应不同的程序运行流程，大家先不要深究它们，先这样理解，GBA在执行程序时是一条语句一条语句执行的，这4种模式对应不同的中断模式，打个比方说STEP FRAME（F10）是程序执行100条停止一次，STEP LINE（F9）是执行10条停止一次，而STEP OVER（F8）和STEP INTO（F7）则是每执行一条就停止一次。当然还有一个中断程序的方法，就是按（F4）键。你可以在游戏运行中的任何时候中断游戏。有了这5种中断模式我们就可以在游戏执行时在需要的地方暂停游戏来观察此时GBA寄存器和内存中的东东，也许你要找的图片地址就在其中。</p>
		<p>　　上文我们已经圈定了我们跟踪的范围，从你按下按键开始到（图片3）开始显示，这个过程只有短短的几秒钟，打开模拟器载入游戏，然后进入（图片4）的菜单。这时打开ARM7TDMI CPU窗口和ARM7TDMI ARM/THUMB DISASM窗口，你可以看到此刻寄存器和内存中的全部内容，但是好象没找到象08XXXXXXH这样的数据啊？别着急，在（图片4）的菜单中选择指挥官设定选项，在你按下按键的同时立即按（F4）键，这时游戏停止了，我们的跟踪旅程也就从此开始，上文我们讲到的4种中断模式中的STEP OVER（F8）和STEP INTO（F7）是单步跟踪模式，我们随便选一种，比如STEP INTO（F7），在你再次按下（F4）的同时按下（F7）键。好，我们现在切换到单步跟踪模式了。这时你仔细观察ARM7TDMI ARM/THUMB DISASM窗口，每当我们按一次（F7），窗口里的指针就向下移动一格，这表明游戏程序已经执行了一步。看看ARM7TDMI CPU窗口，寄存器R0-R15里的数值也变化了。可是还是没看见有08打头的数据，慢慢来，继续按（F7），观察ARM7TDMI CPU窗口里寄存器里的数值，我保证你一定会看到以08开头的数据，记下你见到的所有08XXXXXX样子的数据，直到模拟器窗口显示出（图片3）为止。这时你也许已经记下了许多以08开头的数据，这里面肯定包括（图片3）的地址，但哪个才是真的呢？简单，使用UltraEdit打开游戏的ROM文件，我们前面说过了，GBA把ROM里的地址都映射到08000000H之后，那么将你找到的数据转化成ROM里的地址的方法就是将开头的08变成00，比如你找到一个08123456的数据，那么它在ROM中表示的地址就是00123456H。将你记下的数据都按这种方法转换成ROM中的地址，然后在UltraEdit找到对应的地址下随便修改几个字节，保存。再用模拟器打开修改后的ROM。看看（图片3）是不是变样了？没有，再换下一个地址试试，直到找到一个地址[我可以告诉你这个地址是：00759E37H在UltraEdit修改后（图片3）变样了，那么恭喜你，你已经找到你需要的东西了。</p>
		<p>　　说到这里，你已经学会了使用最简单的方法跟踪了。但如果你真的按我上面说的一步一步跟踪程序的话，你一定会累死！别小看这短短几秒，其实程序已经执行了成千上万步了。如果一步一步跟踪的话，你一整天也跟不完。先别抱怨，谁让我们是菜鸟呢。便捷的方法当然有，但在你不了解跟踪原理，ARM汇编语言的情况下，这是唯一可行的办法，下面我们就来看看有没有更好的方法来提高效率。不过前提是你必须理解以上所说的内容，会使用单步跟踪来跟踪程序，否则提高无从谈起。</p>
		<p>　　如果你懒的理会那些繁琐复杂的汇编语言，其实可以利用模拟器提供的功能来缩短跟踪范围。记得我们提到的那4个中断模式吗？我们只使用了两个，不是还有两个吗？STEP FRAME（F10）一次中断执行的语句最多。如果用它来跟踪以上过程的话，只需要按几次就可以跟完，但是你很可能会遗漏掉程序读取ROM的过程，毕竟STEP FRAME（F10）中断时的位置不可能正好就在程序读取ROM时。让我们将这几种中断模式组合起来。STEP FRAME（F10）既然一次执行语句最多，让我们先用它来进行一次粗跟踪，假设从你按下按键开始到（图片3）开始显示这个过程一共执行了一万条语句，使用STEP FRAME（F10）跟踪，我们一共执行了10次中断，记下每次中断时寄存器的状态。这样我们就把一万条语句分割成10等份，假设我们估计调用ROM的程序在第9到第10状态之间，先用STEP FRAME（F10）跟踪到第9个状态，然后用STEP LINE（F9）来跟踪。因为STEP LINE（F9）一次执行的语句比STEP FRAME（F10）要少，所以它能跟踪到这两个状态之间的程序。如果使用STEP LINE（F9）还是没找到，就用STEP LINE（F9）将这两个状态再分割成更细的状态，使用单步跟踪来查找。如此我们等于将程序化整为零，如果运气好的话，我们根本不需要从头到尾全部跟踪就可以找到我们需要的图片地址。</p>
		<p>　　可是上述方法还是很笨，而且运气的成分太多。有没有更科学更有效的方法呢？有，当然有，这就是断点设置跟踪。它是目前最有效最科学的跟踪方法。不过要学习这个方法不了解程序和汇编是很难使用好的。让我们先了解一下程序的运行模式。不论是什么游戏程序都具有这样一种特征，假设我们把一个游戏程序看做一个完整的大程序，那么这个大程序就是由若干个功能相对独立的小程序组成的。他们可能是游戏初始化，图象显示，字库调用，文本调用，声音播放等等不同的功能，我们称这些具有相对独立功能的小程序为子程序。一个游戏程序就是由这一个一个子程序相互嵌套组成的。也就是说我们要找的图片调用过程也是子程序的一种，还有字库显示程序，解压缩程序都可以称为子程序。每条子程序都是由数量不等的汇编语句构成的。倘若我们能以子程序为单位而不是以单条语句为单位来进行跟踪的话不仅能大大提高效率，同时还能完整的捕获程序的代码，避免了盲目性。那么这些子程序在游戏中使用什么形式表示的呢？让我们以LZ77解压缩程序为例来看看子程序的模式。 </p>
		<p>00000DB4 Ldr r2,[r0],#0x4<br>
00000DB8 mov r2, r2,lsr #0x8 <br>
00000DBC mvn r9,#0x0 <br>
00000DC0 mov r10,#0x1 </p>
		<p>&nbsp;</p>
		<p>00000DC4 mov r6,#0x7<br>
00000DC8 ldrb r3,[r0],#0x1<br>
00000DCC ldrb r8,[r0],#0x1<br>
00000DD0 tst r10,r3,lsr r6<br>
00000DD4 beq 0xE08 </p>
		<p>&nbsp;</p>
		<p>00000DD8 mov r5,r8,lsr #0x4 <br>
00000DDC add r5,r5,#0x2 <br>
00000DE0 sub r2,r2,r5 <br>
00000DE4 and r8,r8,#0xF <br>
00000DE8 ldrb r4,[r0],#0x1 <br>
00000DEC orr r4,r4,r8,lsl #0x8 <br>
00000DF0 add r4,r4,#0x1 <br>
00000DF4 ldrb r8,[r1,-r4] <br>
00000DF8 strb r8,[r1],#0x1 <br>
00000DFC subs r5,r5,#0x1 <br>
00000E00 bpl 0xDF4 <br>
00000E04 b 0xE18 </p>
		<p>&nbsp;</p>
		<p>00000E08 tst r1,#0x1 <br>
00000E0C ldrneb r7,[r1,r9] <br>
00000E10 orrne r8,r7,r8,lsl #0x8 <br>
00000E14 strh r8,[r1],#0x1 </p>
		<p>&nbsp;</p>
		<p>00000E18 subs r2,r2,#0x1 <br>
00000E1C bmi 0xE2C <br>
00000E20 subs r6,r6,#0x1 <br>
00000E24 bpl 0xDCC<br>
00000E28 b 0xDC4 </p>
		<p>&nbsp;</p>
		<p>　　这就是一段完整的子程序，它具有相对独立完整的功能。让我们实际跟踪一下看看它是如何运行的。找到一个使用LZ77压缩的游戏（如逆转裁判或铸剑物语）用模拟器打开，这时请看ARM7TDMI ARM/THUMB DISASM窗口右上方，是不是有一个BREAK文本框？那就是我们设置断点的地方，先按（F4）键暂停游戏，在这个文本框里输入00000DB4，点击SET按键。好，我们已经设置好一个断点了。再按（F4）键运行游戏，不久游戏就停止在00000DB4处了。然后我们使用（F7）键单步跟踪一下，你会发现窗口里的指针总是在00000DB4-00000E28之间来回循环跳转。这时让我们使用（F4）键中断试试。哈，每按一次，程序就中断到我们设的断点位置，同时观察ARM7TDMI CPU窗口中寄存器的变化你会发现子程序进行了一次循环。这样我们一次中断跟踪就是以一次子程序循环为单位，再也不用逐条语句的看了。象这样的子程序在游戏中随处可见。随便你找个什么游戏，使用单步跟踪观察一下就会发现，ARM7TDMI ARM/THUMB DISASM窗口中的指针总是在一个地址段中循环执行后再跳转到下一个地址段继续循环执行。这样一个连续的循环地址段所包含的语句段都是子程序。那么什么时候程序才能跳出一个循环到下一个循环呢？这就要求你能读懂子程序的跳转条件了。先别着急去读它，我们先总结一下设置断点的步骤，首先找到游戏程序中的一段子程序，然后在子程序开始的位置设置断点，断点的表示方式就是子程序在内存中的地址。</p>
		<p>　　这就是设置断点的跟踪方法，在实际跟踪中我们往往需要综合我们上述讲到的所有方法来协调跟踪。首先圈定你的跟踪范围，在这个范围中使用单步跟踪或分割跟踪先找到一段子程序，在子程序的开始位置设置断点，转换成断点跟踪模式，努力读懂子程序的跳转条件，找到子程序跳转后的位置，再在这个子程序将要跳出循环时使用单步跟踪跟到下一个子程序，再设断点继续跟踪下一段子程序，如此下去，直到你找到需要的图片显示程序或字库显示程序为止。</p>
		<p>　　断点跟踪是不是很奇妙？不过这时你也许会抱怨BATGBA模拟器了，它每次只能设一个断点，有时跳转条件没读懂还容易跟出界。没办法，剑术既然已经高超了，让我们换更好的剑使用。NO$GBA，这个模拟器可以一次设好几个断点，同时允许你自己设定程序运行多少步中断一次，不用担心跟出界了吧？还有CowBite，它允许你倒退跟踪几步来观察程序，这对于寻找子程序跳转位置太有用了，不过它对游戏的兼容性一般。 </p>
		<p>　　小结：ASM跟踪的基本方法我们就讲完了。（什么？这只是基本方法？？？？）没错。真正跟踪的时候光靠这些是不够的，你如何圈定你的跟踪范围，如何判断你找到的地址和程序就是你需要的。这些就有赖于你对汉化其他知识的了解了，字库，文本，图片的结构，压缩算法等等知识。你对游戏汉化了解的越深，跟踪起来就越得心应手。大家也许奇怪我在文档中只字未提ARM汇编语言，原因是想讲清一门语言不是三言两语就能说清的。这需要你平时不断的积累，学习，多读多看程序。那本ARM指令集手册就是最好的教材。你不一定全读懂，能读懂40%再看子程序就容易多了。文中提到的所有技术手册和软件各汉化网站都有下载，还等什么？马上开始你的跟踪之路吧。</p>

<div class="sso" style="margin:0 auto;width:336px;">
<ul>


</ul>
<div class="clear"></div>
</div>
                        <div class="clear"></div>
        </div>
                <div class="Sort"><span id="pe100_page_contentpage" class="pagecss"><a href="http://zt.tgbus.com/acghh/Teaching/2008/09/17/1452002509.shtml" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">首页</a> <a href="http://zt.tgbus.com/acghh/Teaching/2008/09/17/1452002509.shtml" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">上一页</a>
 <a href="http://zt.tgbus.com/acghh/Teaching/2008/09/17/1452002509.shtml" class="c" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">[1]</a> 
 <a href="http://zt.tgbus.com/acghh/Teaching/2008/09/17/1452002509.shtml" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">下一页</a>
 <a href="http://zt.tgbus.com/acghh/Teaching/2008/09/17/1452002509.shtml" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">尾页</a> 共1页
</span></div>
                <div class="butter2">
<ul>
<li>

上一篇：
<a href="http://zt.tgbus.com/acghh/Teaching/2008/09/17/1454342510.shtml" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">汉化基础教程——压缩篇</a>
</li>
<li>

下一篇：
<a href="http://zt.tgbus.com/acghh/Teaching/2008/09/17/1450482508.shtml" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">汉化基础教程——文字篇（五）</a>
</li>
</ul>
                         </div>
            </div>
            <div class="Speaking-b"></div>
        </div>
        <div class="Works right">
        	<div class="Works2">
        	<div class="Works-t"><b>汉化作品</b></div>
            <div class="Works-c">
            	<ul><li>
                    	<a href="http://zt.tgbus.com/acghh/news/2011/04/01/17552424236.shtml" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img src="assets/1573201478-e79b9c44de0f0daf4ac67d33a661519c.jpg" width="255" height="146" alt=""></a>
						<h2 class="Yellow"><a href="http://zt.tgbus.com/acghh/news/2011/04/01/17552424236.shtml" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">口袋妖怪黑白</a></h2>
                        <p></p>
                    </li>
                
                
                    <li>
                    	<a href="http://zt.tgbus.com/acghh/news/2010/12/08/19295122175.shtml" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img src="assets/1573201478-520162a23c037e3873ff83d170da9951.jpg" width="255" height="146" alt=""></a>
						<h2 class="Yellow"><a href="http://zt.tgbus.com/acghh/news/2010/12/08/19295122175.shtml" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">怪物猎人携带版3</a></h2>
                        <p></p>
                    </li> 
                	<li>
                    	<a href="http://zt.tgbus.com/acghh/news/2010/11/26/15032321820.shtml" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img src="assets/1573201478-914beb65d3689bedfa29d77d2c42af65.jpg" width="255" height="146" alt=""></a>
						<h2 class="Yellow"><a href="http://zt.tgbus.com/acghh/news/2010/11/26/15032321820.shtml" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">黄金太阳:漆黑的黎明</a></h2>
                        <p></p>
                    </li>            		
                    <li>
                    	<a href="http://zt.tgbus.com/acghh/news/2010/11/19/14403921619.shtml" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img src="assets/1573201478-81d69ad7150cfa6783bc2127bcb07ed7.jpg" width="255" height="146" alt=""></a>
						<h2 class="Yellow"><a href="http://zt.tgbus.com/acghh/news/2010/11/19/14403921619.shtml" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">风来的西林4</a></h2>
                        <p></p>
                    </li>           		
            	</ul>
            </div>
            <div class="Works-b"></div>
        </div>
        </div>
   	  <div class="clear"></div>
    </div>
<div class="Copyright"><b>Copyright 2008-2013 <span class="Yellow">A.C.G </span>All rights reserved </b></div>
        <div class="clear"></div>
    </div>
    <div class="main2-b"></div>
     <div class="clear"></div>
</div>






<a href="" download="" data-mx-warn="Empty URL"></a>
</body>
  </html>