
  <!DOCTYPE html>
  <html id="" class="">
    <!-- OriginalSrc: https://bbs.sumisora.net/read.php?tid=211852&fpage=14 -->
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />

      <title>[原创]ef-first主程序中文支持试验。|【汉化破解研讨室】|【游戏汉化交流区】 - 『澄空学园』 GalGame专题网</title>
      

<link rel="stylesheet" type="text/css" href="assets/1570906273-5f21d2d0f0e14c54e3e080ff47c8ec08.css" referrerpolicy="no-referrer">
<link type="text/css" href="assets/1570906273-2f10d407050ab6b2185fb483267feb32.css" rel="stylesheet" referrerpolicy="no-referrer">
<link href="assets/1570906273-6ea61090578ddc8e91dc9b26707cebc8.css" rel="stylesheet" type="text/css" referrerpolicy="no-referrer">
<link rel="stylesheet" type="text/css" href="assets/1570906273-46d427da9cafb653c4ed606490c99b3a.css" referrerpolicy="no-referrer">


<style class="darkreader darkreader--fallback" media="screen"></style>
<style class="darkreader darkreader--text" media="screen"></style>
<style class="darkreader darkreader--invert" media="screen"></style>
<style class="darkreader darkreader--inline" media="screen">[data-darkreader-inline-bgcolor] {
  background-color: var(--darkreader-inline-bgcolor) !important;
}
[data-darkreader-inline-bgimage] {
  background-image: var(--darkreader-inline-bgimage) !important;
}
[data-darkreader-inline-border] {
  border-color: var(--darkreader-inline-border) !important;
}
[data-darkreader-inline-border-bottom] {
  border-bottom-color: var(--darkreader-inline-border-bottom) !important;
}
[data-darkreader-inline-border-left] {
  border-left-color: var(--darkreader-inline-border-left) !important;
}
[data-darkreader-inline-border-right] {
  border-right-color: var(--darkreader-inline-border-right) !important;
}
[data-darkreader-inline-border-top] {
  border-top-color: var(--darkreader-inline-border-top) !important;
}
[data-darkreader-inline-boxshadow] {
  box-shadow: var(--darkreader-inline-boxshadow) !important;
}
[data-darkreader-inline-color] {
  color: var(--darkreader-inline-color) !important;
}
[data-darkreader-inline-fill] {
  fill: var(--darkreader-inline-fill) !important;
}
[data-darkreader-inline-stroke] {
  stroke: var(--darkreader-inline-stroke) !important;
}
[data-darkreader-inline-outline] {
  outline-color: var(--darkreader-inline-outline) !important;
}</style>
<style class="darkreader darkreader--user-agent" media="screen">html {
    background-color: #191a1b !important;
}
html, body, input, textarea, select, button {
    background-color: #191a1b;
}
html, body, input, textarea, select, button {
    border-color: #5a5956;
    color: #f0ebe2;
}
a {
    color: #4791e7;
}
table {
    border-color: #4f4e4c;
}
::placeholder {
    color: #bfb9ac;
}
::selection {
    background-color: #125cb4;
    color: #fffffd;
}
::-moz-selection {
    background-color: #125cb4;
    color: #fffffd;
}
input:-webkit-autofill,
textarea:-webkit-autofill,
select:-webkit-autofill {
    background-color: #565a0f !important;
    color: #f0ebe2 !important;
}
::-webkit-scrollbar {
    background-color: #1d1f1f;
    color: #cbc5b9;
}
::-webkit-scrollbar-thumb {
    background-color: #2c2d2d;
}
::-webkit-scrollbar-thumb:hover {
    background-color: #343636;
}
::-webkit-scrollbar-thumb:active {
    background-color: #404142;
}
::-webkit-scrollbar-corner {
    background-color: #191a1b;
}
* {
    scrollbar-color: #2c2d2d #1d1f1f;
}</style>
<style class="darkreader darkreader--sync" media="screen"></style>
<style class="darkreader darkreader--sync" media="screen"></style>
<style class="darkreader darkreader--sync" media="screen"></style>
<style class="darkreader darkreader--sync" media="screen"></style>
<style type="text/css"> 
.tr3 td,.tr3 th{border-right:1px solid #D5E5E8;}
.y-style{text-align:center;}
.tr1 th{border-right:1px solid #D5E5E8;}
.tr1 td.td1{border-left:0}
 

.signature img { max-height:250px !important; }
</style>
<style class="darkreader darkreader--sync" media="screen"></style>
<style class="darkreader darkreader--override" media="screen">.jfk-bubble {
    background-color: #000000 !important;
}
.vimvixen-hint {
    background-color: #765500 !important;
    border-color: #d5b22e !important;
    color: #f9edcc !important;
}</style>
<style type="text/css">@keyframes fadeInOpacity{0%{opacity:0}to{opacity:1}}:hover>*>.fbvd--wrapper{animation-name:fadeInOpacity;animation-duration:.3s;opacity:1}.fbvd--wrapper{position:absolute;top:10px;left:10px;opacity:0;text-align:center;margin:0;z-index:5}.fbvd--wrapper a{background: url("") no-repeat 3px 4.55px; background-color: #fff; display:inline-block;font:700 14px Helvetica,Arial,sans-serif;color:#4b4f56;text-decoration:none;vertical-align:middle;padding:0px 8px 0px;margin-right:8px;border-radius:2px; line-height: 22px; padding-left:19px; border: 1px solid #e7e7e7; background-size: 13px}.fbvd--wrapper a:last-child{margin-right:0}.fbvd--wrapper a:hover{text-decoration:none}.fbvd--wrapper a:focus{box-shadow:0 0 1px 2px rgba(88,144,255,.75),0 1px 1px rgba(0,0,0,.15);outline:none}.fbvd--wrapper b{font-size:13px;position:relative;top:1px;color:#3b5998;font-weight:400}</style>
<style class="darkreader darkreader--sync" media="screen"></style>

      <style class="mx-wc-style">
        .mx-wc-main img {max-width: 100%;}
        .mx-wc-main{
          box-sizing: content-box;
          background-color: rgb(25, 26, 27) !important;
          margin: 0 auto;
          margin-top: 20px;
          max-width: 1349px;
        }
        @media (min-width: 768px) {
          .mx-wc-main { padding: 15px 15px 80px 15px }
        }
        @media (max-width: 767px) {
          .mx-wc-main { padding: 15px 3px 80px 3px }
        }
  
      </style>
    </head>
    <body style="background-color: #ffffff !important; min-height: 100%; height: auto; position: static !important; overflow: auto !important; padding-bottom: 0px !important;" id="" class="">
      <div class="mx-wc-main">
        <div id="wrapA" class="mx-wc-selected-elem mx-wc-1570906273" style="display: block; float: none !important; position: relative !important; top: 0px !important; left: 0px !important; margin: 0px !important; flex: unset !important; width: 100% !important; max-width: 100% !important; box-sizing: border-box !important;">

<div id="header">
<div class="toptool tar">	<span>
	<a href="https://bbs.sumisora.net/read.php?tid=211852&amp;fpage=14&amp;skinco=simple" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">手机版</a>

	| <a style="cursor:pointer;" id="td_skin" data-mx-warn="Empty URL">风格切换<img src="assets/1570906273-5c8e409588b73ce4284cf5b9bd619e15.gif"></a>
	| <a href="https://bbs.sumisora.net/read.php?tid=10894912" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">学生手册</a>
	</span>
</div>
<table cellspacing="0" cellpadding="0" align="center" width="100%">
<tbody><tr>
	<td class="banner"><a href="https://bbs.sumisora.net/" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img id="forumlogo" src="assets/1570906273-7ac78a0e1e3ce795251288b0c8bd4b1b.png"></a></td>
	<td class="banner" id="banner" align="right"></td>
</tr>
<tr><td align="center" height="1" colspan="2"></td></tr>
</tbody></table>
<div id="h_guide" class="guide" colspan="2"><span class="s3">»</span>

	<span style="font-weight:bold" class="s3">silasu</span>&nbsp;<a href="https://bbs.sumisora.net/login.php?action=quit&amp;verify=034be2bd" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">退出</a> |
	<a id="td_profile" href="https://bbs.sumisora.net/profile.php" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">控制面板</a>
	| <a id="td_msg" href="https://bbs.sumisora.net/message.php" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">

	短消息</a>

	| <a id="td_sort" href="https://bbs.sumisora.net/sort.php" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">统计排行</a>

	| <a href="https://bbs.sumisora.net/member.php" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">会员</a>

	| <a href="https://bbs.sumisora.net/search.php" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">搜索</a>
	| <a style="cursor:pointer;" id="td_hack" data-mx-warn="Empty URL">社区服务<img src="assets/1570906273-5c8e409588b73ce4284cf5b9bd619e15.gif"></a>

	| <a href="https://bbs.sumisora.net/hack.php?H_name=galgamevote" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">GALGAME角色人气投票活动</a>

 | <a href="https://bbs.sumisora.net/yume/polls/" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">近期关注</a><!--[if lte IE 6]>
 | <a href="read.php?tid=10955539" style="color:red">本站已停止支持IE6，请升级或更换浏览器</a>
<![endif]-->
</div>



</div>
<div id="main">




<div class="t3" style="margin-top:8px"><table width="100%" cellspacing="0" cellpadding="0" align="center">
	<tbody><tr><td class="b"><img src="assets/1570906273-ca4a91079181c2a5cb3514b2e5b5f035.gif" align="absmiddle"> <a href="https://bbs.sumisora.net/index.php" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">『澄空学园』</a> » <a href="https://bbs.sumisora.net/thread.php?fid=77" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">【游戏汉化交流区】</a> » <a href="https://bbs.sumisora.net/thread.php?fid=78&amp;page=14" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">【汉化破解研讨室】</a> » <a href="https://bbs.sumisora.net/read.php?tid=211852" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">[原创]ef-first主程序中文支持试验。</a> <a href="https://bbs.sumisora.net/rss.php?tid=211852" target="_blank" title="Rss订阅本帖最新内容" referrerpolicy="no-referrer" rel="noopener noreferrer"><img align="absmiddle" src="assets/1570906273-b4369735f1bfb33ab69477230a8ba635.png"></a></td></tr>
</tbody></table></div>

<!--ads begin-->

<!--ads end-->
<div class="t3"><table width="100%" align="center" cellspacing="0" cellpadding="0">
	<tbody><tr><td align="left"><div class="fl"></div></td><td align="right" style="padding-bottom:.2em"><a href="https://bbs.sumisora.net/post.php?action=reply&amp;fid=78&amp;tid=211852" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img src="assets/1570906273-132cb83b134d7ecd9b390389d489bc43.png"></a>

<a href="https://bbs.sumisora.net/post.php?fid=78" style="margin-left:.5em" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img src="assets/1570906273-8cab7ee31ae503cf78e5410d40cec291.png" id="td_post"></a>

</td></tr>
</tbody></table></div>



<form name="delatc" method="post">


<div class="t" style="margin-bottom: 0px; border-bottom: 0px; --darkreader-inline-border-bottom: initial;" data-darkreader-inline-border-bottom=""><table cellspacing="0" cellpadding="0" width="100%">
	<tbody><tr><th class="h"><strong class="fl w"><b>本页主题:</b> [原创]ef-first主程序中文支持试验。</strong>
	<span class="fr w"><a data-mx-warn="Empty URL">&nbsp;</a><a href="https://bbs.sumisora.net/job.php?action=previous&amp;fid=78&amp;tid=211852&amp;fpage=14&amp;goto=previous" class="fn" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">上一主题</a> | <a href="https://bbs.sumisora.net/job.php?action=previous&amp;fid=78&amp;tid=211852&amp;fpage=14&amp;goto=next" class="fn" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">下一主题</a> | <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span> </th>
	</tr>
	<tr><td></td></tr>
	<tr class="tr2"><td colspan="2" class="tar">

		<a id="usetool" style="cursor:pointer" onclick="sendmsg('pw_ajax.php?action=usetool','',this.id)" data-mx-warn="Empty URL">[使用道具]</a>

		<br></td>
	</tr>
	<tr><td></td></tr>
</tbody></table></div>

<a name="tpc" data-mx-warn="Empty URL"></a>
<div class="t t2" style="border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top=""><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570906273-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>galaxy</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=25362" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570906273-15b0cc09eb7bf86a196f685356df0e9c.jpg" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_0"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">澄空一年生上学期</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570906273-f43195cd588caa26c296fcc61910b3e6.gif"><br>

<span class="user-info2" id="showface_0">
<span class="user-infoWrap2">


精华:

		<span class="s4">0</span>
<br>
发帖: <span class="s1 f9">113</span><br>
学分: <span class="s2 f9">0 点</span><br>
澄空币: <span class="s3 f9">447 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2005-10-22<br>
		最后登录:2017-03-10 <br><br> 
		<img src="assets/1570906273-10186ca2cfdf99ebea095f161305d74e.gif" title="2号入学纪念勋章"> <img src="assets/1570906273-7ebb3badddf297e28ab225953414c797.gif" title="5号入学纪念勋章"> <br></span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_tpc" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=211852&amp;pid=tpc&amp;article=0" onclick="return sendurl(this,4,event)" id="quote_tpc" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=211852&amp;pid=tpc&amp;article=0" id="modify_tpc" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=25362" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=211852&amp;pid=tpc" onclick="return sendurl(this,8)" id="report_tpc" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=211852&amp;uid=25362" title="只看楼主的所有帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('tpc')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_tpc" class="fl">&nbsp;[原创]ef-first主程序中文支持试验。</h1>
			

			<div id="p_tpc" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_tpc">本人非计算机专业，在rednaxela的一次指导后解决了字符边界检查和CreateFontA的CharSet两个基本问题。只等打包器就可以自己玩汉化版了。<br>工具OllyDBG<br><br><b>字符边界检查：</b><br>特征是：<br><h6 class="quote"><a href="javascript:" onclick="CopyCode(document.getElementById('code1'));" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Copy code</a></h6><pre class="prettyprint" id="code1" style="border-radius:5px;font-family:monaco,consolas,monospace;font-size:12px;overflow-x:auto;line-height:1.4em"><span class="pln">cmp al</span><span class="pun">,</span><span class="lit">80</span><span class="pln">
jbe xxxxxxxx
cmp al</span><span class="pun">,</span><span class="lit">09F</span><span class="pln">
jb xxxxxxxx
cmp al</span><span class="pun">,</span><span class="lit">0E0</span><span class="pln">
jb xxxxxxxx
cmp al</span><span class="pun">,</span><span class="lit">0FC</span><span class="pln">
ja xxxxxxxx</span></pre><br><span style="color: blue; --darkreader-inline-color:#447fe5;" data-darkreader-inline-color="">就先改这一处吧，别的以后慢慢看</span><br>即看字符是否在80-98和e0-fc之间，由于GB2312比Shift-JFS范围大，把98与fc改为fe。实际上就是破坏边界检查.<br><br>实际找时用搜索方法找cmp al, 80等，我没找到就在显示文字时单步执行，发现了CMP ESI,81，然后往下看发现了4个cmp，就用它了。<br><h6 class="quote"><a href="javascript:" onclick="CopyCode(document.getElementById('code2'));" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Copy code</a></h6><pre class="prettyprint" id="code2" style="border-radius:5px;font-family:monaco,consolas,monospace;font-size:12px;overflow-x:auto;line-height:1.4em"><span class="lit">0044FDB5</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  E8 </span><span class="lit">56FFFFFF</span><span class="pln"> &nbsp;  &nbsp;  CALL ef_first</span><span class="pun">.</span><span class="lit">0044FD10</span><span class="pln">
</span><span class="lit">0044FDBA</span><span class="pln">  </span><span class="pun">|&gt;</span><span class="pln">  </span><span class="lit">8B47</span><span class="pln"> </span><span class="lit">14</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;   </span><span class="pun">/</span><span class="pln">MOV EAX</span><span class="pun">,</span><span class="pln">DWORD PTR DS</span><span class="pun">:[</span><span class="pln">EDI</span><span class="pun">+</span><span class="lit">14</span><span class="pun">]</span><span class="pln">
</span><span class="lit">0044FDBD</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">33C9</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp;   </span><span class="pun">|</span><span class="pln">XOR ECX</span><span class="pun">,</span><span class="pln">ECX
</span><span class="lit">0044FDBF</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">8A08</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp;   </span><span class="pun">|</span><span class="pln">MOV CL</span><span class="pun">,</span><span class="pln">BYTE PTR DS</span><span class="pun">:[</span><span class="pln">EAX</span><span class="pun">]</span><span class="pln">
</span><span class="lit">0044FDC1</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">8BF1</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp;   </span><span class="pun">|</span><span class="pln">MOV ESI</span><span class="pun">,</span><span class="pln">ECX
</span><span class="lit">0044FDC3</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">85F6</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp;   </span><span class="pun">|</span><span class="pln">TEST ESI</span><span class="pun">,</span><span class="pln">ESI
</span><span class="lit">0044FDC5</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">0F84</span><span class="pln"> </span><span class="lit">1F050000</span><span class="pln"> &nbsp;   </span><span class="pun">|</span><span class="pln">JE ef_first</span><span class="pun">.</span><span class="lit">004502EA</span><span class="pln">
</span><span class="lit">0044FDCB</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">40</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  </span><span class="pun">|</span><span class="pln">INC EAX
</span><span class="lit">0044FDCC</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">81FE</span><span class="pln"> </span><span class="lit">81000000</span><span class="pln"> &nbsp;   </span><span class="pun">|</span><span class="pln">CMP ESI</span><span class="pun">,</span><span class="lit">81</span><span class="pln">
</span><span class="lit">0044FDD2</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">8947</span><span class="pln"> </span><span class="lit">14</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;   </span><span class="pun">|</span><span class="pln">MOV DWORD PTR DS</span><span class="pun">:[</span><span class="pln">EDI</span><span class="pun">+</span><span class="lit">14</span><span class="pun">],</span><span class="pln">EAX
</span><span class="lit">0044FDD5</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">72</span><span class="pln"> </span><span class="lit">1C</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp;  </span><span class="pun">|</span><span class="pln">JB SHORT ef_first</span><span class="pun">.</span><span class="lit">0044FDF3</span><span class="pln">
</span><span class="lit">0044FDD7</span><span class="pln"> &nbsp;  &nbsp; </span><span class="lit">81FE</span><span class="pln"> </span><span class="lit">9F000000</span><span class="pln"> &nbsp;   CMP ESI</span><span class="pun">,</span><span class="lit">9F</span><span class="pln"> &nbsp;  </span><span class="pun">*</span><span class="pln">
</span><span class="lit">0044FDDD</span><span class="pln"> &nbsp;  &nbsp; </span><span class="lit">0F86</span><span class="pln"> </span><span class="lit">8C000000</span><span class="pln"> &nbsp;   JBE ef_first</span><span class="pun">.</span><span class="lit">0044FE6F</span><span class="pln">
</span><span class="lit">0044FDE3</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">81FE</span><span class="pln"> E0000000 &nbsp;   </span><span class="pun">|</span><span class="pln">CMP ESI</span><span class="pun">,</span><span class="lit">0E0</span><span class="pln">
</span><span class="lit">0044FDE9</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">72</span><span class="pln"> </span><span class="lit">08</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp;  </span><span class="pun">|</span><span class="pln">JB SHORT ef_first</span><span class="pun">.</span><span class="lit">0044FDF3</span><span class="pln">
</span><span class="lit">0044FDEB</span><span class="pln"> &nbsp;  &nbsp; </span><span class="lit">81FE</span><span class="pln"> FC000000 &nbsp;   CMP ESI</span><span class="pun">,</span><span class="lit">0FC</span><span class="pln"> &nbsp;  </span><span class="pun">*</span><span class="pln">
</span><span class="lit">0044FDF1</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">76</span><span class="pln"> </span><span class="lit">7C</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp;  </span><span class="pun">|</span><span class="pln">JBE SHORT ef_first</span><span class="pun">.</span><span class="lit">0044FE6F</span><span class="pln">
</span><span class="lit">0044FDF3</span><span class="pln">  </span><span class="pun">|&gt;</span><span class="pln">  </span><span class="lit">83FE</span><span class="pln"> </span><span class="lit">5C</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;   </span><span class="pun">|</span><span class="pln">CMP ESI</span><span class="pun">,</span><span class="lit">5C</span><span class="pln">
</span><span class="lit">0044FDF6</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">74</span><span class="pln"> </span><span class="lit">46</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp;  </span><span class="pun">|</span><span class="pln">JE SHORT ef_first</span><span class="pun">.</span><span class="lit">0044FE3E</span><span class="pln">
</span><span class="lit">0044FDF8</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">83FE</span><span class="pln"> </span><span class="lit">20</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;   </span><span class="pun">|</span><span class="pln">CMP ESI</span><span class="pun">,</span><span class="lit">20</span><span class="pln">
</span><span class="lit">0044FDFB</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">72</span><span class="pln"> </span><span class="lit">4B</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp;  </span><span class="pun">|</span><span class="pln">JB SHORT ef_first</span><span class="pun">.</span><span class="lit">0044FE48</span><span class="pln">
</span><span class="lit">0044FDFD</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">83FE</span><span class="pln"> </span><span class="lit">23</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;   </span><span class="pun">|</span><span class="pln">CMP ESI</span><span class="pun">,</span><span class="lit">23</span><span class="pln">
</span><span class="lit">0044FE00</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">75</span><span class="pln"> </span><span class="lit">26</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp;  </span><span class="pun">|</span><span class="pln">JNZ SHORT ef_first</span><span class="pun">.</span><span class="lit">0044FE28</span></pre><br>改2处JBE（jump if below or equal）的条件为fe（标*处）<br><br>补充一下，我设断点验证过，显示每个字时都在这里中断。<br><br><b>CharSet：</b><br>用查找模块间调用来搜索CreateFontA，就一处&amp;GDI32.CreateFontA。<br>找到<h6 class="quote"><a href="javascript:" onclick="CopyCode(document.getElementById('code3'));" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Copy code</a></h6><pre class="prettyprint" id="code3" style="border-radius:5px;font-family:monaco,consolas,monospace;font-size:12px;overflow-x:auto;line-height:1.4em"><span class="lit">004845E8</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">8B46</span><span class="pln"> </span><span class="lit">44</span><span class="pln"> &nbsp;  &nbsp;  MOV EAX</span><span class="pun">,</span><span class="pln">DWORD PTR DS</span><span class="pun">:[</span><span class="pln">ESI</span><span class="pun">+</span><span class="lit">44</span><span class="pun">]</span><span class="pln">
</span><span class="lit">004845EB</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">85C0</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  TEST EAX</span><span class="pun">,</span><span class="pln">EAX
</span><span class="lit">004845ED</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">75</span><span class="pln"> </span><span class="lit">05</span><span class="pln"> &nbsp;  &nbsp;  &nbsp; JNZ SHORT ef_first</span><span class="pun">.</span><span class="lit">004845F4</span><span class="pln">
</span><span class="lit">004845EF</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  B8 </span><span class="lit">74054E00</span><span class="pln"> &nbsp; MOV EAX</span><span class="pun">,</span><span class="pln">ef_first</span><span class="pun">.</span><span class="lit">004E0574</span><span class="pln">
</span><span class="lit">004845F4</span><span class="pln">  </span><span class="pun">|&gt;</span><span class="pln">  </span><span class="lit">8B4E</span><span class="pln"> </span><span class="lit">38</span><span class="pln"> &nbsp;  &nbsp;  MOV ECX</span><span class="pun">,</span><span class="pln">DWORD PTR DS</span><span class="pun">:[</span><span class="pln">ESI</span><span class="pun">+</span><span class="lit">38</span><span class="pun">]</span><span class="pln">
</span><span class="lit">004845F7</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">8B56</span><span class="pln"> </span><span class="lit">34</span><span class="pln"> &nbsp;  &nbsp;  MOV EDX</span><span class="pun">,</span><span class="pln">DWORD PTR DS</span><span class="pun">:[</span><span class="pln">ESI</span><span class="pun">+</span><span class="lit">34</span><span class="pun">]</span><span class="pln">
</span><span class="lit">004845FA</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">50</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp; PUSH EAX &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">/</span><span class="typ">FaceName</span><span class="pln">
</span><span class="lit">004845FB</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">8B46</span><span class="pln"> </span><span class="lit">3C</span><span class="pln"> &nbsp;  &nbsp;  MOV EAX</span><span class="pun">,</span><span class="pln">DWORD PTR DS</span><span class="pun">:[</span><span class="pln">ESI</span><span class="pun">+</span><span class="lit">3C</span><span class="pun">]</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="pln">
</span><span class="lit">004845FE</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">50</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp; PUSH EAX &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="typ">PitchAndFamily</span><span class="pln">
</span><span class="lit">004845FF</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">8B46</span><span class="pln"> </span><span class="lit">30</span><span class="pln"> &nbsp;  &nbsp;  MOV EAX</span><span class="pun">,</span><span class="pln">DWORD PTR DS</span><span class="pun">:[</span><span class="pln">ESI</span><span class="pun">+</span><span class="lit">30</span><span class="pun">]</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="pln">
</span><span class="lit">00484602</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">51</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp; PUSH ECX &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="typ">Quality</span><span class="pln">
</span><span class="lit">00484603</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">8B4E</span><span class="pln"> </span><span class="lit">2C</span><span class="pln"> &nbsp;  &nbsp;  MOV ECX</span><span class="pun">,</span><span class="pln">DWORD PTR DS</span><span class="pun">:[</span><span class="pln">ESI</span><span class="pun">+</span><span class="lit">2C</span><span class="pun">]</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  </span><span class="pun">*</span><span class="pln"> </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="pln">
</span><span class="lit">00484606</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">52</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp; PUSH EDX &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="typ">ClipPrecision</span><span class="pln">
</span><span class="lit">00484607</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">8B56</span><span class="pln"> </span><span class="lit">28</span><span class="pln"> &nbsp;  &nbsp;  MOV EDX</span><span class="pun">,</span><span class="pln">DWORD PTR DS</span><span class="pun">:[</span><span class="pln">ESI</span><span class="pun">+</span><span class="lit">28</span><span class="pun">]</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="pln">
</span><span class="lit">0048460A</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">50</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp; PUSH EAX &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="typ">OutputPrecision</span><span class="pln">
</span><span class="lit">0048460B</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">8B46</span><span class="pln"> </span><span class="lit">24</span><span class="pln"> &nbsp;  &nbsp;  MOV EAX</span><span class="pun">,</span><span class="pln">DWORD PTR DS</span><span class="pun">:[</span><span class="pln">ESI</span><span class="pun">+</span><span class="lit">24</span><span class="pun">]</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="pln">
</span><span class="lit">0048460E</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">51</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp; PUSH ECX &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="typ">CharSet</span><span class="pln"> &nbsp; </span><span class="pun">*</span><span class="pln">
</span><span class="lit">0048460F</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">8B4E</span><span class="pln"> </span><span class="lit">20</span><span class="pln"> &nbsp;  &nbsp;  MOV ECX</span><span class="pun">,</span><span class="pln">DWORD PTR DS</span><span class="pun">:[</span><span class="pln">ESI</span><span class="pun">+</span><span class="lit">20</span><span class="pun">]</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="pln">
</span><span class="lit">00484612</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">52</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp; PUSH EDX &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="typ">StrikeOut</span><span class="pln">
</span><span class="lit">00484613</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">8B56</span><span class="pln"> </span><span class="lit">18</span><span class="pln"> &nbsp;  &nbsp;  MOV EDX</span><span class="pun">,</span><span class="pln">DWORD PTR DS</span><span class="pun">:[</span><span class="pln">ESI</span><span class="pun">+</span><span class="lit">18</span><span class="pun">]</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="pln">
</span><span class="lit">00484616</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">50</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp; PUSH EAX &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="typ">Underline</span><span class="pln">
</span><span class="lit">00484617</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">8B46</span><span class="pln"> </span><span class="lit">14</span><span class="pln"> &nbsp;  &nbsp;  MOV EAX</span><span class="pun">,</span><span class="pln">DWORD PTR DS</span><span class="pun">:[</span><span class="pln">ESI</span><span class="pun">+</span><span class="lit">14</span><span class="pun">]</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="pln">
</span><span class="lit">0048461A</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">51</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp; PUSH ECX &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="typ">Italic</span><span class="pln">
</span><span class="lit">0048461B</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">8B4E</span><span class="pln"> </span><span class="lit">10</span><span class="pln"> &nbsp;  &nbsp;  MOV ECX</span><span class="pun">,</span><span class="pln">DWORD PTR DS</span><span class="pun">:[</span><span class="pln">ESI</span><span class="pun">+</span><span class="lit">10</span><span class="pun">]</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="pln">
</span><span class="lit">0048461E</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">52</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp; PUSH EDX &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="typ">Weight</span><span class="pln">
</span><span class="lit">0048461F</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">8B56</span><span class="pln"> </span><span class="lit">0C</span><span class="pln"> &nbsp;  &nbsp;  MOV EDX</span><span class="pun">,</span><span class="pln">DWORD PTR DS</span><span class="pun">:[</span><span class="pln">ESI</span><span class="pun">+</span><span class="pln">C</span><span class="pun">]</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp;  </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="pln">
</span><span class="lit">00484622</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">50</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp; PUSH EAX &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="typ">Orientation</span><span class="pln">
</span><span class="lit">00484623</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">8B46</span><span class="pln"> </span><span class="lit">08</span><span class="pln"> &nbsp;  &nbsp;  MOV EAX</span><span class="pun">,</span><span class="pln">DWORD PTR DS</span><span class="pun">:[</span><span class="pln">ESI</span><span class="pun">+</span><span class="lit">8</span><span class="pun">]</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp;  </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="pln">
</span><span class="lit">00484626</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">51</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp; PUSH ECX &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="typ">Escapement</span><span class="pln">
</span><span class="lit">00484627</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">52</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp; PUSH EDX &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="typ">Width</span><span class="pln">
</span><span class="lit">00484628</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">50</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp; PUSH EAX &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="typ">Height</span><span class="pln">
</span><span class="lit">00484629</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  FF15 </span><span class="lit">38004E00</span><span class="pln"> CALL DWORD PTR DS</span><span class="pun">:[&lt;&amp;</span><span class="pln">GDI32</span><span class="pun">.</span><span class="typ">CreateFontA</span><span class="pun">&gt;]</span><span class="pln"> </span><span class="pun">;</span><span class="pln"> \CreateFontA</span></pre><br>发现是ECX传递的80（日文），要改为86。<br>如果改前面的，我找了一夜未果（看现在多晚了），只好改这的。<br><h6 class="quote"><a href="javascript:" onclick="CopyCode(document.getElementById('code4'));" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Copy code</a></h6><pre class="prettyprint" id="code4" style="border-radius:5px;font-family:monaco,consolas,monospace;font-size:12px;overflow-x:auto;line-height:1.4em"><span class="lit">00484603</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">8B4E</span><span class="pln"> </span><span class="lit">2C</span><span class="pln"> &nbsp;  &nbsp;  MOV ECX</span><span class="pun">,</span><span class="pln">DWORD PTR DS</span><span class="pun">:[</span><span class="pln">ESI</span><span class="pun">+</span><span class="lit">2C</span><span class="pun">]</span><span class="pln"> </span></pre><br>改为<br><h6 class="quote"><a href="javascript:" onclick="CopyCode(document.getElementById('code5'));" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Copy code</a></h6><pre class="prettyprint" id="code5" style="border-radius:5px;font-family:monaco,consolas,monospace;font-size:12px;overflow-x:auto;line-height:1.4em"><span class="lit">00484603</span><span class="pln"> &nbsp;  &nbsp; B1 </span><span class="lit">86</span><span class="pln"> &nbsp;  &nbsp;  &nbsp; MOV CL</span><span class="pun">,</span><span class="lit">86</span><span class="pln"> &nbsp;  </span><span class="pun">*</span><span class="pln">
</span><span class="lit">00484605</span><span class="pln"> &nbsp;  &nbsp; </span><span class="lit">90</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp; NOP &nbsp;  &nbsp;   </span><span class="pun">*</span></pre><br>反正DS:[ESI+2C] 处为80000000，我改低位足够了。<br><br>解释：<br>由于编译器处理，一些指令不是按逻辑顺序排的，如：<br>0044FDCC  |.  81FE 81000000 &nbsp;   |CMP ESI,81<br>0044FDD2  |.  8947 14 &nbsp;  &nbsp;  &nbsp;   |MOV DWORD PTR DS:[EDI+14],EAX<br>0044FDD5  |.  72 1C &nbsp;  &nbsp;  &nbsp;  &nbsp;  |JB SHORT ef_first.0044FDF3<br>0044FDD7 &nbsp;  &nbsp; 81FE 9F000000 &nbsp;   CMP ESI,9F &nbsp;  *<br>插了个MOV DWORD PTR DS:[EDI+14],EAX<br>这是考虑到CPU多流水线的配合执行，不用在意。<br><br>新手（偶）提问：<br>在找&amp;GDI32.CreateFontA的参数来源时，我发现他是在开始一次性初始化的，但P到<br><h6 class="quote"><a href="javascript:" onclick="CopyCode(document.getElementById('code6'));" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Copy code</a></h6><pre class="prettyprint" id="code6" style="border-radius:5px;font-family:monaco,consolas,monospace;font-size:12px;overflow-x:auto;line-height:1.4em"><span class="pln"> 
</span><span class="lit">004A8EBD</span><span class="pln">  </span><span class="pun">/</span><span class="pln">$  </span><span class="lit">56</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp; PUSH ESI
</span><span class="lit">004A8EBE</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">8B7424</span><span class="pln"> </span><span class="lit">08</span><span class="pln"> &nbsp;   MOV ESI</span><span class="pun">,</span><span class="pln">DWORD PTR SS</span><span class="pun">:[</span><span class="pln">ESP</span><span class="pun">+</span><span class="lit">8</span><span class="pun">]</span><span class="pln">
</span><span class="lit">004A8EC2</span><span class="pln">  </span><span class="pun">|&gt;</span><span class="pln">  </span><span class="lit">3B7424</span><span class="pln"> </span><span class="lit">0C</span><span class="pln"> &nbsp;   </span><span class="pun">/</span><span class="pln">CMP ESI</span><span class="pun">,</span><span class="pln">DWORD PTR SS</span><span class="pun">:[</span><span class="pln">ESP</span><span class="pun">+</span><span class="pln">C</span><span class="pun">]</span><span class="pln">
</span><span class="lit">004A8EC6</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">73</span><span class="pln"> </span><span class="lit">0D</span><span class="pln"> &nbsp;  &nbsp;  &nbsp; </span><span class="pun">|</span><span class="pln">JNB SHORT ef_first</span><span class="pun">.</span><span class="lit">004A8ED5</span><span class="pln">
</span><span class="lit">004A8EC8</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">8B06</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  </span><span class="pun">|</span><span class="pln">MOV EAX</span><span class="pun">,</span><span class="pln">DWORD PTR DS</span><span class="pun">:[</span><span class="pln">ESI</span><span class="pun">]</span><span class="pln">
</span><span class="lit">004A8ECA</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">85C0</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  </span><span class="pun">|</span><span class="pln">TEST EAX</span><span class="pun">,</span><span class="pln">EAX
</span><span class="lit">004A8ECC</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">74</span><span class="pln"> </span><span class="lit">02</span><span class="pln"> &nbsp;  &nbsp;  &nbsp; </span><span class="pun">|</span><span class="pln">JE SHORT ef_first</span><span class="pun">.</span><span class="lit">004A8ED0</span><span class="pln">
</span><span class="lit">004A8ECE</span><span class="pln">  </span><span class="pun">|.</span><span class="pln">  FFD0 &nbsp;  &nbsp;  &nbsp;  </span><span class="pun">|</span><span class="pln">CALL EAX
</span><span class="lit">004A8ED0</span><span class="pln">  </span><span class="pun">|&gt;</span><span class="pln">  </span><span class="lit">83C6</span><span class="pln"> </span><span class="lit">04</span><span class="pln"> &nbsp;  &nbsp;  </span><span class="pun">|</span><span class="pln">ADD ESI</span><span class="pun">,</span><span class="lit">4</span><span class="pln">
</span><span class="lit">004A8ED3</span><span class="pln">  </span><span class="pun">|.^</span><span class="pln"> EB ED &nbsp;  &nbsp;  &nbsp; \JMP SHORT ef_first</span><span class="pun">.</span><span class="lit">004A8EC2</span><span class="pln">
</span><span class="lit">004A8ED5</span><span class="pln">  </span><span class="pun">|&gt;</span><span class="pln">  </span><span class="lit">5E</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp; POP ESI
</span><span class="lit">004A8ED6</span><span class="pln">  \.  C3 &nbsp;  &nbsp;  &nbsp;  &nbsp; RETN</span></pre><br>就被那个循环中的"004A8ECE  |.  FFD0 &nbsp;  &nbsp;  &nbsp;  |CALL EAX"搞得没有办法。只好放弃。请问下面该怎么找？<br><br>&lt;hr&gt;<br>至此，已经使ef_first_Cracked.exe支持中文剧本显示了，但字体问题没有解决。因为不知道API接口，没法把dword的数字与字体对应。而且由于代码长度问题，估计在MOV EAX,DWORD PTR DS:[ESI+44]处改会很麻烦。<br>但愿能显示得好看……（实在逼急了用金山游侠(其实我用GameMaster)改内存算了）.<div id="alert_tpc" style="color: gray; margin-top: 30px; --darkreader-inline-color:#bfb9ac;" data-darkreader-inline-color="">[ 此贴被galaxy在2007-01-05 00:30重新编辑 ]</div></div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_tpc" class="c"></div>

		<div><img class="signature" src="assets/1570906273-f23b8ffd0b6b327441aa828c9cd3243d.gif" align="absbottom"></div>
		<div class="signature" style="max-height:380px;maxHeight:380px; overflow:hidden;"><table width="100%"><tbody><tr><td><span class="highslide"><img src="assets/1570906273-698826f3d6007171305029c17f27a0d0.gif" border="0" style="max-width: 100%;max-height: 900px;"></span></td><td></td></tr></tbody></table></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2007-01-03 02:11 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 楼主(galaxy) 的帖子');" data-mx-warn="Empty URL">[楼 主]</a></span>

		</div></th>
	</tr></tbody></table>
</div>

<a name="912835" data-mx-warn="Empty URL"></a>
<div class="t t2"><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570906273-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>galaxy</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=25362" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570906273-15b0cc09eb7bf86a196f685356df0e9c.jpg" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_1"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">澄空一年生上学期</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570906273-f43195cd588caa26c296fcc61910b3e6.gif"><br>

<span class="user-info2" id="showface_1">
<span class="user-infoWrap2">


精华:

		<span class="s4">0</span>
<br>
发帖: <span class="s1 f9">113</span><br>
学分: <span class="s2 f9">0 点</span><br>
澄空币: <span class="s3 f9">447 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2005-10-22<br>
		最后登录:2017-03-10 <br><br> 
		<img src="assets/1570906273-10186ca2cfdf99ebea095f161305d74e.gif" title="2号入学纪念勋章"> <img src="assets/1570906273-7ebb3badddf297e28ab225953414c797.gif" title="5号入学纪念勋章"> <br></span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_912835" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=211852&amp;pid=912835&amp;article=1" onclick="return sendurl(this,4,event)" id="quote_912835" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=211852&amp;pid=912835&amp;article=1" id="modify_912835" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=25362" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=211852&amp;pid=912835" onclick="return sendurl(this,8)" id="report_912835" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=211852&amp;uid=25362" title="只看该作者的所有回复" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('912835')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_912835" class="fl">&nbsp;</h1>
			

			<div id="p_912835" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_912835">补充：<br>最后用UltraEDIT修改：<h6 class="quote"><a href="javascript:" onclick="CopyCode(document.getElementById('code7'));" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Copy code</a></h6><pre class="prettyprint" id="code7" style="border-radius:5px;font-family:monaco,consolas,monospace;font-size:12px;overflow-x:auto;line-height:1.4em"><span class="pun">正在比较文件</span><span class="pln"> ef_first_Cracked</span><span class="pun">.</span><span class="pln">exe </span><span class="pun">和</span><span class="pln"> EF_FIRST_CRACKEDCN2</span><span class="pun">.</span><span class="pln">EXE
</span><span class="lit">0004FDD9</span><span class="pun">:</span><span class="pln"> </span><span class="lit">9F</span><span class="pln"> FE
</span><span class="lit">0004FDED</span><span class="pun">:</span><span class="pln"> FC FE
</span><span class="lit">00084603</span><span class="pun">:</span><span class="pln"> </span><span class="lit">8B</span><span class="pln"> B1
</span><span class="lit">00084604</span><span class="pun">:</span><span class="pln"> </span><span class="lit">4E</span><span class="pln"> </span><span class="lit">86</span><span class="pln">
</span><span class="lit">00084605</span><span class="pun">:</span><span class="pln"> </span><span class="lit">2C</span><span class="pln"> </span><span class="lit">90</span></pre></div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_912835" class="c"></div>

		<div><img class="signature" src="assets/1570906273-f23b8ffd0b6b327441aa828c9cd3243d.gif" align="absbottom"></div>
		<div class="signature" style="max-height:380px;maxHeight:380px; overflow:hidden;"><table width="100%"><tbody><tr><td><span class="highslide"><img src="assets/1570906273-698826f3d6007171305029c17f27a0d0.gif" border="0" style="max-width: 100%;max-height: 900px;"></span></td><td></td></tr></tbody></table></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2007-01-03 02:39 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 1楼(galaxy) 的帖子');" data-mx-warn="Empty URL">1 楼</a></span>

		</div></th>
	</tr></tbody></table>
</div>

<a name="912967" data-mx-warn="Empty URL"></a>
<div class="t t2"><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570906273-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>bdangel</b>
<div style="margin:.3em 0 .4em .2em">其实我想要个勋章收集者勋章</div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=62571" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570906273-8051f501b20b6c44410d20c3ad5c4780.jpg" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_2"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">优秀学员</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570906273-87bc1a6e935264a57e50e0d513f23aa7.gif"><br>

<span class="user-info2" id="showface_2">
<span class="user-infoWrap2">


精华:

		<span class="s4">0</span>
<br>
发帖: <span class="s1 f9">2526</span><br>
学分: <span class="s2 f9">6 点</span><br>
澄空币: <span class="s3 f9">3664 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2006-09-02<br>
		最后登录:2017-02-14 <br><br> 
		<img src="assets/1570906273-5b3e1beb742a4eab229109ed75d6fd2c.gif" title="草壁美铃"> <img src="assets/1570906273-64a5b24976f7ba5c31a00dda49c7f439.gif" title="時坂紫"> <img src="assets/1570906273-57dcc991a9daed611a37148932ece846.gif" title="芙蓉枫"> <img src="assets/1570906273-92b5b8cc82af6a81c67920367640f7a9.gif" title="十六夜桃花"> <img src="assets/1570906273-bfa7edfad51b9d025afa8d25b6db294d.gif" title="和泉しずか"> <img src="assets/1570906273-de2c9ab44b5b2ce776f3113ebd1670e1.gif" title="小牧郁乃"> <br></span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_912967" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=211852&amp;pid=912967&amp;article=2" onclick="return sendurl(this,4,event)" id="quote_912967" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=211852&amp;pid=912967&amp;article=2" id="modify_912967" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=62571" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=211852&amp;pid=912967" onclick="return sendurl(this,8)" id="report_912967" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=211852&amp;uid=62571" title="只看该作者的所有回复" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('912967')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_912967" class="fl">&nbsp;</h1>
			

			<div id="p_912967" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_912967">传参数那里JMP出来处理？需要找个空地<br><br>参数的话，多看看MSDN<br>我 记得也有CHM的，LZ找找吧<br><br>PS:写点WIN32ASM程序对破解也有很大帮助的</div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_912967" class="c"></div>

		<div><img class="signature" src="assets/1570906273-f23b8ffd0b6b327441aa828c9cd3243d.gif" align="absbottom"></div>
		<div class="signature" style="max-height:380px;maxHeight:380px; overflow:hidden;"><table width="100%"><tbody><tr><td>新番列表，<a href="https://zh.wikipedia.org/wiki/User:Bdangel" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">http://zh.wikipedia.org/wiki/User:Bdangel</a></td><td></td></tr></tbody></table></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2007-01-03 10:35 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 2楼(bdangel) 的帖子');" data-mx-warn="Empty URL">2 楼</a></span>

		</div></th>
	</tr></tbody></table>
</div>

<a name="913041" data-mx-warn="Empty URL"></a>
<div class="t t2"><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570906273-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>galaxy</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=25362" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570906273-15b0cc09eb7bf86a196f685356df0e9c.jpg" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_3"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">澄空一年生上学期</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570906273-f43195cd588caa26c296fcc61910b3e6.gif"><br>

<span class="user-info2" id="showface_3">
<span class="user-infoWrap2">


精华:

		<span class="s4">0</span>
<br>
发帖: <span class="s1 f9">113</span><br>
学分: <span class="s2 f9">0 点</span><br>
澄空币: <span class="s3 f9">447 KID</span><br>

		GPA: <span class="s2 f9">0 点</span><br>

		<span class="gray">注册时间:2005-10-22<br>
		最后登录:2017-03-10 <br><br> 
		<img src="assets/1570906273-10186ca2cfdf99ebea095f161305d74e.gif" title="2号入学纪念勋章"> <img src="assets/1570906273-7ebb3badddf297e28ab225953414c797.gif" title="5号入学纪念勋章"> <br></span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_913041" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=211852&amp;pid=913041&amp;article=3" onclick="return sendurl(this,4,event)" id="quote_913041" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=211852&amp;pid=913041&amp;article=3" id="modify_913041" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=25362" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=211852&amp;pid=913041" onclick="return sendurl(this,8)" id="report_913041" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=211852&amp;uid=25362" title="只看该作者的所有回复" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('913041')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_913041" class="fl">&nbsp;</h1>
			

			<div id="p_913041" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_913041"><h6 class="quote">Quote:</h6><blockquote class="blockquote"><b>引用第2楼<i>bdangel</i>于<i>2007-01-03 10:35</i>发表的</b>:<br>传参数那里JMP出来处理？需要找个空地<br><br>参数的话，多看看MSDN<br>我 记得也有CHM的，LZ找找吧<br><br>.......</blockquote><br><h6 class="quote"><a href="javascript:" onclick="CopyCode(document.getElementById('code8'));" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Copy code</a></h6><pre class="prettyprint" id="code8" style="border-radius:5px;font-family:monaco,consolas,monospace;font-size:12px;overflow-x:auto;line-height:1.4em"><span class="lit">004845F7</span><span class="pln"> </span><span class="pun">|.</span><span class="pln"> </span><span class="lit">8B56</span><span class="pln"> </span><span class="lit">34</span><span class="pln"> &nbsp;   MOV EDX</span><span class="pun">,</span><span class="pln">DWORD PTR DS</span><span class="pun">:[</span><span class="pln">ESI</span><span class="pun">+</span><span class="lit">34</span><span class="pun">]</span><span class="pln">
</span><span class="lit">004845FA</span><span class="pln"> </span><span class="pun">|.</span><span class="pln"> </span><span class="lit">50</span><span class="pln"> &nbsp;  &nbsp;  &nbsp; PUSH EAX &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;   </span><span class="pun">;</span><span class="pln"> </span><span class="pun">/</span><span class="typ">FaceName</span><span class="pln">
</span><span class="lit">004845FB</span><span class="pln"> </span><span class="pun">|.</span><span class="pln"> </span><span class="lit">8B46</span><span class="pln"> </span><span class="lit">3C</span><span class="pln"> &nbsp;   MOV EAX</span><span class="pun">,</span><span class="pln">DWORD PTR DS</span><span class="pun">:[</span><span class="pln">ESI</span><span class="pun">+</span><span class="lit">3C</span><span class="pun">]</span><span class="pln"> &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="pln">
</span><span class="lit">004845FE</span><span class="pln"> </span><span class="pun">|.</span><span class="pln"> </span><span class="lit">50</span><span class="pln"> &nbsp;  &nbsp;  &nbsp; PUSH EAX &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;   </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="typ">PitchAndFamily</span><span class="pln">
</span><span class="lit">004845FF</span><span class="pln"> </span><span class="pun">|.</span><span class="pln"> </span><span class="lit">8B46</span><span class="pln"> </span><span class="lit">30</span><span class="pln"> &nbsp;   MOV EAX</span><span class="pun">,</span><span class="pln">DWORD PTR DS</span><span class="pun">:[</span><span class="pln">ESI</span><span class="pun">+</span><span class="lit">30</span><span class="pun">]</span><span class="pln"> &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="pln">
</span><span class="lit">00484602</span><span class="pln"> </span><span class="pun">|.</span><span class="pln"> </span><span class="lit">51</span><span class="pln"> &nbsp;  &nbsp;  &nbsp; PUSH ECX &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;   </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="typ">Quality</span><span class="pln">
</span><span class="lit">00484603</span><span class="pln"> </span><span class="pun">|.</span><span class="pln"> </span><span class="lit">8B4E</span><span class="pln"> </span><span class="lit">2C</span><span class="pln"> &nbsp;   MOV ECX</span><span class="pun">,</span><span class="pln">DWORD PTR DS</span><span class="pun">:[</span><span class="pln">ESI</span><span class="pun">+</span><span class="lit">2C</span><span class="pun">]</span><span class="pln"> &nbsp;  &nbsp;  </span><span class="pun">*</span><span class="pln"> </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="pln">
</span><span class="lit">00484606</span><span class="pln"> </span><span class="pun">|.</span><span class="pln"> </span><span class="lit">52</span><span class="pln"> &nbsp;  &nbsp;  &nbsp; PUSH EDX &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;   </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="typ">ClipPrecision</span><span class="pln">
</span><span class="lit">00484607</span><span class="pln"> </span><span class="pun">|.</span><span class="pln"> </span><span class="lit">8B56</span><span class="pln"> </span><span class="lit">28</span><span class="pln"> &nbsp;   MOV EDX</span><span class="pun">,</span><span class="pln">DWORD PTR DS</span><span class="pun">:[</span><span class="pln">ESI</span><span class="pun">+</span><span class="lit">28</span><span class="pun">]</span><span class="pln"> &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="pln">
</span><span class="lit">0048460A</span><span class="pln"> </span><span class="pun">|.</span><span class="pln"> </span><span class="lit">50</span><span class="pln"> &nbsp;  &nbsp;  &nbsp; PUSH EAX &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;   </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="typ">OutputPrecision</span><span class="pln">
</span><span class="lit">0048460B</span><span class="pln"> </span><span class="pun">|.</span><span class="pln"> </span><span class="lit">8B46</span><span class="pln"> </span><span class="lit">24</span><span class="pln"> &nbsp;   MOV EAX</span><span class="pun">,</span><span class="pln">DWORD PTR DS</span><span class="pun">:[</span><span class="pln">ESI</span><span class="pun">+</span><span class="lit">24</span><span class="pun">]</span><span class="pln"> &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="pln">
</span><span class="lit">0048460E</span><span class="pln"> </span><span class="pun">|.</span><span class="pln"> </span><span class="lit">51</span><span class="pln"> &nbsp;  &nbsp;  &nbsp; PUSH ECX &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;   </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="typ">CharSet</span><span class="pln"> &nbsp; </span><span class="pun">*</span><span class="pln">
</span><span class="lit">0048460F</span><span class="pln"> </span><span class="pun">|.</span><span class="pln"> </span><span class="lit">8B4E</span><span class="pln"> </span><span class="lit">20</span><span class="pln"> &nbsp;   MOV ECX</span><span class="pun">,</span><span class="pln">DWORD PTR DS</span><span class="pun">:[</span><span class="pln">ESI</span><span class="pun">+</span><span class="lit">20</span><span class="pun">]</span><span class="pln"> &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="pln">
</span><span class="lit">00484612</span><span class="pln"> </span><span class="pun">|.</span><span class="pln"> </span><span class="lit">52</span><span class="pln"> &nbsp;  &nbsp;  &nbsp; PUSH EDX &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;   </span><span class="pun">;</span><span class="pln"> </span><span class="pun">|</span><span class="typ">StrikeOut</span></pre><br>没看到参数都在内存里的固定区域吗。<br>我已证明它是在启动时一次性初始化的，但那个像是数组赋值的循环我不会分析，不知如何设断点。</div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_913041" class="c"></div>

		<div><img class="signature" src="assets/1570906273-f23b8ffd0b6b327441aa828c9cd3243d.gif" align="absbottom"></div>
		<div class="signature" style="max-height:380px;maxHeight:380px; overflow:hidden;"><table width="100%"><tbody><tr><td><span class="highslide"><img src="assets/1570906273-698826f3d6007171305029c17f27a0d0.gif" border="0" style="max-width: 100%;max-height: 900px;"></span></td><td></td></tr></tbody></table></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2007-01-03 12:19 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 3楼(galaxy) 的帖子');" data-mx-warn="Empty URL">3 楼</a></span>

		</div></th>
	</tr></tbody></table>
</div>

<a name="a" data-mx-warn="Empty URL"></a><a name="914227" data-mx-warn="Empty URL"></a>
<div class="t t2"><table cellspacing="0" cellpadding="0" width="100%" style="table-layout: fixed; border-top: 0px; --darkreader-inline-border-top: initial;" data-darkreader-inline-border-top="">
	<tbody><tr class="tr1"><th style="width:20%" rowspan="2" class="r_two">

		<img src="assets/1570906273-1cde2ccde0fc90dbe6db3784fc6ec383.gif" title="该用户目前不在线" align="absmiddle">

<b>rednaxela</b>
<div style="margin:.3em 0 .4em .2em"></div>
<div class="user-pic"><table style="border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left=""><tbody><tr><td width="1">

<a href="https://bbs.sumisora.net/profile.php?action=show&amp;uid=9227" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img class="pic" src="assets/1570906273-ce00c7df760cd0b54791980099058989.gif" style="max-width:185px;max-height:200px;overflow:hidden" border="0"></a>

</td><td style="vertical-align:top"><span id="sf_4"></span></td></tr></tbody></table>
</div>
		级别: <font color="#555555" data-darkreader-inline-color="" style="--darkreader-inline-color:#cfc9be;">澄空三年生上学期</font><br>
		<img style="margin:.2em 0 .6em" src="assets/1570906273-5fc5bacf4fd91c54a5fe72c4ceff18fa.gif"><br>

<span class="user-info2" id="showface_4">
<span class="user-infoWrap2">


精华:

		<a href="https://bbs.sumisora.net/search.php?authorid=9227&amp;digest=1" target="_blank" class="s4 f9" referrerpolicy="no-referrer" rel="noopener noreferrer">5</a>
<br>
发帖: <span class="s1 f9">375</span><br>
学分: <span class="s2 f9">35 点</span><br>
澄空币: <span class="s3 f9">895 KID</span><br>

		GPA: <span class="s2 f9">7 点</span><br>

		<span class="gray">注册时间:2005-04-15<br>
		最后登录:2016-04-07 <br><br> 
		</span>
		</span></span>
		</th>
		<th height="100%" class="r_one" valign="top" id="td_914227" style="padding: 5px 15px 0px; border: 0px; width: 80%; overflow: hidden; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<div class="tiptop">
			<span class="fl" style="white-space:nowrap;">
			<a href="https://bbs.sumisora.net/post.php?action=quote&amp;fid=78&amp;tid=211852&amp;pid=914227&amp;article=4" onclick="return sendurl(this,4,event)" id="quote_914227" title="引用回复这个帖子" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">引用</a> <a href="https://bbs.sumisora.net/post.php?action=modify&amp;fid=78&amp;tid=211852&amp;pid=914227&amp;article=4" id="modify_914227" onclick="return sendurl(this,4,event)" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">编辑</a>
			<a href="https://bbs.sumisora.net/message.php?action=write&amp;touid=9227" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">短信</a>

			<a href="https://bbs.sumisora.net/operate.php?action=report&amp;tid=211852&amp;pid=914227" onclick="return sendurl(this,8)" id="report_914227" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">举报</a>

			<a href="https://bbs.sumisora.net/read.php?tid=211852&amp;uid=9227" title="只看该作者的所有回复" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">只看</a>

			<a style="cursor:pointer;" onclick="copyUrl('914227')" title="此楼地址" data-mx-warn="Empty URL">锚点</a>
			</span>

			<div class="c"></div>
			</div>
			<h1 id="subject_914227" class="fl">&nbsp;</h1>
			

			<div id="p_914227" class="c"></div>

<!--
-->

			<div class="tpc_content" id="read_914227">嘎...我很尴尬,因为那天我只是随便说说,给的跳转条件乱写一通,其实是全然错误的.对不起了~<br>应该说,边界检查代码的样子,会是类似于这个样的:<br><br><h6 class="quote"><a href="javascript:" onclick="CopyCode(document.getElementById('code9'));" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Copy code</a></h6><pre class="prettyprint" id="code9" style="border-radius:5px;font-family:monaco,consolas,monospace;font-size:12px;overflow-x:auto;line-height:1.4em"><span class="pln">cmp al</span><span class="pun">,</span><span class="lit">80</span><span class="pln">
jbe xxxxxxxx
cmp al</span><span class="pun">,</span><span class="lit">09F</span><span class="pln">
jb xxxxxxxx
cmp al</span><span class="pun">,</span><span class="lit">0E0</span><span class="pln">
jb xxxxxxxx
cmp al</span><span class="pun">,</span><span class="lit">0FC</span><span class="pln">
ja xxxxxxxx</span></pre><br><br>那天随便乱写了跳转条件,那可是完全的不正确的.请LZ顺手在顶楼也修正一下吧.<br>在边界处跳转是否包括"等于"的情况,要视乎用于比较的值是否包含边界值来确定.<br><br>实际在ef_first.exe里看到的会是类似下面的代码:<br><br><h6 class="quote"><a href="javascript:" onclick="CopyCode(document.getElementById('code10'));" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Copy code</a></h6><pre class="prettyprint" id="code10" style="border-radius:5px;font-family:monaco,consolas,monospace;font-size:12px;overflow-x:auto;line-height:1.4em"><span class="lit">00415647</span><span class="pln"> &nbsp;  </span><span class="pun">.</span><span class="pln">  </span><span class="lit">84DB</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;   test bl</span><span class="pun">,</span><span class="pln">bl &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  </span><span class="pun">;</span><span class="pln"> </span><span class="pun">检查所使用的寄存器是否为空</span><span class="pln">
</span><span class="lit">00415649</span><span class="pln"> &nbsp;  </span><span class="pun">.</span><span class="pln">  </span><span class="lit">0F84</span><span class="pln"> B8010000  je ef_first</span><span class="pun">.</span><span class="lit">00415807</span><span class="pln"> &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">为空,则跳转到处理代码</span><span class="pln">
</span><span class="lit">0041564F</span><span class="pln"> &nbsp;  </span><span class="pun">&gt;</span><span class="pln">  </span><span class="lit">80FB</span><span class="pln"> </span><span class="lit">81</span><span class="pln"> &nbsp;  &nbsp;   cmp bl</span><span class="pun">,</span><span class="lit">81</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;   </span><span class="pun">;</span><span class="pln">
</span><span class="lit">00415652</span><span class="pln"> &nbsp;  </span><span class="pun">.</span><span class="pln">  </span><span class="lit">72</span><span class="pln"> </span><span class="lit">05</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  jb </span><span class="kwd">short</span><span class="pln"> ef_first</span><span class="pun">.</span><span class="lit">00415659</span><span class="pln"> &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">小于第一段下界,跳转到处理代码</span><span class="pln">
</span><span class="lit">00415654</span><span class="pln"> &nbsp;  </span><span class="pun">.</span><span class="pln">  </span><span class="lit">80FB</span><span class="pln"> </span><span class="lit">9F</span><span class="pln"> &nbsp;  &nbsp;   cmp bl</span><span class="pun">,</span><span class="lit">9F</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;   </span><span class="pun">;</span><span class="pln">
</span><span class="lit">00415657</span><span class="pln"> &nbsp;  </span><span class="pun">.</span><span class="pln">  </span><span class="lit">76</span><span class="pln"> </span><span class="lit">12</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  jbe </span><span class="kwd">short</span><span class="pln"> ef_first</span><span class="pun">.</span><span class="lit">0041566B</span><span class="pln">  </span><span class="pun">;</span><span class="pln"> </span><span class="pun">大于第一段上界,跳转到处理代码</span><span class="pln">
</span><span class="lit">00415659</span><span class="pln"> &nbsp;  </span><span class="pun">&gt;</span><span class="pln">  </span><span class="lit">80FB</span><span class="pln"> E0 &nbsp;  &nbsp;   cmp bl</span><span class="pun">,</span><span class="lit">0E0</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  </span><span class="pun">;</span><span class="pln">
</span><span class="lit">0041565C</span><span class="pln"> &nbsp;  </span><span class="pun">.</span><span class="pln">  </span><span class="lit">0F82</span><span class="pln"> BD000000  jb ef_first</span><span class="pun">.</span><span class="lit">0041571F</span><span class="pln"> &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">小于第二段下界,跳转到处理代码</span><span class="pln">
</span><span class="lit">00415662</span><span class="pln"> &nbsp;  </span><span class="pun">.</span><span class="pln">  </span><span class="lit">80FB</span><span class="pln"> EF &nbsp;  &nbsp;   cmp bl</span><span class="pun">,</span><span class="lit">0EF</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  </span><span class="pun">;</span><span class="pln">
</span><span class="lit">00415665</span><span class="pln"> &nbsp;  </span><span class="pun">.</span><span class="pln">  </span><span class="lit">0F87</span><span class="pln"> B4000000  ja ef_first</span><span class="pun">.</span><span class="lit">0041571F</span><span class="pln"> &nbsp;  &nbsp;  &nbsp; </span><span class="pun">;</span><span class="pln"> </span><span class="pun">大于第二段上界,跳转到处理代码</span></pre><br><br>对字符做字符集边界的检查,是为了保证处理的数据是符合某一特定字符集,保证程序运行时不会因为读到错误的数据而产生不可预知的错误行为而做的检查.很常见的一种情况就是在临把字符画到显示器之前,对数据进行检查.可以来看一段例子:<br>(最好是自己用OllyDbg打开手上的ef_first.exe,或打开对应破解而修改过的版本,这里无法贴出上下相关的全部代码)<br><br>先在0x0044FCA7开始的一个循环里,看到了符合特征描述的边界检查代码:<br><h6 class="quote"><a href="javascript:" onclick="CopyCode(document.getElementById('code11'));" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Copy code</a></h6><pre class="prettyprint" id="code11" style="border-radius:5px;font-family:monaco,consolas,monospace;font-size:12px;overflow-x:auto;line-height:1.4em"><span class="lit">0044FCBB</span><span class="pln"> &nbsp; </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">85C0</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;   </span><span class="pun">|</span><span class="pln">test eax</span><span class="pun">,</span><span class="pln">eax
</span><span class="lit">0044FCBD</span><span class="pln"> &nbsp; </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">74</span><span class="pln"> </span><span class="lit">42</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  </span><span class="pun">|</span><span class="pln">je </span><span class="kwd">short</span><span class="pln"> ef_first</span><span class="pun">.</span><span class="lit">0044FD01</span><span class="pln">
</span><span class="lit">0044FCBF</span><span class="pln"> &nbsp; </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">3D</span><span class="pln"> </span><span class="lit">81000000</span><span class="pln"> &nbsp;  </span><span class="pun">|</span><span class="pln">cmp eax</span><span class="pun">,</span><span class="lit">81</span><span class="pln">
</span><span class="lit">0044FCC4</span><span class="pln"> &nbsp; </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">72</span><span class="pln"> </span><span class="lit">21</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  </span><span class="pun">|</span><span class="pln">jb </span><span class="kwd">short</span><span class="pln"> ef_first</span><span class="pun">.</span><span class="lit">0044FCE7</span><span class="pln">
</span><span class="lit">0044FCC6</span><span class="pln"> &nbsp; </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">3D</span><span class="pln"> </span><span class="lit">9F000000</span><span class="pln"> &nbsp;  </span><span class="pun">|</span><span class="pln">cmp eax</span><span class="pun">,</span><span class="lit">9F</span><span class="pln">
</span><span class="lit">0044FCCB</span><span class="pln"> &nbsp; </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">76</span><span class="pln"> </span><span class="lit">0E</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  </span><span class="pun">|</span><span class="pln">jbe </span><span class="kwd">short</span><span class="pln"> ef_first</span><span class="pun">.</span><span class="lit">0044FCDB</span><span class="pln">
</span><span class="lit">0044FCCD</span><span class="pln"> &nbsp; </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">3D</span><span class="pln"> E0000000 &nbsp;  </span><span class="pun">|</span><span class="pln">cmp eax</span><span class="pun">,</span><span class="lit">0E0</span><span class="pln">
</span><span class="lit">0044FCD2</span><span class="pln"> &nbsp; </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">72</span><span class="pln"> </span><span class="lit">13</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  </span><span class="pun">|</span><span class="pln">jb </span><span class="kwd">short</span><span class="pln"> ef_first</span><span class="pun">.</span><span class="lit">0044FCE7</span><span class="pln">
</span><span class="lit">0044FCD4</span><span class="pln"> &nbsp; </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">3D</span><span class="pln"> FC000000 &nbsp;  </span><span class="pun">|</span><span class="pln">cmp eax</span><span class="pun">,</span><span class="lit">0FC</span><span class="pln">
</span><span class="lit">0044FCD9</span><span class="pln"> &nbsp; </span><span class="pun">|.</span><span class="pln">  </span><span class="lit">77</span><span class="pln"> </span><span class="lit">0C</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  </span><span class="pun">|</span><span class="pln">ja </span><span class="kwd">short</span><span class="pln"> ef_first</span><span class="pun">.</span><span class="lit">0044FCE7</span></pre><br>然后在同一层的循环里,看到一个调用,<br><h6 class="quote"><a href="javascript:" onclick="CopyCode(document.getElementById('code12'));" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Copy code</a></h6><pre class="prettyprint" id="code12" style="border-radius:5px;font-family:monaco,consolas,monospace;font-size:12px;overflow-x:auto;line-height:1.4em"><span class="lit">0044FCF4</span><span class="pln"> &nbsp; </span><span class="pun">|.</span><span class="pln">  E8 D7FEFFFF &nbsp;  </span><span class="pun">|</span><span class="pln">call ef_first</span><span class="pun">.</span><span class="lit">0044FBD0</span></pre><br>跟进,又看到一个调用:<br><h6 class="quote"><a href="javascript:" onclick="CopyCode(document.getElementById('code13'));" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Copy code</a></h6><pre class="prettyprint" id="code13" style="border-radius:5px;font-family:monaco,consolas,monospace;font-size:12px;overflow-x:auto;line-height:1.4em"><span class="lit">0044FBDE</span><span class="pln"> &nbsp; </span><span class="pun">|.</span><span class="pln">  E8 </span><span class="lit">1D4C0300</span><span class="pln"> &nbsp;  call ef_first</span><span class="pun">.</span><span class="lit">00484800</span></pre><br>再跟进,我们会看到函数里包含有两个输出调用:<br><h6 class="quote"><a href="javascript:" onclick="CopyCode(document.getElementById('code14'));" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Copy code</a></h6><pre class="prettyprint" id="code14" style="border-radius:5px;font-family:monaco,consolas,monospace;font-size:12px;overflow-x:auto;line-height:1.4em"><span class="lit">00484859</span><span class="pln"> &nbsp; </span><span class="pun">|.</span><span class="pln">  FF15 </span><span class="lit">3C004E00</span><span class="pln">  call dword ptr ds</span><span class="pun">:[&lt;&amp;</span><span class="pln">GDI32</span><span class="pun">.</span><span class="typ">GetGlyphOutlineA</span><span class="pun">&gt;]</span><span class="pln"> &nbsp; </span><span class="pun">;</span><span class="pln"> \GetGlyphOutlineA</span></pre><br><h6 class="quote"><a href="javascript:" onclick="CopyCode(document.getElementById('code15'));" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Copy code</a></h6><pre class="prettyprint" id="code15" style="border-radius:5px;font-family:monaco,consolas,monospace;font-size:12px;overflow-x:auto;line-height:1.4em"><span class="lit">004848A0</span><span class="pln"> &nbsp; </span><span class="pun">|.</span><span class="pln">  FF15 </span><span class="lit">3C004E00</span><span class="pln">  call dword ptr ds</span><span class="pun">:[&lt;&amp;</span><span class="pln">GDI32</span><span class="pun">.</span><span class="typ">GetGlyphOutlineA</span><span class="pun">&gt;]</span><span class="pln"> &nbsp; </span><span class="pun">;</span><span class="pln"> \GetGlyphOutlineA</span></pre><br>GetGlyphOutline是一个Win32 API,用于获取"画字符"用的轮廓,只要在Windows平台上用GDI输出字符,都会用到这个函数.后尾的"A"表示这是对应ANSI版(而UNICODE的版本是在结尾加上"W").这意味着如果不用GDI输出,就未必会看到这个调用.但是现在常见的GALGAME引擎大都用GDI作为字体引擎的底层实现,所以不用多担心.<br><br>这个例子很好的说明了边界检查会在什么地方出现.其它情况也有,这里就不详细说了.<br><br>LZ对x86汇编似乎不是特别熟悉,这里罗嗦几句.其实为了定位这段范例代码,我是先通过"搜索"-&gt;"所有模块间调用",找到GetGlyphOutlineA调用的出现位置.跟随,然后向前(也就是向低地址)找去,发现调用前的代码没什么有趣的,于是找到函数的入口0x00484800,从信息窗口看到有两处本地调用指向这个入口,分别是0x0044FA3C, 0x0044FBDE.通过信息栏分别前往两处调用点继续向前找.最终能找到我上面所引用的范例代码.<br><br>那么一个字符在Windows上使用GDI到底是怎么显示出来的呢? 看个最最简单省略掉大量细节的流程: ()代表用户程序部分,&lt;&gt;代表Win32 API调用,外面以[]括起说明是可选的步骤<br>准备工作:<br>[&lt;EnuFontFamilies&gt;/&lt;EnuFontFamiliesEx&gt;/&lt;EnumFonts&gt;] // 枚举指定设备可用的字体,如果在运行时不可选字体的话,那么这步可选<br>&lt;CreateFont&gt;/&lt;CreateFontIndirect&gt; // 用指定的属性创建一种逻辑字体,两个版本除参数的样子不同外,本质上是一样的<br>(获取需要显示的字符) // 读取或计算出需要显示的字符的code point值<br>[(检查字符边界)] // 为保证程序的正确运行,对字符检查是否满足对应字符集的边界<br><br>输出:<br>&lt;GetTextMetrics&gt; // 获取与选入一种设备场景的物理字体有关的信息<br>&lt;GetGlyphOutline&gt; // 获取TrueType字体中构成一个字符的曲线的信息<br>最终显示出来 // 更底层的,最终的显示程序<br><br>然后让我们来看看ef_first.exe里使用了哪些GDI调用:<br><h6 class="quote"><a href="javascript:" onclick="CopyCode(document.getElementById('code16'));" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Copy code</a></h6><pre class="prettyprint" id="code16" style="border-radius:5px;font-family:monaco,consolas,monospace;font-size:12px;overflow-x:auto;line-height:1.4em"><span class="pln">GDI32</span><span class="pun">.</span><span class="typ">CreateCompatibleDC</span><span class="pln">
GDI32</span><span class="pun">.</span><span class="typ">CreateDIBSection</span><span class="pln">
GDI32</span><span class="pun">.</span><span class="typ">CreateFontA</span><span class="pln">
GDI32</span><span class="pun">.</span><span class="typ">DeleteDC</span><span class="pln">
GDI32</span><span class="pun">.</span><span class="typ">DeleteObject</span><span class="pln">
GDI32</span><span class="pun">.</span><span class="typ">EnumFontFamiliesExA</span><span class="pln">
GDI32</span><span class="pun">.</span><span class="typ">GetGlyphOutlineA</span><span class="pln">
GDI32</span><span class="pun">.</span><span class="typ">GetTextMetricsA</span><span class="pln">
GDI32</span><span class="pun">.</span><span class="typ">SelectObject</span></pre><br>这样就可以理解ef_first里实际在显示字符这块做了些什么了.<br><br>中间我们需要关心的,就是EnumFontFamiliesExA,CreateFontA以及字符边界检查这三处.其中前两处都与字符集相关,所以我们要做相应的修改.<br><br>微软CP932对应以Shift-JIS编码的JIS X 0201和JIS X 0208字符集,对应的CharSet参数值是SHIFTJIS_CHARSET = 0x80,其字符的编码范围在: 第一字节, 0x81-0x9F, 0xE0-0xEF; 第二字节, 0x40-0X7E, 0x80-0xFC.<br><br>CP936对应以EUC编码的GB1988-89和扩展后的GB2312-80字符集,对应的CharSet参数值是GB2312_CHARSET = 0x86,其字符的编码范围在0x21-0x7E(ASCII或者GB1988-89), 0xA1A1-0XFEFE(GB2312-80).<br><br>因而原则上要正确显示简体汉字,要做的修改有:<br>对EnumFontFamilies(以及等价函数)的调用,我们要保证字符集的参数被设置为GB2312.如果原游戏程序只能显示非unicode的日文,那么要做的就是把0x80改为0x86;<br>对CreateFont(以及等价函数)的调用,与上面做几乎一样的处理,把CharSet的0x80改为0x86.如果CreateFont的最后一个参数(汇编上表现出来是最先出现的那个参数)有指定的字体名,那么需要修改到合适的,例如原来是"ＭＳ ゴシック"或者"MS PMincho"的话,需要改为"宋体"或者"黑体"之类;<br>对字符边界检查,这部分的难度变化范围非常大.视情况而定,可能只是为适应Shift-JIS编码的两段范围像上面说的以4组"比较/跳转"为特征的检查,也可能是在获取字符数据后就做非常复杂的检查.这里就以简单的情况来讨论了.<br><br>实际上当<br><br><h6 class="quote">Quote:</h6><blockquote class="blockquote"><br>下面是有关 EnumFontFamiliesEx 原型：<br><h6 class="quote"><a href="javascript:" onclick="CopyCode(document.getElementById('code17'));" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Copy code</a></h6><pre class="prettyprint" id="code17" style="border-radius:5px;font-family:monaco,consolas,monospace;font-size:12px;overflow-x:auto;line-height:1.4em"><span class="typ">Int</span><span class="pln"> </span><span class="typ">EnumFontFamiliesEx</span><span class="pln"> </span><span class="pun">(</span><span class="pln">
 &nbsp; HDC hdc</span><span class="pun">,</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp; </span><span class="com">// handle to device context</span><span class="pln">
 &nbsp; LPLOGFONT lpLogfont</span><span class="pun">,</span><span class="pln"> &nbsp;  &nbsp;  &nbsp; </span><span class="com">// pointer to LOGFONT struct</span><span class="pln">
 &nbsp; FONTENUMPROC lpEnumFontFamExProc</span><span class="pun">,</span><span class="pln"> &nbsp; </span><span class="com">// pointer to callback function</span><span class="pln">
 &nbsp; LPARAM lParam</span><span class="pun">,</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp; </span><span class="com">// application-supplied data</span><span class="pln">
 &nbsp; DWORD dWFlags &nbsp;  &nbsp;  &nbsp;  &nbsp; </span><span class="com">// reserved = 0</span><span class="pln">
</span><span class="pun">);</span></pre><br> &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  <br>lpLogfont 指向 LOGFONT 结构, 它具有枚举字体信息。 <br><br>LOGFONT 结构：<br><h6 class="quote"><a href="javascript:" onclick="CopyCode(document.getElementById('code18'));" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Copy code</a></h6><pre class="prettyprint" id="code18" style="border-radius:5px;font-family:monaco,consolas,monospace;font-size:12px;overflow-x:auto;line-height:1.4em"><span class="kwd">typedef</span><span class="pln"> </span><span class="kwd">struct</span><span class="pln"> tagLOGFONT </span><span class="pun">{</span><span class="pln">

 &nbsp; LONG lfHeight</span><span class="pun">;</span><span class="pln">
 &nbsp; LONG lfWidth</span><span class="pun">;</span><span class="pln">
 &nbsp; LONG lfEscapement</span><span class="pun">;</span><span class="pln">
 &nbsp; LONG lfOrientation</span><span class="pun">;</span><span class="pln">
 &nbsp; LONG lfWeight</span><span class="pun">;</span><span class="pln">
 &nbsp; BYTE lfItalic</span><span class="pun">;</span><span class="pln">
 &nbsp; BYTE lfUnderline</span><span class="pun">;</span><span class="pln">
 &nbsp; BYTE lfStrikeOut</span><span class="pun">;</span><span class="pln">
 &nbsp; BYTE lfCharSet</span><span class="pun">;</span><span class="pln">
 &nbsp; BYTE lfOutPrecision</span><span class="pun">;</span><span class="pln">
 &nbsp; BYTE lfClipPrecision</span><span class="pun">;</span><span class="pln">
 &nbsp; BYTE lfQuality</span><span class="pun">;</span><span class="pln">
 &nbsp; BYTE lfPitchAndFamily</span><span class="pun">;</span><span class="pln">
 &nbsp; TCHAR lfFaceName </span><span class="pun">[</span><span class="pln">LF_FACESIZE</span><span class="pun">];</span><span class="pln">

</span><span class="pun">}</span><span class="pln"> LOGFONT</span><span class="pun">;</span></pre><br> &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  <br>lfCharSet 参数指定字符集。 定义下列值：<br><h6 class="quote"><a href="javascript:" onclick="CopyCode(document.getElementById('code19'));" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Copy code</a></h6><pre class="prettyprint" id="code19" style="border-radius:5px;font-family:monaco,consolas,monospace;font-size:12px;overflow-x:auto;line-height:1.4em"><span class="pln">ANSI_CHARSET
ARABIC_CHARSET
BALTIC_CHARSET
CHINESEBIG5_CHARSET
DEFAULT_CHARSET
EASTEUROPE_CHARSET
GB2312_CHARSET
GREEK_CHARSET
HANGUEL_CHARSET
HANGUL_CHARSET
HEBREW_CHARSET
JOHAB_CHARSET
MAC_CHARSET
OEM_CHARSET
RUSSIAN_CHARSET
SHIFTJIS_CHARSET
SYMBOL_CHARSET
THAI_CHARSET
TURKISH_CHARSET
VIETNAMESE_CHARSET</span></pre><br><br>字符集 &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp; 值<br>ANSI_CHARSET &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;   0<br>DEFAULT_CHARSET &nbsp;  &nbsp;  &nbsp;  &nbsp;  1<br>SYMBOL_CHARSET &nbsp;  &nbsp;  &nbsp;  &nbsp;  2<br>MAC_CHARSET &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;   77<br>SHIFTJIS_CHARSET &nbsp;  &nbsp;  &nbsp;  &nbsp;  128<br>HANGEUL_CHARSET &nbsp;  &nbsp;  &nbsp;   129<br>HANGUL_CHARSET &nbsp;  &nbsp;  &nbsp;   129<br>JOHAB_CHARSET &nbsp;  &nbsp;  &nbsp;  &nbsp;  130<br>GB2312_CHARSET &nbsp;  &nbsp;  &nbsp;  &nbsp;  134<br>CHINESEBIG5_CHARSET &nbsp;  &nbsp;  136<br>GREEK_CHARSET &nbsp;  &nbsp;  &nbsp;  &nbsp;  161<br>TURKISH_CHARSET &nbsp;  &nbsp;  &nbsp;   162<br>VIETNAMESE_CHARSET &nbsp;  &nbsp;  163<br>HEBREW_CHARSET &nbsp;  &nbsp;  &nbsp;   177<br>ARABIC_CHARSET &nbsp;  &nbsp;  &nbsp;  &nbsp;  178<br>BALTIC_CHARSET &nbsp;  &nbsp;  &nbsp;  &nbsp;  186<br>RUSSIAN_CHARSET &nbsp;  &nbsp;  &nbsp;   204<br>THAI_CHARSET &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;   222<br>EASTEUROPE_CHARSET &nbsp;  &nbsp;  238<br>OEM_CHARSET &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp; 255<br> &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  <br>如果 lfCharSet 参数设置到 DEFAULT_CHARSET, 函数将枚举所有字体作为多次如没有该字体中支持 Windows 字符集系统中。</blockquote><br><h6 class="quote">Quote:</h6><blockquote class="blockquote"><br>下面是有关 CreateFont 原型:<br><h6 class="quote"><a href="javascript:" onclick="CopyCode(document.getElementById('code20'));" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Copy code</a></h6><pre class="prettyprint" id="code20" style="border-radius:5px;font-family:monaco,consolas,monospace;font-size:12px;overflow-x:auto;line-height:1.4em"><span class="pln">HFONT </span><span class="typ">CreateFont</span><span class="pun">(</span><span class="pln"> 
  </span><span class="kwd">int</span><span class="pln"> nHeight</span><span class="pun">,</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp; </span><span class="com">// height of font </span><span class="pln">
  </span><span class="kwd">int</span><span class="pln"> nWidth</span><span class="pun">,</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  </span><span class="com">// average character width </span><span class="pln">
  </span><span class="kwd">int</span><span class="pln"> nEscapement</span><span class="pun">,</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;   </span><span class="com">// angle of escapement </span><span class="pln">
  </span><span class="kwd">int</span><span class="pln"> nOrientation</span><span class="pun">,</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  </span><span class="com">// base-line orientation angle </span><span class="pln">
  </span><span class="kwd">int</span><span class="pln"> fnWeight</span><span class="pun">,</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  &nbsp;   </span><span class="com">// font weight </span><span class="pln">
  DWORD fdwItalic</span><span class="pun">,</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;   </span><span class="com">// italic attribute option </span><span class="pln">
  DWORD fdwUnderline</span><span class="pun">,</span><span class="pln"> &nbsp;  &nbsp;   </span><span class="com">// underline attribute option </span><span class="pln">
  DWORD fdwStrikeOut</span><span class="pun">,</span><span class="pln"> &nbsp;  &nbsp;   </span><span class="com">// strikeout attribute option </span><span class="pln">
  DWORD fdwCharSet</span><span class="pun">,</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  </span><span class="com">// character set identifier </span><span class="pln">
  DWORD fdwOutputPrecision</span><span class="pun">,</span><span class="pln">  </span><span class="com">// output precision </span><span class="pln">
  DWORD fdwClipPrecision</span><span class="pun">,</span><span class="pln"> &nbsp;  </span><span class="com">// clipping precision </span><span class="pln">
  DWORD fdwQuality</span><span class="pun">,</span><span class="pln"> &nbsp;  &nbsp;  &nbsp;  </span><span class="com">// output quality </span><span class="pln">
  DWORD fdwPitchAndFamily</span><span class="pun">,</span><span class="pln"> &nbsp; </span><span class="com">// pitch and family </span><span class="pln">
  LPCTSTR lpszFace &nbsp;  &nbsp;  &nbsp;   </span><span class="com">// typeface name </span><span class="pln">
</span><span class="pun">);</span><span class="pln"> </span></pre><br><br>留意fdwCharSet,这个就是我们关心的字符集ID参数<br><br>另外一个版本, CreateFontIndirect 原型:<br>HFONT CreateFontIndirect(<br>CONST LOGFONT* lplf &nbsp; // characteristics<br>);<br><br>其中 LOGFONT 的声明如下：<br><br><h6 class="quote"><a href="javascript:" onclick="CopyCode(document.getElementById('code21'));" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Copy code</a></h6><pre class="prettyprint" id="code21" style="border-radius:5px;font-family:monaco,consolas,monospace;font-size:12px;overflow-x:auto;line-height:1.4em"><span class="kwd">typedef</span><span class="pln"> </span><span class="kwd">struct</span><span class="pln"> tagLOGFONT </span><span class="pun">{</span><span class="pln"> 
LONG lfHeight</span><span class="pun">;</span><span class="pln"> 
LONG lfWidth</span><span class="pun">;</span><span class="pln"> 
LONG lfEscapement</span><span class="pun">;</span><span class="pln"> 
LONG lfOrientation</span><span class="pun">;</span><span class="pln"> 
LONG lfWeight</span><span class="pun">;</span><span class="pln"> 
BYTE lfItalic</span><span class="pun">;</span><span class="pln"> 
BYTE lfUnderline</span><span class="pun">;</span><span class="pln"> 
BYTE lfStrikeOut</span><span class="pun">;</span><span class="pln"> 
BYTE lfCharSet</span><span class="pun">;</span><span class="pln"> 
BYTE lfOutPrecision</span><span class="pun">;</span><span class="pln"> 
BYTE lfClipPrecision</span><span class="pun">;</span><span class="pln"> 
BYTE lfQuality</span><span class="pun">;</span><span class="pln"> 
BYTE lfPitchAndFamily</span><span class="pun">;</span><span class="pln"> 
TCHAR lfFaceName</span><span class="pun">[</span><span class="pln">LF_FACESIZE</span><span class="pun">];</span><span class="pln"> 
</span><span class="pun">}</span><span class="pln"> LOGFONT</span><span class="pun">,</span><span class="pln"> </span><span class="pun">*</span><span class="pln">PLOGFONT</span><span class="pun">;</span><span class="pln"> </span></pre></blockquote><br><br>啊...没时间了.暂时先说这么多,闪人.回头有时间再详细说吧~<div id="alert_914227" style="color: gray; margin-top: 30px; --darkreader-inline-color:#bfb9ac;" data-darkreader-inline-color="">[ 此贴被rednaxela在2007-01-05 11:58重新编辑 ]</div></div>
		</th>
	</tr>
	<tr class="tr1 r_one">
		<th style="vertical-align: bottom; padding-left: 15px; border: 0px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">

		<div id="w_914227" class="c"></div>

		<div class="tipad"><span style="float:right">
<a href="javascript:scroll(0,0)" title="顶端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">顶端</a> <a href="javascript:scroll(0,999999)" title="底端" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">底端</a></span>
			
			<span class="gray"> 2007-01-04 17:49 | 
	
			</span>

			<span><a class="s3" title="回复此楼" style="cursor:pointer;" onclick="postreply('回 4楼(rednaxela) 的帖子');" data-mx-warn="Empty URL">4 楼</a></span>

		</div></th>
	</tr></tbody></table>
</div>

</form>
<div class="t3" style="margin:initial"><table cellspacing="0" cellpadding="0" width="100%" align="center">
	<tbody><tr><td align="left"></td>
		<td valign="center" align="right">
		<a class="abtn f_two" id="readlog" onclick="sendmsg('pw_ajax.php?action=readlog','',this.id);" data-mx-warn="Empty URL">帖子浏览记录<img src="assets/1570906273-5c8e409588b73ce4284cf5b9bd619e15.gif"></a>
		<select onchange="Fjump(this.options[this.selectedIndex].value)"><option value="" selected="">快速跳至</option>
<option value="1">&gt;&gt; 『澄空学园 办公楼区』</option>
<option value="2"> &nbsp;|- 【校园公告栏】</option>
<option value="5"> &nbsp;|- 【论坛意见箱】</option>
<option value="113">&gt;&gt; 『澄空学园 资讯社』</option>
<option value="47"> &nbsp;|- 【新鲜速报】</option>
<option value="103"> &nbsp;|- 【新作介绍】</option>
<option value="8"> &nbsp; &nbsp;|-  【电子杂志下载区】</option>
<option value="104"> &nbsp;|- 【杂志专题】</option>
<option value="7">&gt;&gt; 『澄空学园 教学楼区』</option>
<option value="62"> &nbsp;|- 【AGE主题学部】</option>
<option value="39"> &nbsp;|- 【Akabeesoft2主题学部】</option>
<option value="100"> &nbsp;|- 【AUGUST主题学部】</option>
<option value="42"> &nbsp;|- 【CIRCUS主题学部】</option>
<option value="40"> &nbsp;|- 【Cotton-Nekoneko主题学部】</option>
<option value="64"> &nbsp;|- 【GIGA主题学部】</option>
<option value="38"> &nbsp;|- 【Key主题学部】</option>
<option value="10"> &nbsp;|- 【KID主题学部】</option>
<option value="37"> &nbsp;|- 【Leaf主题学部】</option>
<option value="70"> &nbsp;|- 【minori主题学部】</option>
<option value="12"> &nbsp;|- 【Navel主题学部】</option>
<option value="65"> &nbsp;|- 【Nitro+主题学部】</option>
<option value="14"> &nbsp;|- 【Type-Moon应援会】</option>
<option value="17"> &nbsp; &nbsp;|-  【TM精华区】</option>
<option value="98"> &nbsp;|- 【Will主题学部】</option>
<option value="116"> &nbsp;|- 【FAVORITE主题学部】</option>
<option value="108"> &nbsp;|- 【ALcot主题学部】</option>
<option value="55"> &nbsp;|- 【GALGAME综合作品讨论室】</option>
<option value="97"> &nbsp; &nbsp;|-  【Light主题学部】</option>
<option value="117"> &nbsp; &nbsp;|-  【CUFFS主题学部】</option>
<option value="15"> &nbsp; &nbsp;|-  【Liar Soft主题学部】</option>
<option value="57"> &nbsp; &nbsp;|-  【Purple 主题学部】</option>
<option value="13"> &nbsp; &nbsp;|-  【工画堂主题学部】</option>
<option value="35"> &nbsp;|- 【GALGAME综合杂谈室】</option>
<option value="99"> &nbsp;|- 【ぱれっと主题学部】</option>
<option value="122"> &nbsp;|- 【SAGA PLANETS研讨室】</option>
<option value="123"> &nbsp;|- 【Lump of Sugar 研讨室】</option>
<option value="86">&gt;&gt; 『澄空学园 图书馆』</option>
<option value="80"> &nbsp;|- 【游戏鉴赏室】</option>
<option value="56"> &nbsp;|- 【GALGAME攻略馆】</option>
<option value="115"> &nbsp;|- 【作品出处问询室】</option>
<option value="63"> &nbsp;|- 【Galgame疑问求助室】</option>
<option value="18">&gt;&gt; 『澄空学园 教辅楼区』</option>
<option value="73"> &nbsp;|- 【同人游戏区】</option>
<option value="60"> &nbsp;|- 【二次元轻小说社】</option>
<option value="20"> &nbsp;|- 【日语自学教室】</option>
<option value="61"> &nbsp; &nbsp;|-  【日语学习资料区】</option>
<option value="118"> &nbsp; &nbsp;|-  【日语参考文章区】</option>
<option value="21"> &nbsp;|- 【一般游戏社团】</option>
<option value="24"> &nbsp;|- 【多媒体课堂】</option>
<option value="88">&gt;&gt; 『澄空学园 原创综合区』</option>
<option value="79"> &nbsp;|- 【原创游戏部】</option>
<option value="36"> &nbsp; &nbsp;|-  【ss-square】</option>
<option value="89"> &nbsp;|- 【MAD研究室】</option>
<option value="91"> &nbsp;|- 【莉可屋 REC ROOM】</option>
<option value="119"> &nbsp; &nbsp;|-  【澄空百合社翻唱作品】</option>
<option value="19"> &nbsp;|- 【澄空文学部】</option>
<option value="120"> &nbsp; &nbsp;|-  【落日余晖】</option>
<option value="23"> &nbsp;|- 【绘画工房】</option>
<option value="69"> &nbsp;|- 【活动投票区】</option>
<option value="74"> &nbsp;|- 【友谊赛投票区】</option>
<option value="58"> &nbsp;|- 【澄空部活室】</option>
<option value="41"> &nbsp;|- 【暑假原创作品活动专区】</option>
<option value="59"> &nbsp;|- 【实物周边交流区】</option>
<option value="85"> &nbsp; &nbsp;|-  【ComicMarket相关资料】</option>
<option value="82"> &nbsp; &nbsp;|-  【新品介绍】</option>
<option value="84"> &nbsp; &nbsp;|-  【综合交流】</option>
<option value="83"> &nbsp; &nbsp;|-  【好物收集】</option>
<option value="81"> &nbsp; &nbsp;|-  【交易求购】</option>
<option value="95"> &nbsp;|- 【澄空放送部】</option>
<option value="111"> &nbsp; &nbsp;|-  【放送策划室】</option>
<option value="27"> &nbsp;|- 【水下乐园LeMU】</option>
<option value="46"> &nbsp; &nbsp;|-  【美工作品收藏室】</option>
<option value="26"> &nbsp; &nbsp;|-  【COS自爆馆】</option>
<option value="90"> &nbsp; &nbsp;|-  【澄空期刊室】</option>
<option value="71"> &nbsp;|- 【澄空演剧部】</option>
<option value="9"> &nbsp; &nbsp;|-  演剧部排练室</option>
<option value="52"> &nbsp;|- 【废帖回收站】</option>
<option value="29">&gt;&gt; 『澄空学园 好物交流站』</option>
<option value="50"> &nbsp;|- 【澄空学园字幕作品】</option>
<option value="51"> &nbsp;|- 【澄空学园漫画作品】</option>
<option value="77"> &nbsp;|- 【游戏汉化交流区】</option>
<option value="28"> &nbsp; &nbsp;|-  【CK-GAL中文化小组】</option>
<option value="106"> &nbsp; &nbsp;|-  【PRO2】</option>
<option value="49"> &nbsp; &nbsp;|-      【桜】</option>
<option value="30"> &nbsp;|- 【资源求助区】</option>
<option value="32"> &nbsp;|- 【澄空音乐厅】</option>
<option value="33"> &nbsp;|- 【澄空美术馆】</option>
<option value="34"> &nbsp;|- 【动漫租售屋】</option>
<option value="44">&gt;&gt; 『澄空学园 课余工作区』</option>
<option value="45"> &nbsp;|- 【澄空漫画汉化组】</option>
<option value="48"> &nbsp;|-  【澄空学园字幕组】</option>
<option value="101"> &nbsp; &nbsp;|-  字幕组资料区</option>
<option value="72"> &nbsp;|- 【澄空学园分流组】</option>
<option value="87"> &nbsp;|- 【澄空学园新闻组】</option>
<option value="96"> &nbsp;|- 【澄空学园文学社】</option>
<option value="75"> &nbsp;|- 【澄空学园百合社】</option>
<option value="112"> &nbsp;|- 【澄空学园编辑部】</option>
<option value="114"> &nbsp;|- 【澄空学园美工部】</option>
<option value="121"> &nbsp;|-  【澄空祭运行委员会】</option>
</select></td>
		
	</tr>
	<tr><td style="padding-top: 12px;text-align: left;"><img src="assets/1570906273-ca4a91079181c2a5cb3514b2e5b5f035.gif" align="absbottom"> <b><a href="https://bbs.sumisora.net/index.php" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">『澄空学园』</a> » <a href="https://bbs.sumisora.net/thread.php?fid=78&amp;page=14" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">【汉化破解研讨室】</a></b> </td>
	<td style="padding-top: 12px;text-align: right;"><a href="https://bbs.sumisora.net/post.php?action=reply&amp;fid=78&amp;tid=211852" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img src="assets/1570906273-132cb83b134d7ecd9b390389d489bc43.png"></a>

<a href="https://bbs.sumisora.net/post.php?fid=78" style="margin-left:.5em" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><img src="assets/1570906273-8cab7ee31ae503cf78e5410d40cec291.png" id="td_post1"></a>
</td>
	</tr>
</tbody></table></div>




<form name="FORM" method="post" action="post.php?" enctype="multipart/form-data" onsubmit="return checkpost(document.FORM);">
<div class="t" style="margin-top:8px"><table cellspacing="0" cellpadding="0" align="center" width="100%">
	<tbody><tr>
		<td class="h" colspan="3"><b>快速发帖</b></td>
	</tr>
	<tr></tr>
	<tr class="tr2"><td colspan="100" style="border-bottom: 0px; --darkreader-inline-border-bottom: initial;" data-darkreader-inline-border-bottom=""></td></tr>
	<tr>
		<td valign="top" width="20%" class="f_one" style="padding:7px">
		<fieldset id="smiliebox" style="border: 1px solid rgb(213, 229, 232); --darkreader-inline-border-top:#354e51; --darkreader-inline-border-right:#354e51; --darkreader-inline-border-bottom:#354e51; --darkreader-inline-border-left:#354e51;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
		<legend>内容</legend>
		<br>
		<input type="checkbox" name="atc_usesign" value="1" checked="">使用签名<br>
		<input type="checkbox" name="atc_convert" value="1" checked="">Wind Code自动转换 <br>
	 	<input type="checkbox" id="atc_autoimg" name="atc_autoimg" value="1" onchange="onAutoImgchange()" checked="" title="此设置会记在浏览器中"><label for="atc_autoimg" title="此设置会记在浏览器中">自动分析img</label><br><br>
	 	
		<input type="checkbox" name="atc_requiresell" value="1" disabled="">出售此帖
		<input class="input" type="text" maxlength="3" size="3" name="atc_money" value="0">
		<br>
		<input type="checkbox" name="atc_requirervrc" value="1">加密此帖
		<input class="input" type="text" maxlength="6" size="3" name="atc_rvrc" value="0">
		<br>
		<br><br><a href="https://bbs.sumisora.net/read.php?tid=10925672" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">如何在帖子中贴图？</a>
		<br><a href="https://bbs.sumisora.net/read.php?tid=10942243" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Wind Code使用教程</a>
		<br><a href="https://bbs.sumisora.net/yume/recover/" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">恢复帖子内容</a>
		</fieldset>
		</td>
		<td width="60%" class="f_one" style="padding:7px">
		<div>


<blockquote style="width: 96%;" class="blockquote">澄空娘：『本论坛以GALGAME游戏及其周边动漫为主，涉及其他非讨论性质的贴可能不予以保留
』</blockquote>

		<input type="text" class="input" name="atc_title" value="Re:[原创]ef-first主程序中文支持试验。" size="65">
		

		 认证码: <input class="input" type="text" name="gdcode" size="5" tabindex="6" onfocus="try{opencode('menu_gd',this)}catch(e){}"><br>
		

		</div><div style="padding:.3em 0">
		</div>
		<textarea onkeydown="quickpost(event)" id="atc_content" name="atc_content" rows="8" style="width:96%"></textarea>
		
		
		
		
		
		<div style="margin:5px 0">
		<div style="padding: 4px 10px 0px 0px; float: left; color: rgb(136, 136, 136); --darkreader-inline-color:#bfb9ac;" data-darkreader-inline-color="">按 Ctrl+Enter 直接提交</div>
		<input class="btn" type="submit" name="Submit" value=" 提 交 "></div>
		</td>
		<td width="20%" class="f_one">
		<div style="padding:3px; text-align:center; width:200px;">
		<fieldset id="smiliebox" style="border: 1px solid rgb(213, 229, 232); --darkreader-inline-border-top:#354e51; --darkreader-inline-border-right:#354e51; --darkreader-inline-border-bottom:#354e51; --darkreader-inline-border-left:#354e51;" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="">
			<legend>表情</legend>
			<div id="menu_show"></div>
<span style="float:right; margin:3px 10px 5px;"><a id="td_face" style="cursor:pointer;" onclick="showDefault();" align="absmiddle" unselectable="on" data-mx-warn="Empty URL">[更多]</a></span>
<span style="float:left; margin:3px 10px 5px;"><a id="td_generalface" style="cursor:pointer;" onclick="showfaces();$('#td_generalface').fadeOut();" align="absmiddle" data-mx-warn="Empty URL">[显示表情]</a></span>
		</fieldset></div>
		
		
		</td>
	</tr>
</tbody></table></div></form>







</div>
<div id="bottom"></div><br>
<center class="gray">
<small><span id="windspend">Total 0.046135(s) query 6, Time is now 10-13 02:50, 
Load is low.
</span> <br>
Powered by <a href="http://www.phpwind.net/" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><b>PHPWind</b></a> <a href="http://www.phpwind.net/" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><b style="color: rgb(255, 153, 0); --darkreader-inline-color:#f7b24b;" data-darkreader-inline-color="">v6.3.2</b></a> Code © 2003-08 <a href="http://www.phpwind.com/" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer"><b>PHPWind.com</b></a> Corporation</small>
</center><br>
<div id="footer">
	<span class="f12 fl"></span><a href="https://bbs.sumisora.net/sendmail.php" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">Contact us</a>

</div>
</div>
        
      </div>
    </body>
  </html>